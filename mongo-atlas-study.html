<table><thead><tr><th><p><strong>Domain</strong></p></th><th><p><strong>Objective</strong></p></th><th><p><strong>Key Points</strong></p></th></tr></thead><tbody><tr><td><p><strong>1. Foundations of Atlas (13%)</strong></p></td><td><p><strong>1.1: Identify cloud architecture and best practices.</strong></p></td><td><p>- Understand differences between regions, availability zones, fault tolerance, high availability, etc.<br />- Knowledge of basics of cloud backups and security.<br />- Identify connection methods (Driver, Compass, mongoSH, web console) and deployment methods (UI or CLI).<br />- Knowledge of the cloud shared responsibility model.<br />- Understand roles and functions of the control plane and data plane.</p></td></tr><tr><td></td><td><p><strong>1.2: Manage an organization or project in Atlas.</strong></p></td><td><p>- Knowledge of hierarchy elements in MongoDB Atlas: Organization &gt; Project &gt; Cluster.<br />- Knowledge of creating Atlas users.</p></td></tr><tr><td></td><td><p><strong>1.3: Deploy a cluster in Atlas.</strong></p></td><td><p>- Understand the difference between dedicated, shared, and serverless clusters.<br />- Understand MongoDB deployment models (replica sets).<br />- Create, pause, resume, and terminate a cluster.</p></td></tr><tr><td></td><td><p><strong>1.4: Manage documents located in a cluster collection(s).</strong></p></td><td><p>- Understand the use of Data Explorer.<br />- Verify that sample data is loaded correctly by finding a document in a collection.</p></td></tr><tr><td><p><strong>2. Atlas Administration (13%)</strong></p></td><td><p><strong>2.1: Differentiate between Atlas and DB users for Atlas administration.</strong></p></td><td><p>- Identify the difference between roles and actions for Atlas and Database users.</p></td></tr><tr><td></td><td><p><strong>2.2: Determine cluster architecture and management.</strong></p></td><td><p>- Understand differences between cluster tier types, disk types available, and hardware configuration.<br />- Understand how to choose the region.<br />- Set up clusters (MongoDB-specific).<br />- Configure Autoscaling for tier and storage.<br />- How to alter size of the disk.<br />- Identify nodes in replica set and confirm they are healthy.</p></td></tr><tr><td></td><td><p><strong>2.3: Identify which configuration settings can be changed based on cluster tier.</strong></p></td><td><p>- How and why to use Termination protection.<br />- Knowledge of the difference between oplog and minimum oplog window.<br />- Understand additional cluster configurations, oplog, version management.</p></td></tr><tr><td><p><strong>3. Security in Atlas (21%)</strong></p></td><td><p><strong>3.1: Implement user management features for Database users.</strong></p></td><td><p>- Understand roles, permissions, access levels, authentication/authorization.<br />- Add database users with built-in role using Atlas UI.<br />- Implement the Principle of Least Privilege.</p></td></tr><tr><td></td><td><p><strong>3.2: Implement user management features for Atlas users.</strong></p></td><td><p>- Understand roles, permissions, access levels, authentication/authorization.<br />- Add and remove users to orgs/projects using Atlas UI.<br />- Implement the Principle of Least Privilege.</p></td></tr><tr><td></td><td><p><strong>3.3: Access the audit log and activity feed.</strong></p></td><td><p>- Distinguish between audit log and activity feed.<br />- How to enable auditing/how to set up an audit filter in Atlas/all available options for audit filters.</p></td></tr><tr><td></td><td><p><strong>3.4: Recall protection methods in-use for Atlas.</strong></p></td><td><p>- How encryption for data at rest or data in-transit is implemented.<br />- Understand that encryption is enabled by default.</p></td></tr><tr><td></td><td><p><strong>3.5: Configure networking access.</strong></p></td><td><p>- Ensure cluster access is controlled.<br />- Where to configure networking at the project level.<br />- Understand peering, private endpoints, standard endpoints, and implement the Principle of Least Privilege.</p></td></tr><tr><td><p><strong>4. Database Backup and Recovery (13%)</strong></p></td><td><p><strong>4.1: Identify MongoDB Atlas options used to backup and restore free, dedicated, serverless clusters.</strong></p></td><td><p>- Understand the difference between cloud backups and continuous backups.</p></td></tr><tr><td></td><td><p><strong>4.2: Determine appropriate backup policies based on business requirements.</strong></p></td><td><p>- Define backup procedures for free, dedicated, serverless clusters.<br />- Understand RPO/RTO.<br />- Understand companies' data compliance and requirements.<br />- Difference of Cloud Provider Snapshot restore vs Point In Time recovery.<br />- Frequency and retention period.</p></td></tr><tr><td></td><td><p><strong>4.3: Determine restore procedures for free, dedicated, serverless clusters.</strong></p></td><td><p>- Understand restoring to same or new cluster.<br />- Upgrade from a shared tier to a dedicated tier.<br />- Understand that a serverless cluster can be restored.<br />- Understand minimum requirements for restoring to ensure compatible versions.<br />- Understand same version/disk size architecture.</p></td></tr><tr><td><p><strong>5. Logging (6%)</strong></p></td><td><p><strong>5.1: Review organization, project, and cluster activity from Activity Feed.</strong></p></td><td><p>- Steps on how to access the Activity Feed.<br />- Knowledge of where to find organization, project, cluster-level activity in Activity Feed.<br />- Understand what information can be found in Activity Feed.</p></td></tr><tr><td></td><td><p><strong>5.2: Retrieve log data.</strong></p></td><td><p>- Understand how to access logs.<br />- Steps to download and store logs.<br />- Understand the concept of retention policies.</p></td></tr><tr><td><p><strong>6. Metrics and Monitoring (21%)</strong></p></td><td><p><strong>6.1: Identify relevant core metrics for MongoDB performance.</strong></p></td><td><p>- Query targeting, replication lag, oplog GB/hour, etc.<br />- Identify important real-time metrics location</p></td></tr><tr><td></td><td><p><strong>6.2: Identify relevant core metrics for system performance.</strong></p></td><td><p>- Understand storage, CPU utilization, memory utilization, network traffic, etc.</p></td></tr><tr><td></td><td><p><strong>6.3: Distinguish between metrics available in free, serverless, and dedicated clusters.</strong></p></td><td><p>- Understand what metrics are available depending on Atlas deployment</p></td></tr><tr><td></td><td><p><strong>6.4: Configure and respond to alerts.</strong></p></td><td><p>- Identify definition of common alerts such as Host Down, No Primary, Disk low, Index Query.<br />- Locate real-time metrics in Atlas UI and access using Atlas CLI.<br />- Understand how to respond to alerts and close them.</p></td></tr><tr><td></td><td><p><strong>6.5: Analyze query performance.</strong></p></td><td><p>- Understand Atlas metrics including Real Time metrics, profiler metrics like slow queries and performance advisor insights</p></td></tr><tr><td></td><td><p><strong>6.6: Optimize deployment by utilizing Performance Advisor.</strong></p></td><td><p>- Identify how to find suggestions about optimizing Schema<br />- Identify how to find suggestions about Indexes<br />- Understand what Performance Advisor provides automatically</p></td></tr><tr><td><p><strong>7. Database Upgrades and Maintenance (13%)</strong></p></td><td><p><strong>7.1: Identify scenarios that require maintenance or upgrades.</strong></p></td><td><p>- Understand server patching, resizing cluster tier etc<br />- Retrieve current version of MongoDB<br />- Basic understanding of major or minor versions and Feature Compatibility Version</p></td></tr><tr><td></td><td><p><strong>7.2: Design maintenance or upgrade plan based on requirements.</strong></p></td><td><p>- Prepare for zero downtime maintenance<br />- Determine suitable maintenance window for business needs<br />- Define how MongoDB performs rolling maintenance<br />- Basic understanding of elections such as primary change<br />- Determine time available based on size of oplog</p></td></tr><tr><td></td><td><p><strong>7.3: Build an upgrade plan including rollback procedures to previous version if necessary..</strong></p></td><td><p>- Best practices before version upgrades<br />- How to test a version before upgrade<br />- Steps before an upgrade including FCV pinning</p></td></tr></tbody></table><p><strong>Domain 1: Foundations of Atlas (13%)</strong></p><p>Objective 1.1: Cloud architecture and best practices.</p><p><strong>Regions and Availability Zones:</strong></p><p><strong>Overview of Cloud Providers and Regions in MongoDB Atlas</strong></p><p>MongoDB Atlas allows users to deploy their databases across various cloud providers and regions. This choice significantly impacts:</p><p><strong>Network Latency</strong>: The physical distance between the client and the database can affect response times.</p><p><strong>Cost</strong>: Different regions may have varying pricing structures for running clusters.</p><p><strong>Cluster Configuration Options</strong>: The available tiers and features can differ based on the selected region.</p><p><strong>Supported Cloud Providers</strong></p><p>MongoDB Atlas supports deployment on the following cloud providers:</p><p><strong>Amazon Web Services (AWS)</strong></p><p><strong>Google Cloud Platform (GCP)</strong></p><p><strong>Microsoft Azure</strong></p><p>For each provider, there are specific regions where Atlas can be deployed.</p><p><strong>Cluster Creation and Region Selection</strong></p><p>When creating a new cluster, you will encounter:</p><p><strong>Recommended Regions</strong>: Marked with a â˜…, these regions offer higher availability and are suggested for optimal performance.</p><p><strong>Shared Tier Limitations</strong>: Regions that are grayed-out are not available for shared tier clusters and can only be used for dedicated clusters.</p><p><strong>Fault Tolerance and High Availability:</strong></p><p><strong>Cluster Types in MongoDB Atlas</strong></p><p>MongoDB Atlas offers various types of cloud database deployments to cater to different needs. The main types include:</p><ul><li><strong>Dedicated Clusters</strong>: Ideal for high-throughput production applications.</li><li><strong>Shared Clusters and Flex Clusters</strong>: Suitable for development and small-scale applications.</li><li><strong>Global Clusters</strong>: Designed for location-aware read and write operations.</li><li><strong>Local Deployments</strong>: For testing and development on a single-node replica set.</li></ul><p><strong>Dedicated Clusters</strong></p><p>When to choose a Dedicated Cluster:</p><ul><li>You need specific database configurations based on workload requirements.</li><li>You want to define database scaling behavior.</li><li>You are running high-throughput production workloads.</li><li>You require guaranteed capacity.</li></ul><p><strong>Key Features of Dedicated Clusters</strong>:</p><ul><li>Set the cluster tier based on your needs.</li><li>Utilize advanced capabilities like sharding.</li><li>Distribute data across multiple regions and cloud providers.</li><li>Scale your cluster on-demand and enable autoscaling.</li></ul><p><strong>Flex Clusters</strong></p><p>Flex Clusters are a new offering that allows for:</p><ul><li>Quick setup with minimal configuration and lower costs.</li><li>Automatic and dynamic scaling to meet workload demands.</li><li>Ideal for infrequent or sparse workloads, as well as development and testing.</li></ul><p><strong>Global Clusters</strong></p><p>Global Clusters are designed for applications that require:</p><ul><li>Low-latency read and write operations for globally distributed clients.</li><li>Uptime protection during regional outages.</li><li>Location-aware data storage in specific geographic regions.</li></ul><p><strong>Important Note</strong>: Once Global Writes are enabled for a cluster, they cannot be disabled.</p><p><strong>Local Deployments</strong></p><p>Local deployments allow you to try out Atlas features on a single-node replica set hosted on your local machine. This is useful for development and testing purposes.</p><p><strong>Feature Support and Comparison</strong></p><p>A comparison table is available to indicate which configurations and capabilities are supported by Dedicated and Flex clusters.</p><p><strong>Next Steps</strong></p><p>Once you have selected a cluster type, you can proceed to create a cluster using the Atlas UI, Atlas Administration API, or Atlas CLI.</p><p><strong>Connection and Deployment Methods:</strong></p><p>To connect to a MongoDB Atlas cluster, you need to follow several steps and meet specific requirements. Hereâ€™s a detailed breakdown of the process:</p><p><strong>1. Considerations</strong></p><ul><li><strong>Host Name Consistency</strong>: Atlas does not guarantee that host names will remain consistent during topology changes (e.g., scaling the cluster).</li><li><strong>Optimized SRV Connection Strings</strong>: These are available for sharded clusters on AWS, improving performance during connection spikes.</li></ul><p><strong>2. Prerequisites</strong></p><ul><li>Ensure your cluster meets the criteria for using optimized connection strings: <ul><li>It must be a sharded cluster on AWS.</li><li>It should run MongoDB version 5.0 or later.</li><li>A private endpoint must be set up.</li><li>Use either a single-region or a multi-region cluster with regionalized private endpoints enabled.</li></ul></li></ul><p><strong>3. Connecting to Your Cloud Cluster</strong></p><p>To connect to your Atlas cluster, you need to:</p><ul><li><strong>Add your IP address</strong> to the IP access list in your Atlas project.</li><li><strong>Create a database user</strong> with access to the desired databases.</li></ul><p><strong>Steps to Connect:</strong></p><ol><li><strong>Get the Connection String</strong>: You can retrieve your connection string from the Atlas UI or using the Atlas CLI. Hereâ€™s how to do it with the CLI:</li></ol><p>bash</p><p>atlas clusters connectionStrings describe &lt;clusterName&gt; [options]</p><p>Example connection string:</p><p>bash</p><p>ï‚·  mongodb+srv://mycluster.abcd1.mongodb.net</p><p>ï‚·  <strong>Connect Using mongosh</strong>: Use the connection string to connect to your cluster:</p><p>bash</p><ol><li>mongosh "mongodb+srv://mycluster.abcd1.mongodb.net/myFirstDatabase" --apiVersion 1 --username &lt;username&gt;</li></ol><p>Make sure to replace &lt;username&gt; with your actual database username.</p><p><strong>4. Connecting to a Local Deployment with the Atlas CLI</strong></p><p>If you are working with a local deployment, you can connect using the Atlas CLI:</p><p>bash</p><p>atlas deployments connect [deploymentName] [options]</p><p><strong>5. Troubleshooting</strong></p><p>If you encounter issues while connecting, refer to the troubleshooting section in the Atlas documentation for guidance.</p><p><strong>Important Notes</strong></p><ul><li>Ensure your application can reach the MongoDB Atlas environment by allowing outbound connections on ports 27015 to 27017.</li><li>If using LDAP authentication, configure network access from Atlas clusters to your secure LDAP.</li></ul><p><strong>Additional Resources</strong></p><ul><li><strong>Connect via Drivers</strong>: Driver Connection</li><li><strong>Connect via Compass</strong>: Compass Connection</li><li><strong>Connect via mongosh</strong>: Mongo Shell Connection</li><li><strong>Connect via VS Code</strong>: MongoDB for VS Code</li></ul><p>By following these steps and guidelines, you should be able to successfully connect to your MongoDB Atlas cluster.</p><p><strong>Cloud Shared Responsibility Model:</strong></p><ul><li><ul><li>MongoDB's Responsibility (Control Plane): Managing the Atlas infrastructure, including hardware, networking, security of the underlying platform, software updates, and patching.</li><li>User's Responsibility (Data Plane): Managing your data, configuring security settings (user access, network access), defining backup and restore policies, schema design, and query optimization.</li><li>Exam focus: Clearly understand the division of responsibilities. MongoDB handles the infrastructure, you handle your data and its security.</li></ul></li></ul><p>Objective 1.2: Manage organization or project in Atlas.</p><p><strong>Atlas Hierarchy: </strong></p><ul><li><ul><li>Organization: The top-level entity in Atlas. Represents your company or team. Manages billing and overall access.</li><li>Project: A container for your MongoDB clusters. Allows you to isolate resources and manage access control for different applications or environments.</li><li>Cluster: The actual MongoDB deployment (replica set or sharded cluster).</li><li>Exam focus: Understand the hierarchy: Organization &gt; Project &gt; Cluster.</li></ul></li></ul><p><strong>Resource Tags in MongoDB Atlas</strong></p><p>Resource tags in MongoDB Atlas allow you to categorize and manage your resources effectively. You can use tags to organize resources by purpose, environment, team, or billing center. Each tag consists of a key-value pair, such as environment: production.</p><p><strong>Key Features of Resource Tags</strong></p><ul><li><strong>Management</strong>: You can manage resource tags through the Atlas UI, Atlas Administration API, and Atlas CLI.</li><li><strong>Tag Structure</strong>: Each tag must contain a key and a value, with the following constraints:<ul><li>Maximum of 50 tags per cluster.</li><li>Each tag key can have a maximum of 255 characters and must be unique.</li><li>Each tag value can also have a maximum of 255 characters.</li><li>Allowed characters include letters, numbers, spaces, semi-colons, at symbols, underscores, dashes, periods, and plus signs.</li></ul></li></ul><p><strong>Important Considerations</strong></p><ul><li><strong>Sensitive Information</strong>: Do not include sensitive information such as Personally Identifiable Information (PII) or Protected Health Information (PHI) in your resource tags, as they can be accessed by other MongoDB services.</li><li><strong>Case Sensitivity</strong>: Tag keys and values are case-sensitive. For example, environment and Environment are treated as separate keys.</li><li><strong>Deletion of Tags</strong>: If you delete a tag, it will be removed from all associated resources.</li><li><strong>Activity Feed</strong>: Changes to resource tags are reflected in the Project Activity Feed, allowing you to track modifications.</li></ul><p><strong>Suggested Tag Keys</strong></p><p>When creating resource tags, Atlas suggests the following keys:</p><table><thead><tr><th><p><strong>Tag Key</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>application</p></td><td><p>Key for the project, service, or application of the resource.</p></td></tr><tr><td><p>environment</p></td><td><p>Key for the deployment environment of the resource.</p></td></tr></tbody></table><p><strong>Suggested Values for environment</strong></p><p>If you select the environment tag key, the following values are suggested:</p><ul><li>development</li><li>production</li><li>staging</li><li>test</li></ul><p><strong>Tagging Strategy</strong></p><ul><li><strong>Standardization</strong>: Use a standardized format for tags and apply it consistently across all resource types.</li><li><strong>Cost Allocation</strong>: Use consistent tag keys, such as cost-center or billing-unit, to associate related resources based on billing entities or purposes.</li><li><strong>Resource Organization</strong>: Use consistent tag keys like environment, application, team, or owner to group resources effectively.</li></ul><p><strong>Managing Tags Programmatically</strong></p><p>You can manage tags across your resources using the following tools:</p><ul><li><strong>Atlas Administration API</strong></li><li><strong>Atlas CLI</strong></li><li><strong>HashiCorp Terraform MongoDB Atlas Provider</strong></li></ul><p><strong>Permissions for Tag Management</strong></p><p>To create or modify resource tags, you must have the Project Owner role for the project or the Organization Owner role on its parent organization.</p><p>Objective 1.3: Deploy a cluster in Atlas.</p><p><strong>Cluster Deployment Types: </strong></p><p>To create a new cluster in MongoDB Atlas, follow these steps:</p><p><strong>Prerequisites</strong></p><ul><li>You need to have either <strong>Organization Owner</strong> or <strong>Project Owner</strong> access to the project.</li><li>It's recommended to use the same cloud provider and region for both your application and the cluster to minimize latency and costs.</li></ul><p><strong>Cluster Types</strong></p><p>You can create either a <strong>replica set</strong> or a <strong>sharded cluster</strong>. This tutorial focuses on creating a replica set.</p><p><strong>Important Considerations</strong></p><ul><li>Atlas limits the total number of nodes in a project to 40 (excluding free and flex clusters).</li><li>M30 and higher clusters are recommended for production environments.</li><li>Each Atlas project supports up to 25 clusters.</li></ul><p><strong>Steps to Create a Cluster Using the Atlas UI</strong></p><ol><li><strong>Select Organization and Project</strong>:<ul><li>From the <strong>Organizations</strong> menu, select the organization that contains your project.</li><li>From the <strong>Projects</strong> menu, select your desired project.</li></ul></li><li><strong>Access Clusters Page</strong>:<ul><li>Click on <strong>Clusters</strong> in the sidebar to navigate to the Clusters page.</li></ul></li><li><strong>Build a Cluster</strong>:<ul><li>If you have existing clusters, click <strong>Build a Cluster</strong>.</li><li>If this is your first cluster, click <strong>Build a Database</strong>.</li></ul></li><li><strong>Choose Configuration Options</strong>:<ul><li>You can either use a template with preset options or specify advanced configuration options.</li><li>For dedicated clusters higher than M10, select <strong>Go to Advanced Configuration</strong>.</li></ul></li><li><strong>Select Cluster Tier</strong>:<ul><li>Choose the appropriate tier (e.g., M10 for development or higher for production).</li></ul></li><li><strong>Specify Cluster Name</strong>:<ul><li>Enter a unique name for your cluster (up to 64 characters). Note that the first 23 characters must be unique within the project.</li></ul></li><li><strong>Create the Cluster</strong>:<ul><li>Click <strong>Create</strong> to deploy your cluster.</li></ul></li></ol><p><strong>Example Command Using Atlas CLI</strong></p><p>To create a cluster using the Atlas CLI, you can run the following command:</p><p>bash</p><p>atlas clusters create &lt;clusterName&gt; [options]</p><p>To watch for a specific cluster to become available, use:</p><p>bash</p><p>atlas clusters watch &lt;clusterName&gt; [options]</p><p><strong>Listing Available Regions</strong></p><p>To list the available regions for new deployments, run:</p><p>bash</p><p>atlas clusters availableRegions list [options]</p><p><strong>Important Notes</strong></p><ul><li>Ensure that you do not include sensitive information in your cluster name or tags.</li><li>If you have a Backup Compliance Policy enabled, all new clusters will have Cloud Backup automatically enabled.</li></ul><p>By following these steps, you can successfully create a new cluster in MongoDB Atlas tailored to your application's needs.</p><p><strong>Creating a Global Cluster in MongoDB Atlas</strong></p><p>Creating a Global Cluster in MongoDB Atlas allows you to enable Global Writes, which is essential for applications that require low-latency access to data from multiple geographic locations. Hereâ€™s a detailed guide on how to create a Global Cluster:</p><p><strong>Prerequisites</strong></p><ul><li>You must have <strong>Organization Owner</strong> or <strong>Project Owner</strong> access to the project.</li><li>Review the <strong>Global Clusters Overview</strong> and <strong>Global Clusters Sharding Reference</strong> before proceeding.</li><li>Global Writes can only be enabled on M30 or greater sharded clusters.</li><li>Once deployed, a Global Cluster cannot be converted back to a standard sharded cluster.</li><li>Sample data cannot be loaded onto a Global Cluster.</li></ul><p><strong>Steps to Create a Global Cluster</strong></p><ol><li><strong>Select Organization and Project</strong>:<ul><li>From the <strong>Organizations</strong> menu, select the organization containing your project.</li><li>From the <strong>Projects</strong> menu, select your desired project.</li></ul></li><li><strong>Access Clusters Page</strong>:<ul><li>Click on <strong>Clusters</strong> in the sidebar to navigate to the Clusters page.</li></ul></li><li><strong>Create a New Cluster</strong>:<ul><li>If you have existing clusters, click <strong>Create</strong> to open the Create New Cluster dialog.</li><li>If this is your first cluster, click <strong>Build a Database</strong> and then select <strong>Advanced Configuration Options</strong>.</li></ul></li><li><strong>Select Cluster Type</strong>:<ul><li>In the Create New Cluster dialog, choose the <strong>Dedicated cluster type</strong>.</li></ul></li><li><strong>Enable Global Writes</strong>:<ul><li>Click on <strong>Global Cluster Configuration</strong> to expand the section.</li><li>Toggle <strong>Enable Global Writes (M30 and Up)</strong> to <strong>On</strong>.</li></ul></li></ol><p><strong>Sharding Configuration</strong></p><ul><li><strong>Atlas-Managed Sharding</strong>: This is the default option, which automatically configures shard keys and zones based on geographic location. It is recommended for most workloads.</li><li><strong>Self-Managed Sharding</strong>: For advanced users who need more control over sharding strategies. You must configure this manually using mongosh or a supported MongoDB Driver.</li></ul><p><strong>Zone Configuration</strong></p><p>Atlas provides three options for configuring Global Cluster zones:</p><ul><li><strong>Using a Template</strong>: Choose from predefined templates for quick setup.</li><li><strong>Single Region Zone</strong>: Configure a zone that operates within a single region.</li><li><strong>Multi Region Zone</strong>: Configure zones that span multiple regions.</li></ul><p><strong>Important Considerations</strong></p><ul><li>You cannot switch between Atlas-Managed and Self-Managed Sharding after deployment.</li><li>Each cloud provider has specific global regions available for zone deployment, which may affect your configuration options and costs.</li><li>You can add up to <strong>nine zones</strong> to a Global Cluster. If you need more, contact Atlas support.</li></ul><p><strong>Additional Configuration Options</strong></p><ul><li><strong>Electable Nodes</strong>: Configure the number of electable nodes for high availability.</li><li><strong>Read-only Nodes</strong>: Add read-only nodes to facilitate local secondary read operations.</li><li><strong>Analytics Nodes</strong>: Use analytics nodes to isolate queries from operational workloads.</li></ul><p><strong>Removing Zones</strong></p><p>If you remove a zone from an existing Global Cluster, it may result in a new connection string if using the standard connection string format. Always verify the connection string after making changes.</p><p><strong>Conclusion</strong></p><p>Creating a Global Cluster in MongoDB Atlas involves careful planning and configuration to ensure optimal performance and availability across different geographic locations. By following the steps outlined above, you can successfully set up a Global Cluster tailored to your application's needs.</p><p>Objective 1.4: Manage documents in cluster collections.</p><p><strong>Interact with Your Data in MongoDB Atlas</strong></p><p>After loading your data or using the sample data provided by MongoDB, you can utilize the Atlas UI to interact with your data in several ways:</p><ul><li><strong>Manage Databases</strong>: You can create, modify, and delete databases within your clusters.</li><li><strong>Manage Collections</strong>: This allows you to create, update, and delete collections in your databases.</li><li><strong>Manage Documents</strong>: You can perform CRUD (Create, Read, Update, Delete) operations on documents within your collections.</li><li><strong>Manage Indexes</strong>: Create and manage indexes to optimize query performance on your collections.</li><li><strong>Create and Run Aggregation Pipelines</strong>: Use aggregation pipelines to process and analyze data in your collections.</li><li><strong>Shard Global Clusters</strong>: Distribute large datasets evenly across multiple shards for better performance and scalability.</li><li><strong>Build Charts</strong>: Visualize your data using charts to gain insights and present information effectively.</li></ul><p><strong>Important Notes</strong></p><ul><li><strong>Primary Read Preference</strong>: The Atlas UI reads from the primary node unless it is unavailable. If the primary is down, it will read from a non-hidden, non-delayed secondary member.</li><li><strong>Data Explorer Requirement</strong>: To interact with your data in the Atlas UI, the Data Explorer feature must be enabled.</li></ul><p><strong>Required Privileges</strong></p><p>To enable or disable the Data Explorer for a project, you must have one of the following roles:</p><ul><li><strong>Project Owner</strong>: This role allows you to manage project settings, including enabling the Data Explorer.</li><li><strong>Organization Owner</strong>: This role provides broader permissions across the organization, including project management.</li></ul><p><strong>Enabling or Disabling Data Explorer</strong></p><p>To manage the Data Explorer settings:</p><ol><li><strong>Select Organization</strong>: Choose the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Project Settings</strong>: Expand the Options menu next to the Projects menu and click on <strong>Project Settings</strong>.</li><li><strong>Enable/Disable Data Explorer</strong>: Set the toggle to On to enable or Off to disable the Data Explorer.</li></ol><p><strong>Domain 2: Atlas Administration (13%)</strong></p><p><strong>Objective 2.1: Differentiate between Atlas and DB users.</strong></p><p><strong>Configure Database Users in MongoDB Atlas</strong></p><p>Creating database users in MongoDB Atlas allows you to manage access to your clusters effectively. Each database user is assigned specific roles that determine their access level. Hereâ€™s a detailed overview of how to configure database users, including authentication methods, roles, and management options.</p><p><strong>Overview</strong></p><ul><li><strong>Database Users vs. Atlas Users</strong>: Database users have access to MongoDB databases, while Atlas users manage access to the Atlas application itself. You can create temporary database users that expire after a user-defined period (up to 7 days).</li><li><strong>Audit Trail</strong>: Atlas logs the creation, deletion, and updates of database users in the project's Activity Feed, providing a clear audit trail for both temporary and permanent users.</li></ul><p><strong>Required Access</strong></p><p>To add database users, you need either the <strong>Organization Owner</strong> or <strong>Project Owner</strong> role in Atlas.</p><p><strong>Adding Database Users</strong></p><ol><li><strong>Access the Project</strong>:<ul><li>Select the organization and project from the navigation menu.</li></ul></li><li><strong>Navigate to Database Access</strong>:<ul><li>Click on <strong>Database Access</strong> under the Security heading in the sidebar.</li></ul></li><li><strong>Add New Database User</strong>:<ul><li>Click on <strong>Add New Database User</strong>.</li></ul></li><li><strong>Select Authentication Method</strong>:<ul><li>Choose the authentication method (e.g., Password, AWS IAM, X.509, etc.).</li></ul></li><li><strong>Enter User Details</strong>:<ul><li>For password authentication, enter a username and password. You can also use the <strong>Autogenerate Secure Password</strong> option.</li></ul></li><li><strong>Assign Roles and Privileges</strong>:<ul><li>Select built-in roles, custom roles, or specific privileges for the user. You can assign multiple roles and privileges as needed.</li></ul></li><li><strong>Restrict Access</strong>:<ul><li>Optionally, restrict access to specific clusters or federated database instances.</li></ul></li><li><strong>Temporary User Option</strong>:<ul><li>If desired, toggle the <strong>Temporary User</strong> option to set an expiration period for the user.</li></ul></li><li><strong>Save Changes</strong>:<ul><li>Click <strong>Add User</strong> to create the new database user.</li></ul></li></ol><p><strong>Viewing Database Users</strong></p><p>To view existing database users:</p><ol><li>Navigate to the <strong>Database Access</strong> page.</li><li>Click on the <strong>Database Users</strong> tab to see a list of users and their roles.</li></ol><p><strong>Modifying Database Users</strong></p><p>To modify an existing user:</p><ol><li>Click <strong>Edit</strong> next to the user you want to modify.</li><li>Update the userâ€™s details, roles, or privileges as needed.</li><li>Click <strong>Update User</strong> to save changes.</li></ol><p><strong>Deleting Database Users</strong></p><p>To delete a database user:</p><ol><li>Click <strong>Delete</strong> next to the user you want to remove.</li><li>Confirm the deletion.</li></ol><p><strong>Authentication Methods</strong></p><p>MongoDB Atlas supports several authentication methods for database users:</p><ul><li><strong>SCRAM</strong>: The default authentication method requiring a password.</li><li><strong>AWS IAM</strong>: Allows authentication using AWS IAM roles or user ARNs.</li><li><strong>X.509 Certificates</strong>: For certificate-based authentication.</li><li><strong>OIDC</strong>: For authentication using OpenID Connect.</li></ul><p><strong>Important Notes</strong></p><ul><li>You cannot change a user's authentication method after creation; a new user must be created for a different method.</li><li>Atlas supports a maximum of 100 database users per project by default. If you need more, you can request an increase via the Atlas Administration API.</li></ul><p><strong>Summary</strong></p><p>Managing database users in MongoDB Atlas is essential for controlling access to your clusters. By following the steps outlined above, you can effectively create, modify, and delete users while ensuring they have the appropriate roles and privileges for their tasks.</p><p><strong>Atlas User Roles Overview</strong></p><p>Atlas user roles are essential for defining the permissions and actions that users can perform within organizations and projects in MongoDB Atlas. Hereâ€™s a detailed breakdown of the available roles and their permissions.</p><p><strong>Organization Roles</strong></p><table><thead><tr><th><p>Organization Role (UI)</p></th><th><p>Organization Role (API)</p></th><th><p>Description</p></th></tr></thead><tbody><tr><td><p>Organization Owner</p></td><td><p>ORG_OWNER</p></td><td><p>Grants root access to the organization, including project management, user administration, and organization settings.</p></td></tr><tr><td><p>Organization Project Creator</p></td><td><p>ORG_GROUP_CREATOR</p></td><td><p>Allows the creation of projects within the organization.</p></td></tr><tr><td><p>Organization Billing Admin</p></td><td><p>ORG_BILLING_ADMIN</p></td><td><p>Manages billing information and alerts for the organization.</p></td></tr><tr><td><p>Organization Billing Viewer</p></td><td><p>ORG_BILLING_READ_ONLY</p></td><td><p>Provides read-only access to billing information.</p></td></tr><tr><td><p>Organization Read Only</p></td><td><p>ORG_READ_ONLY</p></td><td><p>Grants read-only access to organization settings, users, and projects.</p></td></tr><tr><td><p>Organization Member</p></td><td><p>ORG_MEMBER</p></td><td><p>Provides read-only access to settings and users in the organization and projects they belong to.</p></td></tr></tbody></table><p><strong>Project Roles</strong></p><table><thead><tr><th><p>Project Role (UI)</p></th><th><p>Project Role (API)</p></th><th><p>Description</p></th></tr></thead><tbody><tr><td><p>Project Owner</p></td><td><p>GROUP_OWNER</p></td><td><p>Full access to manage clusters, project settings, IP access lists, and database access.</p></td></tr><tr><td><p>Project Cluster Manager</p></td><td><p>GROUP_CLUSTER_MANAGER</p></td><td><p>Allows editing, pausing, and resuming clusters but not creating them.</p></td></tr><tr><td><p>Project Stream Processing Owner</p></td><td><p>GROUP_STREAM_PROCESSING_OWNER</p></td><td><p>Manages stream processing instances and database access within the project.</p></td></tr><tr><td><p>Project Data Access Admin</p></td><td><p>GROUP_DATA_ACCESS_ADMIN</p></td><td><p>Grants access to the Data Explorer and allows management of databases and collections.</p></td></tr><tr><td><p>Project Data Access Read/Write</p></td><td><p>GROUP_DATA_ACCESS_READ_WRITE</p></td><td><p>Allows viewing and creating databases and collections, with UI-only document modifications.</p></td></tr><tr><td><p>Project Data Access Read Only</p></td><td><p>GROUP_DATA_ACCESS_READ_ONLY</p></td><td><p>Grants read-only access to databases and collections through the Data Explorer.</p></td></tr><tr><td><p>Project Read Only</p></td><td><p>GROUP_READ_ONLY</p></td><td><p>Provides metadata view-only access to project control plane and cluster metrics.</p></td></tr><tr><td><p>Project Search Index Editor</p></td><td><p>GROUP_SEARCH_INDEX_EDITOR</p></td><td><p>Allows creating and viewing Atlas Search indexes.</p></td></tr></tbody></table><p><strong>Important Considerations</strong></p><ul><li><strong>Hierarchy Planning</strong>: Carefully plan the hierarchy of your organizations and projects to effectively manage user roles and permissions.</li><li><strong>Role Combinations</strong>: Some roles inherit permissions from others, so understanding the hierarchy and combinations is crucial for effective access management.</li></ul><p>By understanding these roles and their permissions, you can effectively manage user access and security within your MongoDB Atlas environment.</p><p><strong>Objective 2.2: Cluster architecture and management.</strong></p><p><strong>Managing Database Deployments in MongoDB Atlas</strong></p><p>MongoDB Atlas provides a comprehensive interface for managing your clusters and Serverless instances. Hereâ€™s a detailed overview of how to manage your database deployments effectively.</p><p><strong>Clusters View</strong></p><ul><li>The <strong>Clusters view</strong> displays all clusters and Serverless instances associated with your user account.</li><li>Clusters are grouped under their respective Atlas projects, allowing for organized management.</li></ul><p><strong>Filtering Clusters</strong></p><p>You can filter the list of clusters using the following methods:</p><ul><li><strong>Search Box</strong>: Enter the organization name, project name, or cluster/Serverless instance name to narrow down the results.</li><li><strong>Dropdown Menus</strong>: Use the following filters to refine your search:</li><li>Clusters View</li></ul><table><thead><tr><th><p><strong>Menu</strong></p></th><th><p><strong>Filter Purpose</strong></p></th><th><p><strong>Menu Options</strong></p></th></tr></thead><tbody><tr><td><p>Availability</p></td><td><p>Status of the nodes within the cluster.</p></td><td><p>All, Nodes Available, Some Nodes Available, No Primary, Has Warnings &amp; Alerts</p></td></tr><tr><td><p>Type</p></td><td><p>Deployment type of cluster.</p></td><td><p>All, Standalones, Replica Sets, Sharded Clusters</p></td></tr><tr><td><p>Version</p></td><td><p>MongoDB versions running on the clusters.</p></td><td><p>All, Inconsistent, 5.0, 6.0, 7.0</p></td></tr><tr><td><p>Configuration</p></td><td><p>Additional configuration options for the cluster.</p></td><td><p>All, Auth OFF, Backup OFF, SSL OFF</p></td></tr></tbody></table><ul><li>To view clusters that have not contacted Atlas in the last 6 months, click <strong>Show Inactive Clusters</strong>.</li></ul><p><strong>Cluster Information Displayed</strong></p><p>For each cluster, the following information is provided:</p><p>Cluster Information Displayed</p><table><thead><tr><th><p><strong>Field</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Name</p></td><td><p>Name of the cluster.</p></td></tr><tr><td><p>Version</p></td><td><p>MongoDB Version of the cluster.</p></td></tr><tr><td><p>Data Size</p></td><td><p>Size of the cluster data.</p></td></tr><tr><td><p>Backup</p></td><td><p>Backup enabled status.</p></td></tr><tr><td><p>Nodes</p></td><td><p>Number of nodes in the cluster.</p></td></tr><tr><td><p>SSL</p></td><td><p>SSL enabled status.</p></td></tr><tr><td><p>Auth</p></td><td><p>Authentication required status.</p></td></tr><tr><td><p>Alerts</p></td><td><p>Number of open alerts.</p></td></tr></tbody></table><p><strong>Using the Atlas CLI</strong></p><p>To return all Atlas deployments using the Atlas CLI, you can run the following command:</p><p>bash</p><p>atlas deployments list [options]</p><p>For more details on command syntax and parameters, refer to the Atlas CLI documentation for atlas deployments list.</p><p><strong>Cluster Detail View</strong></p><p>To view detailed information about clusters:</p><ol><li>Select the organization that contains your desired project from the <strong>Organizations</strong> menu.</li><li>Select your desired project from the <strong>Projects</strong> menu.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li></ol><p>The <strong>Clusters</strong> page displays:</p><ul><li><strong>Metadata</strong>:<ul><li><strong>Cluster Name</strong>: Name of the cluster.</li><li><strong>Version</strong>: Version of MongoDB that the cluster runs.</li><li><strong>Cluster Tier</strong>: Cluster tiers such as M10, M30, etc.</li><li><strong>Region</strong>: Cloud region where Atlas hosts the cluster.</li><li><strong>Type</strong>: Type of structure for the cluster (e.g., Replica Set or Sharded Cluster).</li><li><strong>Linked App Services App</strong>: Name of the Atlas App Services application linked to this cluster.</li></ul></li><li><strong>High-level Metrics</strong>:<ul><li>Read/write operations per second.</li><li>Number of open connections to the cluster.</li><li>Logical size of cluster data.</li><li>Cluster disk IOPS (available on M10+ clusters).</li></ul></li></ul><p><strong>Monitoring and Resuming</strong></p><ul><li>Atlas pauses monitoring for metrics on M0 clusters without connection activity for seven days. Clusters in this state are indicated in the Cluster Detail view.</li><li>To resume monitoring, establish a successful connection to the cluster using: <ul><li>The Atlas Administration API,</li><li>A supported Driver,</li><li>mongosh, or</li><li>The Atlas UI.</li></ul></li></ul><p>By following these guidelines, you can effectively manage your database deployments in MongoDB Atlas, ensuring optimal performance and security for your applications.</p><p><strong>Manage Clusters</strong></p><p>This page provides resources for configuring and managing MongoDB Atlas clusters. It covers various aspects of cluster management, including access requirements, cluster tiers, and specific features of different cluster types.</p><p><strong>Required Access</strong></p><p>To view your clusters, you need at least Project Read Only access to the project.</p><p><strong>View Your Clusters</strong></p><p>You can list all clusters for your project using the Atlas CLI with the following command:</p><p>bash</p><p>atlas clusters list [options]</p><p>To get details for a specific cluster:</p><p>bash</p><p>atlas clusters describe &lt;clusterName&gt; [options]</p><p>For advanced configuration settings:</p><p>bash</p><p>atlas clusters advancedSettings describe &lt;clusterName&gt; [options]</p><p><strong>Cluster Tiers</strong></p><p>The cluster tier determines the specifications for memory, storage, vCPUs, and IOPS for each data-bearing server in the cluster.</p><ul><li><strong>Free, Shared, Flex, and Dedicated Cluster Comparison</strong>: This section compares different cluster types.</li></ul><p><strong>Cluster Types</strong></p><ul><li><strong>Flex and Shared Clusters</strong>: Economical options for low-throughput applications.</li><li><strong>Dedicated Clusters</strong>: Recommended for production environments, supporting replica set and sharded deployments.</li></ul><p><strong>NVMe Storage</strong></p><p>For applications requiring low-latency and high-throughput I/O, Atlas offers NVMe SSD storage options.</p><p><strong>Cluster Tier Support for NVMe</strong></p><p>The following cluster tiers support NVMe on AWS and Azure:</p><table><tr><td><p><strong>Cluster Tier</strong></p></td><td><p><strong>AWS</strong></p></td><td><p><strong>Azure</strong></p></td></tr><tr><td><p>M40</p></td><td><p>Yes</p></td><td><p>No</p></td></tr><tr><td><p>M50</p></td><td><p>Yes</p></td><td><p>Yes</p></td></tr><tr><td><p>M60</p></td><td><p>Yes</p></td><td><p>Yes</p></td></tr><tr><td><p>M80</p></td><td><p>Yes</p></td><td><p>Yes</p></td></tr><tr><td><p>M200</p></td><td><p>Yes</p></td><td><p>Yes</p></td></tr><tr><td><p>M400</p></td><td><p>Yes</p></td><td><p>Yes</p></td></tr></table><p><strong>Key Differences Between Cluster Types</strong></p><p>The following table highlights key differences between M0 Free Tier clusters, M2 and M5 Shared clusters, Flex clusters, and M10+ dedicated clusters.</p><table><tr><td></td><td><p><strong>Free Clusters</strong></p></td><td><p><strong>Shared Clusters</strong></p></td><td><p><strong>Flex Clusters</strong></p></td><td><p><strong>Dedicated Clusters</strong></p></td></tr><tr><td><p>Storage (Data Size + Index Size)</p></td><td><p>512 MB</p></td><td><p>M2: 2 GB, M5: 5 GB</p></td><td><p>5 GB</p></td><td><p>10 - 4000 GB</p></td></tr><tr><td><p>MongoDB Version Support</p></td><td><p>8.0</p></td><td><p>8.0</p></td><td><p>8.0</p></td><td><p>5.0, 6.0, 7.0, and Latest Release</p></td></tr><tr><td><p>Metrics and Alerts</p></td><td><p>Limited</p></td><td><p>Limited</p></td><td><p>Limited</p></td><td><p><a href="https://html.onlineviewer.net/docs/atlas/monitor-cluster-metrics/">Full metrics</a>, including <a href="https://html.onlineviewer.net/docs/atlas/real-time-performance-panel/#std-label-real-time-metrics-status-tab">Real Time Performance Tab</a>, and full <a href="https://html.onlineviewer.net/docs/atlas/configure-alerts/">alert configuration options</a>.</p></td></tr><tr><td><p>VPC Peering</p></td><td><p>No</p></td><td><p>No</p></td><td><p>No</p></td><td><p><a href="https://html.onlineviewer.net/docs/atlas/security-vpc-peering/#std-label-vpc-peering">VPC Peering Connection wizard</a></p></td></tr><tr><td><p>Global Region Selection</p></td><td><p>A subset of regions in AWS, Google Cloud, and Azure.</p></td><td><p>A subset of regions in AWS</p></td><td></td><td></td></tr></table><p><strong>Customize Cluster Storage</strong></p><p>This page provides detailed information on how to customize storage for MongoDB Atlas clusters. It covers various aspects of storage configuration, including cluster classes, storage capacity, IOPS, and specific instructions for different cloud providers.</p><p><strong>Cluster Class</strong></p><ul><li><strong>Cluster Classes</strong>: Different classes are available for clusters, including: <ul><li><strong>Low CPU Class</strong>: A cost-effective option for applications needing more memory and fewer CPUs.</li><li><strong>General Class</strong>: Suitable for most production environments.</li><li><strong>Local NVMe SSD</strong>: Offers the highest speed and performance for dedicated clusters on AWS or Azure.</li></ul></li></ul><p><strong>NVMe Storage</strong></p><ul><li><strong>NVMe Storage</strong>: Locally attached NVMe SSDs provide high performance but are not supported on Google Cloud.</li></ul><p><strong>Storage Capacity</strong></p><ul><li><strong>Changing Storage Capacity</strong>: You can adjust the storage capacity by: <ul><li>Moving a slider to select the desired disk size.</li><li>Entering the exact disk size in a text box.</li></ul></li></ul><p><strong>Oplog Size Behavior</strong></p><ul><li><strong>Oplog Management</strong>: Atlas manages the oplog size based on whether storage auto-scaling is enabled. The default minimum oplog retention window is set to 24 hours.</li></ul><p><strong>Change Storage Capacity or IOPS on AWS</strong></p><ul><li><strong>AWS Modifications</strong>: Atlas handles changes to storage capacity and IOPS differently based on the size of the data volumes and the timing of changes.</li></ul><table><tr><td><p><strong>Data Volume Size</strong></p></td><td><p><strong>Time Since Last Storage Change</strong></p></td><td><p><strong>Action Atlas Takes</strong></p></td></tr><tr><td><p>Less than 1TB</p></td><td><p>Less than 5h30m</p></td><td><p>Atlas provisions new volumes and syncs the data from the old volumes.</p></td></tr><tr><td><p>Less than 1TB</p></td><td><p>More than 5h30m</p></td><td><p>Atlas waits until the volume modification takes effect, then modifies the hosts' data volumes in place without downtime.</p></td></tr><tr><td><p>More than 1TB</p></td><td><p>Any</p></td><td><p>Atlas waits until the volume modification takes effect, then modifies the hosts' data volumes in place without downtime.</p></td></tr></table><p><strong>Extend Storage Capacity and IOPS on Azure</strong></p><ul><li><strong>Azure Modifications</strong>: For Low CPU or General clusters on Azure, you can extend IOPS and storage capacity through the Atlas UI.</li></ul><table><tr><td><p><strong>Action</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>Initial Setup</p></td><td><p>Atlas assigns default storage size and IOPS based on the chosen tier.</p></td></tr><tr><td><p>Change Storage Capacity</p></td><td><p>In regions supporting extended storage, you can increase storage size and IOPS.</p></td></tr><tr><td><p>Further IOPS Extension</p></td><td><p>In regions supporting extended storage, you can increase IOPS without changing the cluster tier.</p></td></tr><tr><td></td><td></td></tr></table><p><strong>Important Notes</strong></p><ul><li><strong>Storage Costs</strong>: Changes to storage capacity will affect costs.</li><li><strong>Oplog Size</strong>: MongoDB uses a portion of the specified storage for operational files, which may require additional space beyond the compressed data size.</li><li><strong>Multi-region Clusters</strong>: Multi-region Azure clusters do not support extending storage.</li></ul><p><strong>Configure Auto-Scaling</strong></p><p>This page outlines how to configure auto-scaling for MongoDB Atlas clusters, detailing the mechanisms by which Atlas adjusts cluster tiers and storage based on usage.</p><p><strong>Auto-Scaling Overview</strong></p><ul><li><strong>Feature Availability</strong>: Auto-scaling is available for all dedicated cluster tiers under the General and Low-CPU classes, but not for Local NVMe SSD clusters.</li><li><strong>Scaling Mechanism</strong>: Atlas auto-scales based on real-time resource usage, adjusting cluster tiers and storage capacity to optimize performance and cost.</li></ul><p><strong>Scaling Up a Cluster Tier</strong></p><ul><li><strong>Criteria for Scaling Up</strong>: <ul><li>For operational nodes in M10 clusters, if CPU or memory utilization exceeds 75% for one hour.</li><li>For M20 clusters, if utilization exceeds 90% for 20 minutes or 75% for one hour.</li><li>For M30+ clusters, if utilization exceeds 90% for 10 minutes or 75% for one hour.</li></ul></li></ul><p><strong>Scaling Down a Cluster Tier</strong></p><ul><li><strong>Criteria for Scaling Down</strong>: <ul><li>All operational nodes must have CPU utilization below 50% for the last 4 hours.</li><li>WiredTiger cache usage must be below 90% for at least 4 hours.</li><li>The projected total memory utilization at the new tier must be below 60% for at least 4 hours.</li></ul></li></ul><p><strong>Scaling a Sharded Cluster</strong></p><ul><li><strong>Sharded Cluster Rules</strong>: <ul><li>Auto-scaling applies to all shards; if any shard meets the criteria to scale up, all shards will scale up.</li><li>All shards must meet the criteria to scale down.</li></ul></li></ul><p><strong>How Atlas Scales Cluster Storage</strong></p><ul><li><strong>Storage Auto-Scaling</strong>: <ul><li>Atlas automatically increases storage when disk space used reaches 90% for any node.</li><li>Storage scaling is only upward; manual reduction is possible.</li></ul></li></ul><p><strong>Important Considerations</strong></p><ul><li><strong>Sudden Workload Spikes</strong>: Scaling may not occur during sudden bursts of activity, such as bulk inserts.</li><li><strong>Minimum and Maximum Cluster Size</strong>: Users can specify these ranges to control scaling behavior.</li><li><strong>Cluster Tier Restrictions</strong>: You cannot scale to a tier smaller than M10.</li></ul><p><strong>Example of Auto-Scaling</strong></p><ul><li>If a cluster is set to auto-scale between M20 and M60, and the current tier is M40 with a disk capacity of 200GB, Atlas may trigger a disk auto-scaling event to increase capacity to 320GB if usage exceeds 180GB.</li></ul><p><strong>Oplog Considerations</strong></p><ul><li><strong>Oplog Management</strong>: During migrations, if a snapshot is restored that exceeds the current storage capacity, the cluster does not automatically scale.</li></ul><table><tr><td><p><strong>Cluster Type</strong></p></td><td><p><strong>Scaling Up Criteria</strong></p></td><td><p><strong>Scaling Down Criteria</strong></p></td></tr><tr><td><p>M10</p></td><td><p>CPU/Memory &gt; 75% for 1 hour</p></td><td><p>CPU &lt; 50% for 4 hours</p></td></tr><tr><td><p>M20</p></td><td><p>CPU/Memory &gt; 90% for 20 min or &gt; 75% for 1 hour</p></td><td><p>CPU &lt; 50% for 4 hours</p></td></tr><tr><td><p>M30+</p></td><td><p>CPU/Memory &gt; 90% for 10 min or &gt; 75% for 1 hour</p></td><td><p>CPU &lt; 50% for 4 hours</p></td></tr></table><p><strong>Configure Additional Settings</strong></p><p>This page provides comprehensive information on configuring additional settings for your MongoDB Atlas cluster. It covers various aspects, including MongoDB version selection, backup options, termination protection, sharded cluster deployment, and more.</p><p><strong>Select the MongoDB Version of the Cluster</strong></p><ul><li><strong>Supported Versions</strong>: <ul><li>MongoDB 5.0</li><li>MongoDB 6.0</li><li>MongoDB 7.0</li><li>Latest Release (auto-upgrades)</li></ul></li></ul><table><tr><td><p><strong>MongoDB Version</strong></p></td><td><p><strong>Supported on M10+</strong></p></td><td><p><strong>Supported on Free and Shared Tiers (M0, M2, M5)</strong></p></td></tr><tr><td><p>MongoDB 5.0</p></td><td><p>Yes</p></td><td><p>Yes</p></td></tr><tr><td><p>MongoDB 6.0</p></td><td><p>Yes</p></td><td><p>Yes</p></td></tr><tr><td><p>MongoDB 7.0</p></td><td><p>Yes</p></td><td><p>No</p></td></tr><tr><td><p>Latest Release (auto-upgrades)</p></td><td><p>Yes</p></td><td><p>No</p></td></tr></table><p><strong>Backup Options for the Cluster</strong></p><ul><li><strong>Backup Configuration</strong>: <ul><li>Backups are automatically enabled for M2 and M5 Shared clusters.</li><li>For M10+ clusters, you can enable backups by toggling the option in the settings.</li></ul></li></ul><table><tr><td><p><strong>Backup Option</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p><a href="https://html.onlineviewer.net/docs/atlas/backup-restore-cluster/#std-label-cloud-backup-overview">Cloud Backup</a></p></td><td><p>Atlas takes incremental snapshots of the data in your cluster.</p></td></tr><tr><td><p><a href="https://html.onlineviewer.net/docs/atlas/backup/cloud-backup/dedicated-cluster-backup/#std-label-pit-restore">Continuous Cloud Backup</a></p></td><td><p>Restores a cluster from a specific point in time using the oplog.</p></td></tr></table><p><strong>Termination Protection</strong></p><ul><li><strong>Enabling Termination Protection</strong>: <ul><li>This feature prevents users from deleting the cluster. To delete a cluster with termination protection enabled, you must first disable it.</li></ul></li></ul><p><strong>Deploy a Sharded Cluster</strong></p><ul><li><strong>Sharded Cluster Configuration</strong>: <ul><li>You can enable sharding for your cluster (M30 and up) to support horizontal scaling.</li></ul></li></ul><p><strong>Config Servers and Shard Deployment</strong></p><ul><li><strong>Config Servers</strong>: <ul><li>Config servers must remain readable for sharded read operations to function properly.</li><li>Atlas can colocate config server data with application data.</li></ul></li></ul><p><strong>Shard Configuration</strong></p><ul><li><strong>Number of Shards</strong>: <ul><li>Your cluster can have between 1 and 70 shards.</li></ul></li></ul><p><strong>Additional Settings</strong></p><ul><li><strong>Other Configurable Options</strong>: <ul><li>Set minimum oplog window, oplog size, enforce index key limit, allow server-side JavaScript, enable logging of redacted query data, and more.</li></ul></li></ul><table><tr><td><p><strong>Setting</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>Set Minimum Oplog Window</p></td><td><p>Defines the minimum time period for oplog retention.</p></td></tr><tr><td><p>Set Oplog Size</p></td><td><p>Specifies the size of the oplog for the cluster.</p></td></tr><tr><td><p>Enforce Index Key Limit</p></td><td><p>Limits the number of keys in an index.</p></td></tr><tr><td><p>Allow Server-Side JavaScript</p></td><td><p>Enables the execution of JavaScript on the server.</p></td></tr></table><p><strong>Important Notes</strong></p><ul><li><strong>Version Upgrades</strong>: You can upgrade to a newer major MongoDB version but cannot downgrade.</li><li><strong>Backup Compliance Policy</strong>: If enabled, it restricts certain backup configurations.</li><li><strong>Sharded Cluster Limitations</strong>: You cannot convert a sharded cluster to a replica set deployment.</li></ul><p><strong>Objective 2.3: Configuration settings based on cluster tier.</strong></p><p><strong>Modify a Cluster</strong></p><p>This page provides detailed instructions on how to modify your MongoDB Atlas cluster after its initial configuration. It covers various options available for scaling and adjusting your cluster settings.</p><p><strong>Atlas Configuration Options</strong></p><ul><li>You can modify several aspects of your cluster, including: <ul><li>Cluster Type</li><li>Global Cluster Configuration</li><li>Cloud Provider &amp; Region</li><li>Cluster Tier</li><li>Additional Settings</li><li>Cluster Details</li></ul></li></ul><p><strong>Considerations</strong></p><ul><li>Before making changes, consider the impact on performance, cost, and backup policies.</li></ul><p><strong>Required Access</strong></p><ul><li>Ensure you have the necessary permissions to modify the cluster settings.</li></ul><p><strong>Edit a Cluster</strong></p><ul><li>You can access the cluster settings through the Atlas UI to make the desired changes.</li></ul><p><strong>Modify the Cluster Type</strong></p><ul><li><strong>Action</strong>: Change the cluster type.</li><li><strong>Limitations</strong>: You can only move from a shared cluster to a dedicated cluster or a serverless instance.</li></ul><p><strong>Modify the Global Cluster Configuration</strong></p><ul><li><strong>Action</strong>: Enable Global Writes or change existing configurations.</li><li><strong>Limitations</strong>: Once Global Writes are enabled, they cannot be disabled.</li></ul><p><strong>Modify the Cloud Provider &amp; Region</strong></p><ul><li><strong>Action</strong>: Change the cloud provider for your dedicated clusters.</li><li><strong>Limitations</strong>: Changing providers may alter the connection string and could require application updates.</li></ul><p><strong>Deploy or Configure a Multi-Cloud, Multi-Region Cluster</strong></p><ul><li><strong>Action</strong>: Modify or deploy a multi-cloud, multi-region cluster.</li><li><strong>Limitations</strong>: Some storage capabilities may be unavailable in certain regions, particularly on Azure.</li></ul><p><strong>Modify the Cluster Tier</strong></p><ul><li><strong>Action</strong>: Change the cluster tier.</li><li><strong>Limitations</strong>: If using NVMe storage, an initial sync will be required.</li></ul><p><strong>Modify Cluster Storage Options</strong></p><ul><li><strong>Action</strong>: Change the storage options for the cluster tier.</li><li><strong>Limitations</strong>: NVMe storage has a fixed size for each cluster tier.</li></ul><p><strong>Cluster Autoscaling Options</strong></p><ul><li><strong>Action</strong>: Adjust the cluster's auto-scaling options, including storage auto-scaling.</li><li><strong>Limitations</strong>: None.</li></ul><p><strong>Upgrade the MongoDB Version</strong></p><ul><li><strong>Action</strong>: Upgrade the major MongoDB version of the cluster.</li><li><strong>Limitations</strong>: Downgrading is not possible unless the feature compatibility version (FCV) was pinned before the upgrade.</li></ul><p><strong>Deploy a Sharded Cluster</strong></p><ul><li><strong>Action</strong>: Scale up a replica set to a sharded cluster.</li><li><strong>Limitations</strong>: This action cannot be reversed, and certain features must be disabled before conversion.</li></ul><p><strong>Modify the Number of Shards</strong></p><ul><li><strong>Action</strong>: Set the number of shards for a sharded cluster.</li><li><strong>Limitations</strong>: Reducing the number of shards takes time and can affect operations during the process.</li></ul><table><tr><td><p><strong>Setting</strong></p></td><td><p><strong>Action</strong></p></td><td><p><strong>Limitations</strong></p></td></tr><tr><td><p><a href="https://html.onlineviewer.net/docs/atlas/scale-cluster/#std-label-change-cluster-type">Cluster Type</a></p></td><td><p>Change the cluster type.</p></td><td><p>Only move from shared to dedicated or serverless.</p></td></tr><tr><td><p><a href="https://html.onlineviewer.net/docs/atlas/scale-cluster/#std-label-scale-cluster-global-config">Global Cluster Configuration</a></p></td><td><p>Enable Global Writes or change configurations.</p></td><td><p>Cannot disable Global Writes once enabled.</p></td></tr><tr><td><p><a href="https://html.onlineviewer.net/docs/atlas/scale-cluster/#std-label-scale-cluster-cloud-provider">Cloud Provider &amp; Region</a></p></td><td><p>Select a different provider for dedicated clusters.</p></td><td><p>Connection string changes may be required.</p></td></tr><tr><td><p><a href="https://html.onlineviewer.net/docs/atlas/scale-cluster/#std-label-scale-cluster-region">Multi-Cloud, Multi-Region Cluster</a></p></td><td><p>Deploy or modify a multi-cloud, multi-region cluster.</p></td><td><p>Some storage capabilities may be unavailable.</p></td></tr><tr><td><p><a href="https://html.onlineviewer.net/docs/atlas/scale-cluster/#std-label-scale-cluster-instance">Cluster Tier</a></p></td><td><p>Change the cluster tier.</p></td><td><p>Initial sync required for NVMe storage.</p></td></tr><tr><td><p><a href="https://html.onlineviewer.net/docs/atlas/customize-storage/#std-label-create-cluster-storage">Cluster Storage Options</a></p></td><td><p>Change storage options for the cluster tier.</p></td><td><p>Fixed size for NVMe storage.</p></td></tr><tr><td></td><td></td><td></td></tr></table><p><strong>Convert a Shared Cluster to a Serverless Instance</strong></p><p>This page provides detailed instructions on how to convert a Shared cluster (M0, M2, or M5) to a Serverless instance in MongoDB Atlas. It outlines the process, important considerations, and limitations associated with this conversion.</p><p><strong>Conversion Overview</strong></p><ul><li><strong>Supported Clusters</strong>: You can convert Shared clusters (M0, M2, M5) to Serverless instances.</li><li><strong>Cloud Provider and Region</strong>: During conversion, you can also change the cloud provider and region.</li></ul><p><strong>Important Considerations</strong></p><ul><li><strong>Irreversible Conversion</strong>: Once converted to a Serverless instance, you cannot revert back to a cluster. To move data back, you must manually migrate using mongodump and mongorestore.</li><li><strong>Feature Limitations</strong>: Serverless instances do not support all features available in Shared clusters. Some features you will lose access to include:</li></ul><table><tr><td><p><strong>Configuration/Operation</strong></p></td><td><p><strong>Notes</strong></p></td></tr><tr><td><p>Select Cloud Service Provider Regions</p></td><td><p>Serverless instances support fewer regions across all cloud providers.</p></td></tr><tr><td><p>Select Driver Version Support</p></td><td><p>Some driver versions supported by Shared clusters are not supported for Serverless instances.</p></td></tr></table><p><strong>Prerequisites for Conversion</strong>: </p><ul><li><ul><li>Disconnect from Atlas App Services and Atlas Search.</li><li>Ensure no capped collections are present.</li><li>Ensure collation is not used on collections, indexes, or queries.</li><li>Resume any paused M0 clusters before conversion.</li></ul></li></ul><p><strong>Conversion Process</strong></p><ol><li><strong>Check Cloud Provider Region</strong>: If your current region is unsupported for Serverless instances, Atlas will alert you and allow you to select a new region.</li><li><strong>Backup Options</strong>: You can choose between:</li></ol><table><tr><td><p><strong>Option</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>Serverless Continuous Backup</p></td><td><p>Incremental snapshots every six hours, with daily snapshots retained for 35 days.</p></td></tr><tr><td><p>Basic Backup</p></td><td><p>Incremental snapshots every six hours, retaining only the two most recent snapshots, available for free.</p></td></tr></table><ol><li><strong>Acknowledge Considerations</strong>: You must check a box indicating that you understand the implications of converting to a Serverless instance.</li></ol><p><strong>Operational Changes</strong></p><ul><li><strong>Downtime</strong>: The cluster will go offline during the conversion, meaning no read/write operations can occur.</li><li><strong>Session and Transaction Loss</strong>: Sessions, transactions, retryable writes, and change streams from before the conversion will not be preserved.</li></ul><p><strong>Pricing Model</strong></p><ul><li><strong>Pay-Per-Operation</strong>: Serverless instances operate on a pay-per-operation pricing model, charging for Processing Units consumed by database operations and storage.</li></ul><p><strong>Reconfigure a Replica Set During a Regional Outage</strong></p><p>This page provides guidance on how to reconfigure a MongoDB Atlas replica set during a regional outage. It outlines the prerequisites, procedures, and important considerations to ensure a successful reconfiguration.</p><p><strong>Prerequisites</strong></p><ul><li>Ensure that your cluster is experiencing a total outage of nodes in one or more regions, with at least one electable node remaining in another region.</li></ul><p><strong>Procedure</strong></p><p>To restore your Atlas multi-region cluster from an outage, follow these steps:</p><ol><li><strong>Select Organization</strong>: If it's not already displayed, select the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li><strong>Select Project</strong>: If it's not already displayed, select your desired project from the Projects menu in the navigation bar.</li><li><strong>Access Clusters</strong>: If it's not already displayed, click on <strong>Clusters</strong> in the sidebar. The Clusters page will display.</li><li><strong>Electable Nodes</strong>: Under <strong>Electable nodes for high availability</strong>, you can add new nodes to:<ul><li>An existing region by editing the number of nodes in the Nodes column.</li><li>A new region by clicking <strong>+ Add a provider/region</strong>.</li></ul></li></ol><p><strong>Important Considerations</strong></p><ul><li><strong>Data Loss Risks</strong>: Be aware that reconfiguring your cluster during an outage may lead to data loss in certain scenarios:<ul><li>If write operations were not replicated to the node that becomes primary after reconfiguration, those writes may be rolled back when the unavailable members come back online.</li><li>In sharded clusters, if chunk migrations were not replicated, it could lead to orphaned chunks.</li></ul></li><li><strong>Read Preference</strong>: Configure a read preference suitable for querying secondary nodes for reads.</li><li><strong>Avoid Outage Regions</strong>: It is strongly advised not to add nodes to any region currently experiencing an outage.</li><li><strong>Force Configuration</strong>: If you choose to proceed with force configuration, you must check the box indicating that you have reviewed the considerations and agree to proceed.</li></ul><p>This process is crucial for maintaining the availability and integrity of your MongoDB Atlas cluster during regional outages.</p><p><strong>Pause, Resume, or Terminate a Cluster</strong></p><p>You can manage your MongoDB Atlas clusters by pausing, resuming, or terminating them. Hereâ€™s a detailed overview of the functionalities and procedures involved.</p><p><strong>Key Points</strong></p><ul><li><strong>Paused Clusters</strong>:<ul><li>You <strong>cannot</strong> change the configuration, read from, or write to a paused cluster.</li><li>Alerts are stopped, backups are paused, and all $search queries are halted.</li><li>When a cluster is paused, Atlas deletes data from Search Nodes, and indexes are rebuilt upon resuming.</li></ul></li><li><strong>Backup Compliance</strong>:<ul><li>If a Backup Compliance Policy is enabled, resuming a cluster automatically enables Cloud Backup and adjusts settings according to the policy.</li></ul></li><li><strong>Encryption</strong>:<ul><li>If a paused cluster does not have Encryption at Rest enabled, you cannot toggle the encryption settings in the Backup Compliance Policy.</li></ul></li></ul><p><strong>Access Requirements</strong></p><ul><li>To pause or resume a cluster, you need Project Cluster Manager access or higher.</li><li>To terminate a cluster, you need Project Owner or Organization Owner access.</li></ul><p><strong>Important Notes</strong></p><ul><li><strong>Serverless Instances</strong>: The pause, resume, and terminate features are not available for Serverless instances.</li><li><strong>Automatic Pausing</strong>: M0 clusters are automatically paused after 60 days of inactivity. M2 and M5 clusters cannot be paused manually or automatically.</li></ul><p><strong>Pausing a Cluster</strong></p><p>To pause a running Atlas cluster using the Atlas CLI, use the following command:</p><p>bash</p><p>atlas clusters pause &lt;clusterName&gt; [options]</p><p>To pause a cluster using the Atlas UI:</p><ol><li>Select the organization and project.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li><li>For the desired cluster, click the pause icon.</li><li>Confirm by clicking <strong>Pause Cluster</strong>.</li></ol><p><strong>Resuming a Cluster</strong></p><p>To resume a paused Atlas cluster using the Atlas CLI, run:</p><p>bash</p><p>atlas clusters start &lt;clusterName&gt; [options]</p><p>To resume a cluster using the Atlas UI:</p><ol><li>Select the organization and project.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li><li>For the desired cluster, click the resume icon or select <strong>Resume Cluster</strong>.</li></ol><p><strong>Terminating a Cluster</strong></p><p>To terminate a cluster using the Atlas CLI, run:</p><p>bash</p><p>atlas clusters delete &lt;clusterName&gt; [options]</p><p>To terminate a cluster using the Atlas UI:</p><ol><li>Select the organization and project.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li><li>Click the settings icon next to the cluster.</li><li>Disable Termination Protection if enabled.</li><li>Click <strong>Terminate</strong> and confirm.</li></ol><p><strong>Important Considerations on Termination</strong></p><ul><li>Terminating a cluster deletes all backup snapshots associated with it.</li><li>If the cluster has been active for 12 hours or more, Atlas retains the public IP address for a specified duration.</li></ul><table><tr><td><p><strong>Cluster Lifetime</strong></p></td><td><p><strong>IP Address Retention</strong></p></td></tr><tr><td><p>Less than 12 hours</p></td><td><p>Not retained</p></td></tr><tr><td><p>12 to 35 hours</p></td><td><p>12 to 35 hours (equal to the cluster lifetime)</p></td></tr><tr><td><p>36 hours or more</p></td><td><p>36 hours</p></td></tr></table><p><strong>Configure High Availability and Workload Isolation</strong></p><p>This page provides detailed information on configuring high availability and workload isolation for MongoDB Atlas clusters, particularly in a multi-cloud environment. It covers various aspects, including considerations for node distribution, adding and removing nodes, and optimizing cluster performance.</p><p><strong>Key Features</strong></p><ul><li><strong>Multi-Cloud Deployments</strong>: You can create MongoDB deployments across different cloud providers (AWS, Azure, Google Cloud) and geographic regions to enhance availability and workload balancing.</li><li><strong>Node Configuration</strong>: You can set nodes in your MongoDB deployment to use different cloud providers, regions, workload priorities, and replication configurations.</li></ul><p><strong>Considerations</strong></p><ul><li><strong>Electable Nodes</strong>: Electable nodes are crucial for high availability. You can add, remove, or change electable nodes to optimize your cluster's performance.</li><li><strong>Read-Only Nodes</strong>: These nodes are used for optimal local reads but do not participate in elections and cannot become primary nodes.</li><li><strong>Analytics Nodes</strong>: These nodes help isolate queries that you do not want to contend with your operational workload, particularly useful for data analysis operations.</li></ul><p><strong>Adding Electable Nodes</strong></p><p>To add electable nodes for high availability:</p><ol><li>Click <strong>Add a provider/region</strong>.</li><li>Select the cloud provider from the dropdown.</li><li>Choose the region from the dropdown.</li><li>Specify the desired number of nodes.</li></ol><p>The total number of electable nodes must equal 3, 5, or 7 across all providers and regions.</p><p><strong>Removing Electable Nodes</strong></p><p>To remove a node from a region, click the icon next to that region. Note that you cannot remove a node in the Highest Priority region.</p><p><strong>Changing Node Workload Purpose</strong></p><p>You can change the workload purpose of nodes by adding and removing nodes simultaneously. For example, to change a read-only node to an electable node:</p><ol><li>Add an electable node.</li><li>Remove the read-only node.</li><li>Click <strong>Review Changes</strong> and then <strong>Apply Changes</strong>.</li></ol><p>If you have an active 5-node cluster with the following configuration:</p><table><tr><td><p><strong>Nodes</strong></p></td><td><p><strong>Provider</strong></p></td><td><p><strong>Region</strong></p></td><td><p><strong>Priority</strong></p></td></tr><tr><td><p>3</p></td><td><p>AWS</p></td><td><p>us-east-1</p></td><td><p>Highest</p></td></tr><tr><td><p>2</p></td><td><p>Google Cloud</p></td><td><p>us-west3</p></td><td></td></tr></table><p><strong>Important Notes</strong></p><ul><li><strong>Election Delays</strong>: Certain circumstances, such as heavy workloads on the primary shard, may delay the election of a new primary node.</li><li><strong>Connection Strings</strong>: If you use the standard connection string format, removing an entire region from an existing cross-region cluster may result in a new connection string.</li><li><strong>VPC Peering</strong>: If you plan to create VPC peering connections, review the documentation on VPC Peering Connections before proceeding.</li></ul><p><strong>Query Using Pre-Defined Replica Set Tags</strong></p><p>This page provides an overview of pre-defined replica set tags in MongoDB Atlas, which can be used to direct queries to specific node types, regions, and availability zones. Utilizing these tags can enhance cluster performance and reliability.</p><p><strong>Pre-Defined Replica Set Tags</strong></p><p>The following table describes the pre-defined replica set tags provided by Atlas:</p><table><tr><td><p><strong>Pre-Defined Tag Name</strong></p></td><td><p><strong>Description</strong></p></td><td><p><strong>Example</strong></p></td></tr><tr><td><p>Availability Zone</p></td><td><p>AWS availability zone ID, Google Cloud fully-qualified name for a zone, or Azure zone number.</p></td><td><p>AWS: {"availabilityZone" : "use1-az1"}<br />Google Cloud: {"availabilityZone" : "us-east1-b"}<br />Azure: {"availabilityZone" : "1"} </p></td></tr><tr><td><p>Node Type</p></td><td><p>Node type. Possible values are: ELECTABLE, READ_ONLY, ANALYTICS.</p></td><td><p>{"nodeType" : "ANALYTICS"}</p></td></tr><tr><td><p>Provider</p></td><td><p>Cloud provider on which the node is provisioned. Possible values are: AWS, GCP, AZURE.</p></td><td><p>{"provider" : "AWS"}</p></td></tr><tr><td><p>Region</p></td><td><p>Cloud region in which the node resides.</p></td><td><p>{"region" : "US_EAST_2"}</p></td></tr><tr><td><p>Workload Type</p></td><td><p>Pre-defined tag to distribute workload among non-analytics nodes. Possible value: OPERATIONAL.</p></td><td><p>{"workloadType" : "OPERATIONAL"}</p></td></tr><tr><td><p>Disk State</p></td><td><p>State of your disk. Possible value: READY.</p></td><td><p>{"diskState" : "READY"}</p></td></tr></table><p><strong>Disk States</strong></p><p>The following table describes the possible diskState values:</p><table><tr><td><p><strong>Disk State</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>READY</p></td><td><p>Only target warm nodes. You can run queries without experiencing increased or unpredictable latency.</p></td></tr></table><p><strong>Node Types</strong></p><p>The following table describes the possible nodeType values:</p><table><tr><td><p><strong>Node Type</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>ELECTABLE</p></td><td><p>Read from nodes eligible to be elected primary.</p></td></tr><tr><td><p>READ_ONLY</p></td><td><p>Read from read-only nodes for optimal local reads.</p></td></tr><tr><td><p>ANALYTICS</p></td><td><p>Read from analytics nodes for workload isolation.</p></td></tr></table><p><strong>Connection String Examples</strong></p><p>Here are some examples of how to use pre-defined replica set tags in connection strings:</p><ol><li><strong>Isolating Queries to Analytics Nodes</strong>:</li></ol><p>plaintext</p><p>ï‚·  mongodb+srv://&lt;db_username&gt;:&lt;db_password&gt;@foo-q8x1v.mycluster.com/test?readPreference=secondary&amp;readPreferenceTags=nodeType:ANALYTICS&amp;readConcernLevel=local</p><p>ï‚·  <strong>Isolating Regular Application Reads</strong>:</p><p>plaintext</p><p>ï‚·  mongodb+srv://&lt;db_username&gt;:&lt;db_password&gt;@foo-q8x1v.mycluster.com/test?readPreference=secondary&amp;readPreferenceTags=workloadType:OPERATIONAL&amp;readConcernLevel=local</p><p>ï‚·  <strong>Targeting Local Reads for Geographically-Distributed Applications</strong>:</p><p>plaintext</p><p>ï‚·  mongodb+srv://&lt;db_username&gt;:&lt;db_password&gt;@foo-q8x1v.mycluster.com/test?readPreference=nearest&amp;readPreferenceTags=provider:AWS,region:US_EAST_1&amp;readPreferenceTags=provider:AWS,region:US_EAST_2&amp;readConcernLevel=local</p><p>ï‚·  <strong>Targeting Warm Nodes</strong>:</p><p>plaintext</p><ol><li>mongodb+srv://&lt;db_username&gt;:&lt;db_password&gt;@foo-q8x1v.mycluster.com/test?readPreference=secondary&amp;readPreferenceTags=diskState:READY&amp;readConcernLevel=local</li></ol><p><strong>Custom Write Concerns</strong></p><p>Atlas provides built-in custom write concerns for multi-region clusters to improve data consistency. Here are the available custom write concerns:</p><table><thead><tr><th><p><strong>Write Concern</strong></p></th><th><p><strong>Tags</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>twoRegions</p></td><td><p>{ region: 2 }</p></td><td><p>Write operations must be acknowledged by at least two regions.</p></td></tr><tr><td><p>threeRegions</p></td><td><p>{ region: 3 }</p></td><td><p>Write operations must be acknowledged by at least three regions.</p></td></tr><tr><td><p>twoProviders</p></td><td><p>{ provider: 2 }</p></td><td><p>Write operations must be acknowledged by at least two regions with distinct cloud providers.</p></td></tr></tbody></table><p><strong>Example of Using Custom Write Concern</strong></p><p>To ensure that a write operation is acknowledged by all three regions in a multi-region cluster, you can use the following operation:</p><p>javascript</p><p>db.employees.insertOne(</p><p>  { name: "Bob Smith", company: "MongoDB" },</p><p>  { writeConcern: { w: "threeRegions" } }</p><p>);</p><p>This operation requires that the write is propagated to all three regions before it is accepted by Atlas.</p><p><strong>Manage Serverless Instances</strong></p><p>This page provides resources and commands for configuring and managing Serverless instances in MongoDB Atlas. Hereâ€™s a detailed overview of the key points and commands you can use.</p><p><strong>Access Requirements</strong></p><p>To view or update your Serverless instances, you must have at least Project Read Only access to the project.</p><p><strong>Listing Serverless Instances</strong></p><p>To list all Serverless instances in a specified project using the Atlas CLI, you can run the following command:</p><p>bash</p><p>atlas serverless list [options]</p><p><strong>Describing a Serverless Instance</strong></p><p>To return the details for a specific Serverless instance, use the following command:</p><p>bash</p><p>atlas serverless describe &lt;instanceName&gt; [options]</p><p><strong>Updating a Serverless Instance</strong></p><p>To update a specific Serverless instance in your project, run:</p><p>bash</p><p>atlas serverless update &lt;instanceName&gt; [options]</p><p><strong>Additional Resources</strong></p><p>For more information on the syntax and parameters for the commands mentioned, refer to the Atlas CLI documentation:</p><ul><li>atlas serverless list</li><li>atlas serverless describe</li><li>atlas serverless update</li></ul><p><strong>Summary of Management Options</strong></p><p>You can manage Serverless instances in the following ways:</p><ul><li><strong>List</strong>: View all Serverless instances in your project.</li><li><strong>Describe</strong>: Get detailed information about a specific Serverless instance.</li><li><strong>Update</strong>: Modify the configuration of a specific Serverless instance.</li></ul><p><strong>Configure Serverless Instance Backup</strong></p><p>This page provides detailed instructions on how to configure backup options for Serverless instances in MongoDB Atlas. Hereâ€™s a breakdown of the key points and steps involved.</p><p><strong>Backup Options for Serverless Instances</strong></p><p>Atlas offers two primary backup options for Serverless instances:</p><table><tr><td><p><strong>Option</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>Serverless Continuous Backup</p></td><td><p>Atlas takes incremental <a href="https://html.onlineviewer.net/docs/atlas/backup/cloud-backup/serverless-backup/#std-label-serverless-snapshots">snapshots</a> of the data in your Serverless instance every six hours and lets you restore the data from a selected point in time within the last 72 hours. Atlas also takes daily snapshots and retains these daily snapshots for 35 days. To learn more, see <a href="https://html.onlineviewer.net/docs/atlas/billing/serverless-instance-costs/#std-label-serverless-instance-costs">Serverless Instance Costs</a>. </p></td></tr><tr><td><p>Basic Backup</p></td><td><p>Atlas takes incremental <a href="https://html.onlineviewer.net/docs/atlas/backup/cloud-backup/serverless-backup/#std-label-serverless-snapshots">snapshots</a> of the data in your Serverless instance every six hours and retains only the two most recent snapshots. You can use this option for free. </p></td></tr></table><p><strong>Steps to Modify Backup Settings</strong></p><p>To change the backup option for your Serverless instance, follow these steps:</p><ol><li><strong>Select Organization</strong>: If it's not already displayed, select the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li><strong>Select Project</strong>: If it's not already displayed, select your desired project from the Projects menu in the navigation bar.</li><li><strong>Access Clusters</strong>: If it's not already displayed, click <strong>Clusters</strong> in the sidebar. The Clusters page will display.</li><li><strong>Edit Configuration</strong>: Click <strong>Edit Config</strong> and select the Serverless instance you wish to modify from the drop-down menu.</li><li><strong>Choose Backup Option</strong>: Select either <strong>Serverless Continuous Backup</strong> or <strong>Basic Backup</strong>.</li></ol><p><strong>Note</strong>: If you change from Serverless Continuous Backup to Basic Backup, a dialog box will appear to confirm that you want to disable Serverless Continuous Backup. Click <strong>Disable</strong>.</p><ol><li><strong>Review Changes</strong>: Click <strong>Review Changes</strong>.</li><li><strong>Apply Changes</strong>: Click <strong>Apply Changes</strong> to finalize your modifications.</li></ol><p><strong>Auto-Create Indexes for Serverless Instances</strong></p><p>This page explains how MongoDB Atlas can automatically create indexes for your Serverless instance to enhance query performance. Hereâ€™s a detailed overview of the key points and processes involved.</p><p><strong>How Auto-Index Creation Works</strong></p><p>Atlas can automatically create indexes based on the performance impact they would have on your queries. The impact score is an estimate of the performance improvement that an index would provide. Atlas can auto-create up to four indexes per collection in your Serverless instance.</p><ul><li><strong>Frequency of Checks</strong>: Atlas checks for slow queries once per hour. If there are at least 50 slow queries logged in the last hour, it will create one new index at a time if: <ul><li>High-impact index suggestions are available.</li><li>Building the new index will not negatively affect the performance of the Serverless instance.</li></ul></li></ul><p><strong>Enable or Disable Auto-Index Creation</strong></p><p>Auto-indexing is enabled by default for Serverless instances. You can enable or disable this feature through the Atlas UI or the Atlas Administration API.</p><p><strong>Enabling Auto-Index Creation via Atlas UI</strong></p><ol><li>Select the organization that contains your desired project from the Organizations menu.</li><li>Select your desired project from the Projects menu.</li><li>Click <strong>Clusters</strong> in the sidebar.</li><li>Click the name of the Serverless instance.</li><li>Click the <strong>Performance Advisor</strong> tab.</li></ol><p><strong>Enabling Auto-Index Creation via API</strong></p><p>To enable auto-index creation, send a POST request to the Set Serverless Auto Indexing endpoint:</p><p>bash</p><p>curl --user "{PUBLIC-KEY}:{PRIVATE-KEY}" --digest \</p><p>     --header "Content-Type: application/json" \</p><p>     --include \</p><p>     --request POST "https://cloud.mongodb.com/api/atlas/v2/groups/{groupId}/serverless/{clusterName}/performanceAdvisor/autoIndexing?enable=true"</p><p><strong>Disabling Auto-Index Creation via Atlas UI</strong></p><ol><li>Follow the same steps as above to access the Performance Advisor tab.</li><li>To disable auto-index creation, send a POST request to the same endpoint, setting the enable query parameter to false:</li></ol><p>bash</p><p>curl --user "{PUBLIC-KEY}:{PRIVATE-KEY}" --digest \</p><p>     --header "Content-Type: application/json" \</p><p>     --include \</p><p>     --request POST "https://cloud.mongodb.com/api/atlas/v2/groups/{groupId}/serverless/{clusterName}/performanceAdvisor/autoIndexing?enable=false"</p><p><strong>Review Automatically Created Indexes</strong></p><p>Atlas sends an email alert when it creates an index automatically. You can view automatically created indexes in the Atlas UI under the Indexes view, where they will be marked with the Auto-Created property.</p><p><strong>Drop Automatically Created Indexes</strong></p><p>You can drop auto-created indexes just like any other index. If you drop an auto-created index, it will not be recreated automatically, even if the Performance Advisor continues to recommend it.</p><p><strong>Convert a Serverless Instance to a Dedicated Cluster</strong></p><p>You can manually migrate your data from a Serverless instance to a dedicated cluster using one of the following methods:</p><ul><li><strong>Restore from Cloud Backup</strong>: You can restore data from a scheduled or on-demand Cloud Backup. For detailed instructions, refer to the Restore from a Scheduled or On-Demand Snapshot documentation.</li><li><strong>Data Migration with Tools</strong>: Use the mongodump and mongorestore command-line tools to migrate your data. For more information on these tools, see the respective documentation for mongodump and mongorestore.</li></ul><p><strong>Important Notes</strong></p><p>In early 2025, a UI-based tool will be released to assist in migrating workloads from Serverless instances to Dedicated clusters. This tool will ensure a smooth migration process without requiring changes to connection strings, although some downtime will be expected during the migration.</p><p><strong>Prerequisites for Manual Migration</strong></p><p>To manually migrate your data, ensure you have the following:</p><ul><li>A dedicated cluster running the same major version of MongoDB as the Serverless instance.</li><li>The command-line tools: mongodump and mongorestore.</li></ul><p><strong>Steps to Migrate Data</strong></p><ol><li><strong>Select Your Organization and Project</strong>:<ul><li>From the Organizations menu, select the organization containing your project.</li><li>From the Projects menu, select your desired project.</li><li>Click on <strong>Clusters</strong> in the sidebar to view your clusters.</li></ul></li><li><strong>Connect to Your Serverless Instance</strong>:</li></ol><ul><li>Click the ellipsis (three dots) for the Serverless instance and select <strong>Command Line Tools</strong>.</li><li>In the Binary Import and Export Tools section, copy the mongodump command.</li></ul><p>Example mongodump command:</p><p>bash</p><p>ï‚·  mongodump --uri mongodb+srv://{username}:&lt;PASSWORD&gt;@test.jca5k.mongodb.net/&lt;DATABASE&gt;</p><ol><li>  <strong>Run the mongodump Command</strong>:</li></ol><ul><li>Open a terminal and paste the mongodump command.</li><li>Replace &lt;PASSWORD&gt; with the userâ€™s password and &lt;DATABASE&gt; with the name of the database you want to migrate.</li><li>Execute the command. The contents will be copied into the dump/ sub-directory of the current directory.</li></ul><ol><li>  <strong>Repeat for Each Database</strong>: If you have multiple databases to migrate, repeat the above steps for each one.</li><li><strong>Connect to Your Dedicated Cluster</strong>:</li></ol><ul><li>Select your dedicated cluster and click the ellipsis to access <strong>Command Line Tools</strong>.</li><li>Copy the mongorestore command from the Binary Import and Export Tools section.</li></ul><p>Example mongorestore command:</p><p>bash</p><p>mongorestore --uri mongodb+srv://{username}:&lt;PASSWORD&gt;@test.jca5k.mongodb.net</p><ol><li><strong>Run the mongorestore Command</strong>:<ul><li>In the terminal, paste the mongorestore command.</li><li>Replace &lt;PASSWORD&gt; with the userâ€™s password and execute the command. By default, it will restore the contents from the dump/ sub-directory.</li></ul></li><li><strong>Optional</strong>: If migrating each database individually, repeat the mongorestore steps for each database.</li></ol><p><strong>Confirming Data Migration</strong></p><p>To verify that the data has been successfully migrated to your dedicated cluster:</p><ol><li>Click the <strong>Browse Collections</strong> button for your dedicated cluster.</li><li>The Data Explorer will display. Visually check that the data has been migrated.</li><li>Alternatively, click <strong>Connect</strong> to connect to your cluster and run queries against the data.</li></ol><p><strong>Terminate a Serverless Instance</strong></p><p>This page provides detailed instructions on how to terminate a Serverless instance in MongoDB Atlas. Terminating an instance is a straightforward process, but it is essential to understand the implications and steps involved.</p><p><strong>Important Considerations</strong></p><p>Before terminating a Serverless instance, keep the following points in mind:</p><ul><li><strong>Data Loss</strong>: Terminating a Serverless instance will result in the permanent loss of all data stored in that instance. Ensure that you have backed up any necessary data before proceeding.</li><li><strong>Backup Options</strong>: If you have enabled backups, you can restore your data from a backup after termination. However, if backups are not enabled, the data will be irretrievably lost.</li><li><strong>Billing</strong>: You will no longer incur charges for the terminated instance, but you may still be billed for any backups retained.</li></ul><p><strong>Access Requirements</strong></p><p>To terminate a Serverless instance, you must have the Project Owner or Organization Owner role for the project.</p><p><strong>Steps to Terminate a Serverless Instance</strong></p><ol><li><strong>Select Organization</strong>: If it's not already displayed, select the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li><strong>Select Project</strong>: If it's not already displayed, select your desired project from the Projects menu.</li><li><strong>Access Clusters</strong>: If it's not already displayed, click on <strong>Clusters</strong> in the sidebar. The Clusters page will display all your clusters.</li><li><strong>Locate the Serverless Instance</strong>: Find the Serverless instance you wish to terminate in the list of clusters.</li><li><strong>Open Instance Settings</strong>: Click the settings icon (gear icon) next to the Serverless instance.</li><li><strong>Disable Termination Protection</strong>: If termination protection is enabled, you will need to disable it before proceeding. This option is typically found in the settings menu.</li><li><strong>Terminate the Instance</strong>: Click on the <strong>Terminate</strong> button. A confirmation dialog will appear, warning you about the data loss.</li><li><strong>Confirm Termination</strong>: Read the warning carefully. If you are sure you want to proceed, confirm the termination by clicking the appropriate button (e.g., <strong>Confirm</strong> or <strong>Terminate</strong>).</li></ol><p><strong>Post-Termination</strong></p><p>After terminating the Serverless instance:</p><ul><li><strong>Data Recovery</strong>: If you need to recover data, you can restore it from a backup if backups were enabled prior to termination.</li><li><strong>Billing</strong>: Monitor your billing statements to ensure that charges for the terminated instance cease.</li></ul><p><strong>Manage Global Clusters</strong></p><p><strong>Important Notes</strong></p><ul><li><strong>Feature Unavailability in Serverless Instances</strong>: Global Clusters are not available for Serverless instances.</li></ul><p><strong>Global Cluster Zones</strong></p><p>Atlas Global Clusters require the definition of single or multi-region zones, where each zone supports write and read operations from geographically local shards. You can also configure zones for global low-latency secondary reads. Each Global Cluster can support up to nine distinct zones, with each zone consisting of:</p><ul><li><strong>Highest Priority Region</strong>:<ul><li>This is where Atlas deploys the primary replica set member for the associated shard(s).</li><li>Clients can only issue write operations to this primary.</li><li>Atlas uses the geographic location of the Highest Priority regions to direct write operations to the correct zone.</li></ul></li><li><strong>Electable Region</strong>:<ul><li>This region hosts electable secondary replica set members for the associated shard(s).</li><li>It adds fault tolerance in case of a partial or total regional outage in the Highest Priority region.</li></ul></li><li><strong>Read-only Region</strong>:<ul><li>This region contains non-electable secondary replica set members that support secondary read operations.</li></ul></li><li><strong>Analytics Region</strong>:<ul><li>This region hosts analytics nodes, which are read-only nodes configured with distinct replica set tags.</li><li>These tags help direct queries to specific regions, isolating reporting queries from normal operational workloads and reducing latency for local reads.</li></ul></li></ul><p><strong>Zone Configuration Table</strong></p><p>Hereâ€™s a summary of the different region types and their descriptions:</p><table><tr><td><p><strong>Region Type</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>Highest Priority</p></td><td><p>Region where Atlas deploys the primary replica set member for the shard or shards associated with that zone. Clients can issue only write operations to the primary.</p></td></tr><tr><td><p>Electable</p></td><td><p>Region where Atlas deploys the electable secondary replica set members for the shard or shards associated with that zone, adding fault tolerance.</p></td></tr><tr><td><p>Read-only</p></td><td><p>Region where Atlas deploys non-electable secondary replica set members for supporting secondary read operations.</p></td></tr><tr><td><p>Analytics</p></td><td><p>Region where Atlas deploys analytics nodes, which are read-only nodes configured with distinct replica set tags to direct queries.</p></td></tr></table><p><strong>Shard Distribution</strong></p><p>For each shard associated with a zone, Atlas distributes the shard nodes across the configured regions. If your cluster is located in a large geographic continent, it is advisable to create multiple zones to direct global writes to shards that are closer to your users.</p><p><strong>Shard Limitations</strong></p><p>Atlas supports up to 70 shards per sharded cluster, regardless of the number of zones. If you require more shards in your Global Cluster, you should contact support.</p><p><strong>Configuring Global Clusters</strong></p><p>To configure your existing Global Cluster:</p><ol><li>Select the organization that contains your desired project from the Organizations menu.</li><li>Select your desired project from the Projects menu.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li><li>Click <strong>Edit Config</strong> and select the cluster you want to modify from the drop-down menu.</li><li>Complete the steps to configure your zones.</li></ol><p><strong>Connection String Considerations</strong></p><p>If you are using the standard connection string format rather than the DNS seedlist format, removing an entire zone from an existing global cluster may result in a new connection string.</p><p>To verify the correct connection string after deploying changes, follow the steps to access your cluster settings as mentioned above.</p><p><strong>Shard a Global Collection</strong></p><p>Hereâ€™s a comprehensive overview of the key points, procedures, and considerations.</p><p><strong>Important Notes</strong></p><ul><li><strong>Feature Unavailability in Serverless Instances</strong>: Global writes are not supported on Serverless instances.</li><li><strong>Cluster Requirements</strong>: Global writes are only supported on global clusters that require an M30+ cluster tier.</li><li><strong>Atlas-Managed Sharding</strong>: You can only use the Atlas UI to shard a global collection for global clusters with Atlas-Managed Sharding enabled.</li></ul><p><strong>Required Access</strong></p><p>To shard a collection for global writes in the Atlas UI, you must have either the Project Owner or Organization Owner role for the cluster's Atlas project.</p><p><strong>Considerations</strong></p><ul><li><strong>Sharding Semantics</strong>: Familiarize yourself with sharding semantics by reviewing the Sharding documentation.</li><li><strong>Compatibility Requirements</strong>: Ensure that your unsharded collections meet compatibility requirements prior to sharding to use Global Writes.</li><li><strong>Online Archive</strong>: Consider using Online Archive to move infrequently accessed data instead of sharding your collection.</li></ul><p><strong>Procedure to Shard a Global Collection</strong></p><ol><li><strong>Select Organization</strong>: Choose the organization that contains your desired project from the Organizations menu.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Clusters</strong>: Click on <strong>Clusters</strong> in the sidebar to view your clusters.</li><li><strong>Browse Collections</strong>: Click the <strong>Browse Collections</strong> button for your cluster to access the Data Explorer.</li></ol><p><strong>Shard Key Options</strong></p><p>You can choose one of the following options for the shard key:</p><table><tr><td><p><strong>Option</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>Default</p></td><td><p>Atlas uses the document that specifies the field or fields as the <a href="https://www.mongodb.com/docs/manual/core/sharding-shard-key/">shard key</a>.</p></td></tr><tr><td><p>Use unique index as the shard key</p></td><td><p>Atlas uses the underlying index to enforce a unique constraint on the shard key of the Global Collection.</p></td></tr><tr><td><p>Use hashed index as the shard key</p></td><td><p>Atlas distributes the sharded data evenly by hashing the second field of the shard key. This option is only available for Atlas clusters running MongoDB v5.0 or later.</p></td></tr></table><p><strong>Global Cluster Sharding Reference</strong></p><ul><li><strong>Shard Key Values</strong>: Ensure that every document in the collection includes a location field with valid ISO country or subdivision codes.</li><li><strong>Compound Shard Key</strong>: A compound shard key is required for efficient data distribution. The first field must be location, and only one secondary shard key field is allowed.</li></ul><p><strong>Changing the Shard Key</strong></p><p>The ability to modify shard keys depends on the MongoDB version:</p><table><tr><td><p><strong>MongoDB Version</strong></p></td><td><p><strong>Modify Shard Key Keys</strong></p></td><td><p><strong>Modify Shard Key Values</strong></p></td></tr><tr><td><p>MongoDB 5.0</p></td><td><p>Yes, add fields to a key using the <a href="https://html.onlineviewer.net/docs/atlas/atlas-ui/#std-label-atlas-ui">Atlas UI</a> only.</p></td><td><p>Yes</p></td></tr><tr><td><p>MongoDB 6.0</p></td><td><p>Yes, add fields to a key using the <a href="https://html.onlineviewer.net/docs/atlas/atlas-ui/#std-label-atlas-ui">Atlas UI</a> only.</p></td><td><p>Yes</p></td></tr><tr><td><p>MongoDB 7.0</p></td><td><p>Yes, add fields to a key using the <a href="https://html.onlineviewer.net/docs/atlas/atlas-ui/#std-label-atlas-ui">Atlas UI</a> only.</p></td><td><p>Yes</p></td></tr></table><p><strong>Important Warnings</strong></p><ul><li><strong>Atlas Search Index</strong>: If you shard a collection with an existing Atlas Search index, there may be a brief period of query downtime.</li><li><strong>Initial Sync Process</strong>: Adding a shard to an already sharded collection with an Atlas Search index may cause search queries to fail until the initial sync completes.</li></ul><p><strong>Move a Cluster to a Different Region</strong></p><p>This page provides detailed instructions on how to move a MongoDB Atlas cluster to a different region or cloud provider. Hereâ€™s a comprehensive overview of the key points and procedures involved.</p><p><strong>Important Considerations</strong></p><ul><li><strong>Feature Unavailability in Serverless Instances</strong>: Moving a cluster is not supported for Serverless instances.</li><li><strong>Cluster Tier Requirements</strong>:<ul><li>You can change the region and cloud provider when you increase the cluster tier of an M0, M2, or M5 cluster.</li><li>For M10+ multi-region clusters, you can move the cluster anytime.</li></ul></li><li><strong>Replica Set Elections</strong>: Each node in the preferred and electable regions can participate in replica set elections and can become the primary if the majority of replica set nodes are available.</li><li><strong>Electable Node Count</strong>: The total number of electable nodes in the cluster must be 3, 5, or 7.</li><li><strong>Migration Performance</strong>: Depending on the amount of data, migrations can take significant time. Atlas migrates one member at a time, starting with secondary members, which may affect performance if the primary is already at capacity.</li><li><strong>VPC Peering Connections</strong>: If you move a cluster out of a region with a VPC peering connection, the moved cluster will lose access to that connection. You can create new VPC connections for the new region.</li><li><strong>IP Access List</strong>: Cluster nodes removed from a region cannot inherit access rules from an AWS security group or allowed VPC CIDR blocks configured for the VPC peering connection. You must configure IP access list entries for all virtual servers in the VPC.</li><li><strong>Billing for Storage</strong>: If you change the highest priority region or migrate oplog data, you will be billed for storage in both the old and new regions for the days following the change. Disabling and re-enabling continuous cloud backup can prevent double billing.</li></ul><p><strong>Steps to Move a Cluster</strong></p><ol><li><strong>Select Organization</strong>: Choose the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Clusters</strong>: Click on <strong>Clusters</strong> in the sidebar to view your clusters.</li><li><strong>Edit Configuration</strong>: Click <strong>Edit Config</strong> and select the cluster you want to move from the drop-down menu. Alternatively, if you are already viewing the specific cluster, click <strong>Configuration</strong>.</li><li><strong>Change Region</strong>:<ul><li>For M0 clusters, you must select a higher cluster tier. The available regions will be a subset of the total supported regions for the cloud service provider.</li><li>For M10 or larger multi-region clusters, click the currently selected region and choose a new region from the drop-down list.</li></ul></li><li><strong>Adjust Node Count</strong>: To change the number of nodes in a given region, increase or decrease the Number of Nodes value. The total number of nodes across the preferred and electable regions must be an odd number.</li></ol><p><strong>Summary</strong></p><p>Moving a cluster in MongoDB Atlas involves careful consideration of the cluster tier, node configuration, and potential impacts on performance and billing. By following the outlined steps, you can effectively relocate your cluster to a different region or cloud provider while maintaining operational integrity.</p><p><strong>Domain 3: Security in Atlas (21%)</strong></p><p>Objective 3.1: User management for Database users.</p><p>Objective 3.2: User management for Atlas users.</p><p><strong>Atlas UI Authentication</strong></p><p>Atlas offers several options for authentication in the Atlas UI, allowing you to manage access securely and efficiently.</p><p><strong>Identity Provider (IdP) Integration</strong></p><p>You can link your Identity Provider (IdP) to Atlas by providing the necessary metadata. Once linked, you can map domains, organizations, and roles to your IdP. For more details, refer to the Configure Federated Authentication documentation.</p><p><strong>Multi-Factor Authentication (MFA)</strong></p><p>Atlas supports Multi-Factor Authentication (MFA) to enhance security. To set up MFA, follow the instructions in the Manage Your Multi-Factor Authentication Options guide.</p><p><strong>Atlas CLI Authentication Commands</strong></p><p>You can authenticate with Atlas using the Atlas CLI. Here are the relevant commands:</p><ol><li><strong>Login to Atlas</strong>: To authenticate with Atlas, run the following command:</li></ol><p>bash</p><p>ï‚·  atlas auth login [options]</p><p>For more information about the command syntax and parameters, see the Atlas CLI documentation for atlas auth login.</p><p>ï‚·  <strong>Logout from Atlas</strong>: To log out of your Atlas account using the Atlas CLI, use:</p><p>bash</p><p>ï‚·  atlas auth logout [options]</p><p>For details on the command syntax and parameters, refer to the Atlas CLI documentation for atlas auth logout.</p><p>ï‚·  <strong>Check Authentication State</strong>: To verify and display information about your authentication state, run:</p><p>bash</p><p>atlas auth whoami [options]</p><p>For more information about the command syntax and parameters, see the Atlas CLI documentation for atlas auth whoami.</p><p><strong>Configure Federated Authentication</strong></p><p>This page provides detailed information on how to configure federated authentication in MongoDB Atlas, allowing users to authenticate using their organization's Identity Provider (IdP). Hereâ€™s a comprehensive overview of the key points and procedures involved.</p><p><strong>Overview of Federated Authentication</strong></p><ul><li><strong>Federated Identity Management (FIM)</strong>: This model allows your organization to manage user credentials through an IdP, enabling users to authenticate across various MongoDB services without needing separate credentials for Atlas.</li><li><strong>Single Sign-On (SSO)</strong>: Federated authentication goes beyond traditional SSO, as the IdP manages user credentials instead of MongoDB.</li></ul><p><strong>Required Access</strong></p><p>To manage federated authentication, you must have Organization Owner access to one or more organizations that delegate federation settings to the instance.</p><p><strong>Federation Management Console</strong></p><p>You can manage federated authentication through the Federation Management Console. To access it:</p><ol><li>Select your desired organization from the Organizations menu in the navigation bar.</li><li>Click the Organization Settings icon next to the Organizations menu.</li><li>In the Setup Federated Login or Manage Federation Settings section, click <strong>Visit Federation Management App</strong>.</li></ol><p><strong>Quick Start Guide</strong></p><p>If you are configuring single sign-on for the first time, follow the Quick Start Guide, which includes:</p><ol><li>Adding and verifying your domains.</li><li>Configuring your IdP with Atlas.</li><li>Connecting your domains to your IdP.</li><li>Activating your IdP for user access to MongoDB.</li></ol><p><strong>Domain, Organization, and Role Mapping</strong></p><ul><li><strong>Domain Mapping</strong>: Atlas routes users with email addresses that match mapped domains to the associated IdP.</li><li><strong>Organization Mapping</strong>: Users logging in through the IdP gain access to mapped Atlas organizations.</li><li><strong>Role Mapping</strong>: You can assign roles to users as part of organization mapping, which correspond to groups in your IdP.</li></ul><p><strong>Managing Federated Authentication</strong></p><p>To configure federated authentication:</p><ol><li><strong>Link an Identity Provider</strong>: Click <strong>Manage Identity Providers</strong> and link your IdP to ensure user authentication through the trusted IdP.</li><li><strong>Map Domains</strong>: Click <strong>Manage Domains</strong> to map domains to your IdP, simplifying the login experience for users from specified domains.</li><li><strong>Manage Organizations</strong>: You can map Atlas organizations and roles to your IdP for streamlined user authorization.</li></ol><p><strong>Tutorials for Implementation</strong></p><p>End-to-end tutorials are available for implementing federated authentication with various IdPs:</p><ul><li>Microsoft Entra ID</li><li>Google Workspace</li><li>Okta</li><li>PingOne</li></ul><p><strong>Considerations for Restricted Access</strong></p><p>If you enable an IP access list for the Atlas UI and restrict access for any user to at least one federated organization, those users will not be able to access the Federation Management console.</p><p><strong>Two-Factor Authentication (2FA)</strong></p><p>Atlas bypasses 2FA for users authenticating through your IdP. If a user has 2FA enabled for their Atlas account, they will not be prompted for it when using federated authentication. Instead, you can configure your IdP to prompt users for 2FA.</p><p><strong>Manage Your Multi-Factor Authentication Options</strong></p><p><strong>Important Information</strong></p><ul><li><strong>Transition from Legacy 2FA</strong>: As of May 30, 2024, Legacy 2FA has been retired. All users previously using Legacy 2FA must set up Multi-Factor Authentication (MFA).</li><li><strong>Authentication Process</strong>: MFA enhances security by requiring two forms of identification:<ul><li><strong>Something you know</strong>: Your password.</li><li><strong>Something you have</strong>: A device or app that generates a one-time token.</li></ul></li></ul><p><strong>Recommended Authentication Factors</strong></p><p>When enabling MFA, you can choose from the following recommended factors:</p><ul><li><strong>Security Key / Biometrics</strong></li><li><strong>Okta Verify Mobile App</strong><ul><li>Options include: <ul><li>One-Time Password (OTP)</li><li>Push Notifications</li></ul></li></ul></li><li><strong>Authenticator App (TOTP)</strong>: You can use any TOTP app for authentication. It is recommended to enable cloud backups to avoid being locked out. Some popular options include:<ul><li>Twilio Authy</li><li>Google Authenticator</li><li>Microsoft Authenticator</li></ul></li><li><strong>SMS</strong>: Use with caution due to potential security risks.</li><li><strong>Email</strong>: Use with caution for the same reasons as SMS.</li></ul><p><strong>Warning</strong></p><ul><li><strong>Minimum Methods</strong>: It is strongly recommended to set up at least two authentication methods. This ensures you can still access your account if you lose access to one method.</li><li><strong>MFA Requirement</strong>: An Organization Owner must enable MFA for their organization. All members must enable MFA for their accounts; those who haven't cannot access the organization.</li></ul><p><strong>Setting Up MFA</strong></p><ol><li><strong>Install and Configure</strong>:<ul><li>Download the Okta Verify app for iOS or Android.</li><li>Install a FIDO2 compatible device (like a YubiKey) or use an operating system feature (like Windows Hello).</li></ul></li><li><strong>Verify Email</strong>: Ensure the email used for your MongoDB account can receive messages from the mongodb.com domain.</li><li><strong>Verify Mobile Phone for SMS</strong>: Ensure your mobile phone account allows SMS messages.</li><li><strong>Access Security Settings</strong>:<ul><li>Click on your name in the upper right corner of the Atlas console.</li><li>Select <strong>Manage your MongoDB Account</strong>.</li><li>Click <strong>Security</strong> in the left-side navigation.</li></ul></li><li><strong>Choose Authentication Method</strong>:<ul><li>Select your preferred authentication method and click <strong>Set up</strong>.</li><li>Follow the procedure for your chosen method.</li></ul></li></ol><p><strong>Completing MFA Setup</strong></p><ul><li><strong>Using Okta Verify</strong>:<ol><li>Open the Okta Verify app.</li><li>Tap the + icon to add an account.</li><li>Scan the barcode displayed in Atlas.</li><li>Click Done.</li></ol></li><li><strong>Using FIDO2 Device</strong>:<ol><li>Click <strong>Enroll</strong> on the Security Key/Biometric Authenticator page.</li><li>Verify your identity with the configured MFA device.</li></ol></li><li><strong>Using Authenticator App</strong>:<ol><li>Open the Authenticator App.</li><li>Tap the + icon to add an account.</li><li>Scan the barcode displayed in Atlas.</li><li>Enter the six-digit verification code into Atlas.</li></ol></li><li><strong>Using SMS</strong>:<ol><li>Enter your mobile phone number in the Phone Number text box.</li><li>Click <strong>Send Code</strong> to receive a six-digit verification code.</li><li>Enter this code into Atlas.</li></ol></li></ul><p><strong>Removing an Authentication Method</strong></p><p>To remove a method from your account:</p><ol><li>Choose the method to remove.</li><li>Click <strong>Delete</strong> next to that method.</li><li>Authenticate again using MFA to confirm the removal.</li></ol><p><strong>Atlas UI Authorization</strong></p><p>You can manage access to your Atlas clusters using Atlas User Roles, which define the actions that users can perform within organizations and projects. It is essential to plan the hierarchy of your organizations and projects carefully, as permissions can only be applied at these levels.</p><p><strong>Key Features</strong></p><ul><li><strong>Organization and Project Structure</strong>:<ul><li>An organization can contain multiple projects (previously referred to as groups).</li><li>Billing occurs at the organization level while allowing visibility into usage for each project.</li><li>You can view all projects within an organization and use teams to bulk assign organization users to projects.</li></ul></li><li><strong>Benefits of Multiple Projects</strong>:<ul><li>Isolate different environments (e.g., development, QA, production) from each other.</li><li>Associate different users or teams with specific environments and assign varying permissions.</li><li>Maintain separate cluster security configurations, such as: <ul><li>Creating and managing different sets of database user credentials for each project.</li><li>Isolating networks in different VPCs.</li></ul></li><li>Configure different alert settings for various environments.</li></ul></li></ul><p><strong>Managing Access</strong></p><ul><li><strong>Invitations Tab</strong>: This feature allows you to view and accept pending invitations to Atlas organizations and projects.</li></ul><p><strong>Important Updates</strong></p><ul><li><strong>Project Invitation Deprecation</strong>: As of September 13, 2023, project invitations have been deprecated. When inviting an organization member to projects, the user is automatically granted access without receiving separate invitations. If inviting a user to projects in an organization they do not belong to, they will receive a single invitation to the organization, which includes access to all granted projects. Invitations expire after 30 days.</li></ul><p><strong>Programmatic Access</strong></p><p>To grant programmatic access to an organization or project using the API, you can create an API key for the Atlas Administration API. This allows for automated management of access and permissions.</p><p><strong>Atlas User Roles</strong></p><p>Atlas user roles define the actions that users can perform within organizations and projects. Understanding these roles is crucial for managing access and permissions effectively.</p><p><strong>Organization Roles</strong></p><p>The following table outlines the organization roles available in Atlas:</p><table><tr><td><p><strong>Organization Role (UI)</strong></p></td><td><p><strong>Organization Role (API)</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>Organization Owner</p></td><td><p>ORG_OWNER</p></td><td><p>Grants root access to the organization, including project owner access to all projects, privileges to administer organization settings, manage users, and delete the organization.</p></td></tr><tr><td><p>Organization Project Creator</p></td><td><p>ORG_GROUP_CREATOR</p></td><td><p>Grants privileges to create projects in the organization and includes privileges granted by the Organization Member role.</p></td></tr><tr><td><p>Organization Billing Admin</p></td><td><p>ORG_BILLING_ADMIN</p></td><td><p>Grants privileges to administer billing information for the organization and includes privileges granted by the Organization Member role.</p></td></tr><tr><td><p>Organization Billing Viewer</p></td><td><p>ORG_BILLING_READ_ONLY</p></td><td><p>Grants privileges to view billing information for the organization and includes privileges granted by the Organization Member role.</p></td></tr><tr><td><p>Organization Read Only</p></td><td><p>ORG_READ_ONLY</p></td><td><p>Provides read-only access to the settings, users, and projects in the organization.</p></td></tr><tr><td><p>Organization Member</p></td><td><p>ORG_MEMBER</p></td><td><p>Provides read-only access to the settings and users in the organization and the projects they belong to.</p></td></tr></table><p><strong>Project Roles</strong></p><p>The following table outlines the project roles available in Atlas:</p><table><tr><td><p><strong>Project Role (UI)</strong></p></td><td><p><strong>Project Role (API)</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>Project Owner</p></td><td><p>GROUP_OWNER</p></td><td><p>Grants privileges to manage clusters, project access, IP access lists, database access, and retrieve logs for all clusters in the project.</p></td></tr><tr><td><p>Project Cluster Manager</p></td><td><p>GROUP_CLUSTER_MANAGER</p></td><td><p>Grants access to edit, pause, and resume Atlas clusters, but does not allow creating clusters or accessing the Data Explorer.</p></td></tr><tr><td><p>Project Stream Processing Owner</p></td><td><p>GROUP_STREAM_PROCESSING_OWNER</p></td><td><p>Grants privileges to manage stream processing instances and perform actions related to clusters.</p></td></tr><tr><td><p>Project Data Access Admin</p></td><td><p>GROUP_DATA_ACCESS_ADMIN</p></td><td><p>Grants access to the Data Explorer and allows viewing, creating, and dropping databases, collections, and indexes.</p></td></tr><tr><td><p>Project Data Access Read/Write</p></td><td><p>GROUP_DATA_ACCESS_READ_WRITE</p></td><td><p>Grants access to view and create databases and collections, and modify documents through the Data Explorer.</p></td></tr><tr><td><p>Project Data Access Read Only</p></td><td><p>GROUP_DATA_ACCESS_READ_ONLY</p></td><td><p>Grants access to view databases, collections, and documents through the Data Explorer.</p></td></tr><tr><td><p>Project Read Only</p></td><td><p>GROUP_READ_ONLY</p></td><td><p>Grants metadata view-only access to the project control plane, including activity and operational data.</p></td></tr><tr><td><p>Project Search Index Editor</p></td><td><p>GROUP_SEARCH_INDEX_EDITOR</p></td><td><p>Grants privileges to create and manage Atlas Search indexes.</p></td></tr></table><p><strong>Manage Organization Access</strong></p><p>This page provides guidance on managing access to your MongoDB Atlas organization. Hereâ€™s a detailed overview of the key points and procedures involved.</p><p><strong>Required Access</strong></p><p>To perform actions related to organization management, you must have the Organization Owner role.</p><p><strong>Require Multi-Factor Authentication (MFA)</strong></p><p>As an Organization Owner, you can require that all users in your organization enable Multi-Factor Authentication (MFA) for their Atlas accounts. To enable MFA:</p><ol><li>Select your desired organization from the Organizations menu in the navigation bar.</li><li>Click the Organization Settings icon next to the Organizations menu.</li><li>Follow the instructions to enable MFA for your organization.</li></ol><p><strong>Require IP Access List for the Atlas Administration API</strong></p><p>You can configure Atlas to require an IP access list at the organization level for the Atlas Administration API. This means all API calls must originate from a valid entry in the associated access list.</p><ol><li>Select your desired organization from the Organizations menu.</li><li>Click the Organization Settings icon next to the Organizations menu.</li><li>Configure the IP access list as needed.</li></ol><p><strong>Require IP Access List for the Atlas UI</strong></p><p>To enhance security, you can also require an IP access list for the Atlas UI. This ensures that all access to the Atlas UI must originate from an entry in the defined list.</p><ol><li>Select your desired organization from the Organizations menu.</li><li>Click the Organization Settings icon next to the Organizations menu.</li><li>Navigate to the IP Access List for the Atlas UI section.</li><li>Click Configure to open the configuration page.</li></ol><p><strong>Configuring the IP Access List</strong></p><p>To add an IP address or CIDR range to the access list:</p><ol><li>Enter an IP address or CIDR range in the table. <ul><li>You can add IPv4 or IPv6 addresses, such as 1.1.1.2 for IPv4 or 3ffe:1900:fe21:4545:0000:0000:0000:0000 for IPv6.</li><li>CIDR block ranges can also be added, such as 2.1.1.1/16.</li></ul></li><li>Add an optional description for clarity.</li><li>Click <strong>Add Entry</strong> to add the IP address or CIDR range, or click <strong>Add my Current IP Address</strong> to automatically add your current IP.</li></ol><p><strong>Enabling the IP Access List</strong></p><p>To activate the IP access list:</p><ol><li>Ensure your current IP address or a CIDR range containing it is in the list.</li><li>Click <strong>Enable</strong>.</li><li>Confirm the action when prompted.</li></ol><p>Once enabled, only the defined IP addresses and ranges can access the Atlas UI for that organization. If a user's IP address is not on the list, they will receive a warning when attempting to access the UI.</p><p><strong>Editing and Disabling the IP Access List</strong></p><p>To edit or disable the IP access list:</p><ol><li>Select your desired organization from the Organizations menu.</li><li>Click the Organization Settings icon next to the Organizations menu.</li><li>Go to the IP Access List for the Atlas UI section.</li><li>Click <strong>Edit</strong> to modify the list or <strong>Disable</strong> to remove the restrictions.</li></ol><p><strong>Manage Organization Users</strong></p><p>This page provides guidance on how to manage users within your MongoDB Atlas organization. Hereâ€™s a detailed overview of the key sections and procedures involved.</p><p><strong>Required Access</strong></p><p>To manage organization users, you must have the Organization Owner role.</p><p><strong>Add Users to an Organization</strong></p><p>To invite users to your organization using the Atlas UI:</p><ol><li><strong>Select Organization</strong>: If it's not already displayed, select your desired organization from the Organizations menu in the navigation bar.</li><li><strong>Access Manager</strong>:<ul><li>Select <strong>Organization Access</strong> from the Access Manager menu in the navigation bar.</li><li>Alternatively, click <strong>Access Manager</strong> in the sidebar.</li></ul></li><li><strong>Invite Users</strong>: Click <strong>Invite Users</strong>.</li><li><strong>Add Users</strong>:<ul><li>Enter the new user's email address or Jira username in the combo box.</li><li>After typing in the email address, either press Enter or click on the email address beneath the New User header.</li></ul></li><li><strong>Assign Roles</strong>: By default, each user is given the Organization Member role. To change or add additional roles, click the role dropdown menu and select the checkboxes for each role you want the user to have.</li><li><strong>Add Users</strong>: Click <strong>Add Users to Organization</strong>.</li></ol><p><strong>View Active Users and Outgoing Invitations</strong></p><p>To view users in your organization:</p><ol><li><strong>Select Organization</strong>: If it's not already displayed, select your desired organization from the Organizations menu.</li><li><strong>Access Manager</strong>:<ul><li>Select <strong>Organization Access</strong> from the Access Manager menu.</li><li>Alternatively, click <strong>Access Manager</strong> in the sidebar.</li></ul></li></ol><p>This page lists:</p><ul><li>Users who are members of your Atlas organization.</li><li>Pending users who have not accepted the invitation to join the organization or its projects.</li></ul><p><strong>Edit User's Role in an Organization</strong></p><p>To edit a user's role:</p><ol><li><strong>Select Organization</strong>: If it's not already displayed, select your desired organization from the Organizations menu.</li><li><strong>Access Manager</strong>:<ul><li>Select <strong>Organization Access</strong> from the Access Manager menu.</li><li>Alternatively, click <strong>Access Manager</strong> in the sidebar.</li></ul></li><li><strong>Edit Role</strong>: Locate the user whose role you want to edit and make the necessary changes.</li></ol><p><strong>Remove Users from an Organization</strong></p><p>To remove a user:</p><ol><li><strong>Select Organization</strong>: If it's not already displayed, select your desired organization from the Organizations menu.</li><li><strong>Access Manager</strong>:<ul><li>Select <strong>Organization Access</strong> from the Access Manager menu.</li><li>Alternatively, click <strong>Access Manager</strong> in the sidebar.</li></ul></li><li><strong>Remove User</strong>: Locate the user you want to remove and click the appropriate option to delete them from the organization.</li></ol><p><strong>Important Notes</strong></p><ul><li><strong>Project Invitation Deprecation</strong>: As of September 13, 2023, project invitations have been deprecated. Users invited to projects within the organization are automatically granted access without receiving separate invitations. If a user is invited to projects in an organization they do not belong to, they will receive a single invitation to the organization, which includes access to all granted projects. Invitations expire after 30 days.</li><li><strong>User Limit</strong>: Atlas limits user membership to a maximum of 500 users per organization.</li></ul><p><strong>CLI Commands</strong></p><p>You can also manage organization users using the Atlas CLI:</p><ul><li><strong>Invite a User</strong>:</li></ul><p>bash</p><p>ï‚·  atlas users invite [options]</p><p>ï‚·  <strong>List All Users</strong>:</p><p>bash</p><p>ï‚·  atlas organizations users list [options]</p><p>ï‚·  <strong>Describe a User</strong>:</p><p>bash</p><p>ï‚·  atlas users describe [options]</p><p>ï‚·  <strong>List Pending Invitations</strong>:</p><p>bash</p><p>ï‚·  atlas organizations invitations list [options]</p><p>ï‚·  <strong>Describe a Pending Invitation</strong>:</p><p>bash</p><p>ï‚·  atlas organizations invitations describe &lt;invitationId&gt; [options]</p><p>ï‚·  <strong>Update a Pending Invitation</strong>:</p><p>bash</p><p>ï‚·  atlas organizations invitations update [invitationId] [options]</p><p>ï‚·  <strong>Delete a Pending Invitation</strong>:</p><p>bash</p><p>atlas organizations invitations delete &lt;invitationId&gt; [options]</p><p><strong>Manage Organization Teams</strong></p><p>This page provides detailed instructions on how to manage teams within your MongoDB Atlas organization. Teams allow you to group users and assign them roles for specific projects, streamlining access management.</p><p><strong>Required Access</strong></p><p>To perform any actions related to team management, you must have the Organization Owner role.</p><p><strong>Create a Team</strong></p><p>You can create teams at the organization level and add users to these teams. Each team can be granted roles for specific projects, allowing all members to share the same project access.</p><p><strong>To create a team using the Atlas CLI:</strong></p><p>bash</p><p>atlas teams create &lt;name&gt; [options]</p><p>For more details, refer to the Atlas CLI documentation for atlas teams create.</p><p><strong>To create a team using the Atlas UI:</strong></p><ol><li>Select your desired organization from the Organizations menu in the navigation bar.</li><li>Choose either: <ul><li><strong>Organization Access</strong> from the Access Manager menu.</li><li><strong>Access Manager</strong> in the sidebar.</li></ul></li></ol><p><strong>Important Notes</strong></p><ul><li>The team name must be unique within the organization.</li><li>Atlas limits the number of users to a maximum of 100 teams per project and a maximum of 250 teams per organization.</li></ul><p><strong>View Teams</strong></p><p><strong>To list all teams in your organization using the Atlas CLI:</strong></p><p>bash</p><p>atlas teams list [options]</p><p>For more details, refer to the Atlas CLI documentation for atlas teams list.</p><p><strong>To view your teams using the Atlas UI:</strong></p><ol><li>Select your desired organization from the Organizations menu.</li><li>Choose either: <ul><li><strong>Organization Access</strong> from the Access Manager menu.</li><li><strong>Access Manager</strong> in the sidebar.</li></ul></li></ol><p><strong>Add Team Members</strong></p><p><strong>To add one user to the team using the Atlas CLI:</strong></p><p>bash</p><p>atlas teams users add &lt;userId&gt;... [options]</p><p>For more details, refer to the Atlas CLI documentation for atlas teams users add.</p><p><strong>To add team members using the Atlas UI:</strong></p><ol><li>Select your desired organization from the Organizations menu.</li><li>Choose either: <ul><li><strong>Organization Access</strong> from the Access Manager menu.</li><li><strong>Access Manager</strong> in the sidebar.</li></ul></li><li>Click <strong>Add Members</strong>.</li><li>Type the name or email of the user from the combo box.</li><li>Click <strong>Add Members</strong>.</li></ol><p><strong>Remove Team Members</strong></p><p><strong>To delete one user from the team using the Atlas CLI:</strong></p><p>bash</p><p>atlas teams users delete &lt;userId&gt; [options]</p><p>For more details, refer to the Atlas CLI documentation for atlas teams users delete.</p><p><strong>To remove team members using the Atlas UI:</strong></p><ol><li>Select your desired organization from the Organizations menu.</li><li>Choose either: <ul><li><strong>Organization Access</strong> from the Access Manager menu.</li><li><strong>Access Manager</strong> in the sidebar.</li></ul></li><li>Click to the right of the user you want to remove from a team.</li></ol><p><strong>Rename a Team</strong></p><p>You cannot rename a team using the Atlas CLI. To rename a team using the Atlas UI:</p><ol><li>Select your desired organization from the Organizations menu.</li><li>Choose either: <ul><li><strong>Organization Access</strong> from the Access Manager menu.</li><li><strong>Access Manager</strong> in the sidebar.</li></ul></li><li>For the team you want to rename, click the ellipsis (...) button under the Actions column.</li><li>Click <strong>Rename Team</strong>.</li><li>Enter a new name for the team (must be unique).</li><li>Click <strong>Rename Team</strong>.</li></ol><p><strong>Delete a Team</strong></p><p><strong>To delete one team from your organization using the Atlas CLI:</strong></p><p>bash</p><p>atlas teams delete &lt;teamId&gt; [options]</p><p>For more details, refer to the Atlas CLI documentation for atlas teams delete.</p><p><strong>To delete a team using the Atlas UI:</strong></p><ol><li>Select your desired organization from the Organizations menu.</li><li>Choose either: <ul><li><strong>Organization Access</strong> from the Access Manager menu.</li><li><strong>Access Manager</strong> in the sidebar.</li></ul></li><li>For the team you want to delete, click the ellipsis (...) button under the Actions column.</li><li>Click <strong>Delete Team</strong> and confirm the deletion.</li></ol><p><strong>Manage Project Access</strong></p><p>In MongoDB Atlas, groups are now referred to as projects within the organization and projects hierarchy. This structure allows for better management and isolation of different environments, such as development, QA, and production.</p><p><strong>Benefits of Multiple Projects</strong></p><p>By creating multiple projects within an organization, you can:</p><ul><li><strong>Isolate Different Environments</strong>: Keep development, QA, and production environments separate.</li><li><strong>User and Team Association</strong>: Assign different users or teams to specific environments and manage their permissions accordingly.</li><li><strong>Separate Security Configurations</strong>: Maintain distinct database user credentials and network configurations for each project.</li><li><strong>Custom Alert Settings</strong>: Configure alerts differently for production and development environments.</li></ul><p><strong>Creating a Project</strong></p><p>To create a project, you must have the role of either an <strong>Organization Owner</strong> or an <strong>Organization Project Creator</strong>. When you create a project, you automatically become a <strong>Project Owner</strong>.</p><p><strong>Using the Atlas CLI</strong>:</p><p>bash</p><p>atlas projects create &lt;projectName&gt; [options]</p><p>For more details, refer to the Atlas CLI documentation.</p><p><strong>Using the Atlas UI</strong>:</p><ol><li>Select your desired organization from the Organizations menu.</li><li>Click the Leaf icon, the Organization Settings icon, or expand the Projects menu to view all projects.</li><li>Click <strong>New Project</strong> or <strong>+ New Project</strong>.</li><li>Enter a name for your new project (up to 64 characters, using letters, numbers, spaces, dashes, and underscores).</li><li>Click <strong>Next</strong>.</li><li>For existing users, enter their username; for new users, enter their email to send an invitation.</li></ol><p><strong>Viewing Projects</strong></p><p>To view all projects using the Atlas CLI:</p><p>bash</p><p>atlas projects list [options]</p><p>To get details for a specific project:</p><p>bash</p><p>atlas projects describe &lt;ID&gt; [options]</p><p>Refer to the Atlas CLI documentation for more information.</p><p><strong>Using the Atlas UI</strong>:</p><ol><li>Select your desired organization from the Organizations menu.</li><li>Click the Leaf icon, the Organization Settings icon, or expand the Projects menu to view all projects.</li></ol><p><strong>Project Invitation Deprecation</strong></p><p>As of September 13, 2023, project invitations have been deprecated. When inviting an organization member to projects, they are automatically granted access without receiving separate invitations. If inviting a user to projects in a different organization, they receive a single invitation to the organization, which includes access to all granted projects. Invitations expire after 30 days.</p><p><strong>Moving a Project</strong></p><p>To move a project to another Atlas organization, you must be an <strong>Organization Owner</strong> for both the current and destination organizations. When moving a project:</p><ol><li>Select your desired organization from the Organizations menu.</li><li>Click the Leaf icon or the Organization Settings icon to view projects.</li><li>For the project you want to move, click the options menu and select <strong>Move Project</strong>.</li></ol><p><strong>Important Notes</strong>:</p><ul><li>Moving a project does not impact cluster uptime or configuration.</li><li>Existing API Keys are removed after moving the project; you must create new ones.</li><li>App Services applications are not migrated; you need to copy configurations manually.</li></ul><p><strong>Deleting a Project</strong></p><p>To delete a project, you must have the <strong>Project Owner</strong> or <strong>Organization Owner</strong> role. Ensure that:</p><ul><li>There are no active clusters or services.</li><li>The project has no outstanding invoices.</li></ul><p><strong>Using the Atlas CLI</strong>:</p><p>bash</p><p>atlas projects delete &lt;ID&gt; [options]</p><p>Refer to the Atlas CLI documentation for more details.</p><p><strong>Using the Atlas UI</strong>:</p><ol><li>Select your desired organization from the Organizations menu.</li><li>View all projects and select the project to delete.</li><li>Confirm the deletion.</li></ol><p><strong>Manage Access to a Project</strong></p><p>This page provides detailed instructions on how to manage access to projects within MongoDB Atlas. Hereâ€™s an overview of the key sections and procedures involved.</p><p><strong>Required Access</strong></p><p>To manage project access, you must have the <strong>Project Owner</strong> role. This role allows you to add users or teams, view access details, and modify permissions.</p><p><strong>Add Users or Teams to a Project</strong></p><p>To grant access to users or teams:</p><ol><li><strong>Select Organization</strong>: Choose your desired organization from the Organizations menu in the navigation bar.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Manager</strong>:<ul><li>Select <strong>Project Access</strong> from the Access Manager menu.</li><li>Alternatively, expand the Options menu next to the Projects menu, click <strong>Project Settings</strong>, and then click <strong>Access Manager</strong> in the sidebar.</li></ul></li><li><strong>Add Users or Teams</strong>:<ul><li>Enter the new user's email address, Jira username, or an existing team name.</li><li>Press Enter or click on the name when it appears.</li><li>Repeat for any additional users or teams.</li></ul></li><li><strong>Assign Roles</strong>: By default, users are given the <strong>Project Read Only</strong> role. To change or add roles, click on the role dropdown menu and select the desired roles.</li></ol><p>Atlas sends an email invitation to the selected users. They will not have access until they accept the invitation, which expires after 30 days.</p><p><strong>View Who Can Access a Project</strong></p><p>To see the users, teams, or API Keys that can access a project:</p><ol><li><strong>Select Organization</strong>: Choose your desired organization from the Organizations menu.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Manager</strong>: <ul><li>Select <strong>Project Access</strong> from the Access Manager menu.</li><li>Alternatively, expand the Options menu next to the Projects menu, click <strong>Project Settings</strong>, and then click <strong>Access Manager</strong> in the sidebar.</li></ul></li></ol><p>The Project Access Manager page displays the project's users, teams, and API Keys along with their roles.</p><p><strong>View User Invitations</strong></p><p>To view outstanding invitations:</p><ol><li><strong>Select Organization</strong>: Choose your desired organization from the Organizations menu.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Manager</strong>: <ul><li>Select <strong>Project Access</strong> from the Access Manager menu.</li><li>Alternatively, expand the Options menu next to the Projects menu, click <strong>Project Settings</strong>, and then click <strong>Access Manager</strong> in the sidebar.</li></ul></li></ol><p>The Users tab lists any outstanding invitations and requests from users who want to join the project.</p><p><strong>Cancel or Update User Invitations</strong></p><p>To cancel an invitation:</p><ol><li><strong>Select Organization</strong>: Choose your desired organization from the Organizations menu.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Manager</strong>: <ul><li>Select <strong>Project Access</strong> from the Access Manager menu.</li><li>Alternatively, expand the Options menu next to the Projects menu, click <strong>Project Settings</strong>, and then click <strong>Access Manager</strong> in the sidebar.</li></ul></li></ol><p>Click to the right of the user's name on the Users tab to cancel their invitation.</p><p><strong>Remove Users or Teams from a Project</strong></p><p>To remove a user or team:</p><ol><li><strong>Select Organization</strong>: Choose your desired organization from the Organizations menu.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Manager</strong>: <ul><li>Select <strong>Project Access</strong> from the Access Manager menu.</li><li>Alternatively, expand the Options menu next to the Projects menu, click <strong>Project Settings</strong>, and then click <strong>Access Manager</strong> in the sidebar.</li></ul></li></ol><p>Click to the right of the user or team you want to remove and confirm the action.</p><p><strong>Edit a User's or Team's Role in a Project</strong></p><p>To edit roles:</p><ol><li><strong>Select Organization</strong>: Choose your desired organization from the Organizations menu.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Manager</strong>: <ul><li>Select <strong>Project Access</strong> from the Access Manager menu.</li><li>Alternatively, expand the Options menu next to the Projects menu, click <strong>Project Settings</strong>, and then click <strong>Access Manager</strong> in the sidebar.</li></ul></li></ol><p>Click the <strong>Edit Permissions</strong> option next to the user or team whose permissions you want to modify.</p><p><strong>Important Notes</strong></p><ul><li><strong>Project Invitation Deprecation</strong>: As of September 13, 2023, project invitations have been deprecated. Users are automatically granted access to projects without receiving separate invitations.</li><li><strong>User and Team Limits</strong>: Atlas limits the number of users to a maximum of 500 per project and 500 per organization, and the number of teams to a maximum of 100 per project and 250 per organization.</li></ul><p><strong>Manage Project Settings</strong></p><p>To manage project settings in MongoDB Atlas, you need to have the <strong>Project Owner</strong> role. Project settings apply to all users within the project, and the Project ID is used by the Atlas Administration API and the Atlas CLI.</p><p><strong>Accessing Project Settings</strong></p><ol><li><strong>Select Organization</strong>: Choose the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Project Settings</strong>: Expand the Options menu next to the Projects menu and click on <strong>Project Settings</strong>.</li></ol><p><strong>Project Settings Overview</strong></p><p>You can configure various settings for your project, as outlined in the table below:</p><table><thead><tr><th><p><strong>Setting</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Project Name</p></td><td><p>Sets your project's name. Requires the Project Owner or Organization Owner role to edit.</p></td></tr><tr><td><p>Project Time Zone</p></td><td><p>Sets the project's time zone, affecting maintenance windows and alerts.</p></td></tr><tr><td><p>Tags</p></td><td><p>Allows you to label and organize your projects with key-value pairs.</p></td></tr><tr><td><p>Connect via Peering Only (GCP and Azure)</p></td><td><p>Enables/disables connections between Atlas clusters and public IPs outside the peered VPC/VNet. This feature is deprecated.</p></td></tr><tr><td><p>Using Custom DNS on AWS with VPC peering</p></td><td><p>Exposes a second connection string for dedicated Atlas clusters on AWS that resolves to private IPs.</p></td></tr><tr><td><p>Multiple Regionalized Private Endpoints</p></td><td><p>Allows creation of multiple private endpoints in different regions for multi-region and global sharded clusters.</p></td></tr><tr><td><p>Collect Database Specific Statistics</p></td><td><p>Enables/disables the collection of database statistics in cluster metrics.</p></td></tr><tr><td><p>Set Preferred Cluster Maintenance Start Time</p></td><td><p>Sets the hour for weekly maintenance on your cluster.</p></td></tr><tr><td><p>Project Overview</p></td><td><p>Sets the project landing page to Overview, which displays common Atlas actions.</p></td></tr><tr><td><p>Real Time Performance Panel</p></td><td><p>Allows viewing of real-time metrics from your MongoDB database.</p></td></tr><tr><td><p>Data Explorer</p></td><td><p>Provides an interface to query your database. Disabling it restricts certain functionalities.</p></td></tr><tr><td><p>Performance Advisor and Profiler</p></td><td><p>Analyzes database logs and provides performance improvement recommendations.</p></td></tr><tr><td><p>Schema Advisor</p></td><td><p>Offers recommendations to optimize your data model.</p></td></tr><tr><td><p>Managed Slow Operations</p></td><td><p>Dynamically sets the slow query threshold based on execution times.</p></td></tr><tr><td><p>Enable Extended Storage Sizes</p></td><td><p>Configures M40+ clusters with greater maximum storage than the standard limit.</p></td></tr><tr><td><p>Delete Charts</p></td><td><p>Allows deletion of the MongoDB Charts instance associated with your project. This action is irreversible.</p></td></tr><tr><td><p>Delete Project</p></td><td><p>Deletes the project if there are no Online Archives for the clusters in the project.</p></td></tr></tbody></table><p><strong>CLI Commands for Project Settings</strong></p><p>To update project settings using the Atlas CLI, you can use the following commands:</p><ul><li><strong>Update Project Settings</strong>:</li></ul><p>bash</p><p>ï‚·  atlas projects settings update [options]</p><p>ï‚·  <strong>Describe Project Settings</strong>:</p><p>bash</p><ul><li>atlas projects settings describe [options]</li></ul><p><strong>Custom DNS Configuration on AWS</strong></p><p>To manage custom DNS settings for an Atlas cluster deployed to AWS, you can use the following commands:</p><ul><li><strong>Enable Custom DNS</strong>:</li></ul><p>bash</p><p>ï‚·  atlas customDns aws enable [options]</p><p>ï‚·  <strong>Disable Custom DNS</strong>:</p><p>bash</p><p>ï‚·  atlas customDns aws disable [options]</p><p>ï‚·  <strong>Describe Custom DNS Configuration</strong>:</p><p>bash</p><p>atlas customDns aws describe [options]</p><p><strong>Manage the Project Landing Page</strong></p><p>The project overview serves as the landing page for your Atlas project, displaying various modules that contain common actions and resources. This overview simplifies the process of finding resources and managing your clusters directly from the Atlas home page.</p><p><strong>Accessing the Project Overview</strong></p><p>To navigate to the project overview, click on <strong>Overview</strong> in the sidebar of Atlas. If the Overview option is not visible, you may need to enable it for your project.</p><p><strong>Enabling the Project Overview</strong></p><p>To enable the project overview, you must have either the <strong>Project Owner</strong> or <strong>Organization Owner</strong> role. Follow these steps:</p><ol><li>Select the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li>Select your desired project from the Projects menu.</li><li>Expand the Options menu next to the Projects menu and click on <strong>Project Settings</strong>.</li></ol><p><strong>Disabling the Project Overview</strong></p><p>If you wish to disable the project overview, follow these steps:</p><ol><li>Select the organization that contains your desired project from the Organizations menu.</li><li>Select your desired project from the Projects menu.</li><li>Expand the Options menu next to the Projects menu and click on <strong>Project Settings</strong>.</li></ol><p>When you disable the project overview, the following changes will occur for all users in the project:</p><ul><li>The <strong>Overview</strong> option will no longer display in the sidebar.</li><li>The <strong>Clusters</strong> page will become the project landing page.</li></ul><p><strong>Modules in the Project Overview</strong></p><p>The project overview includes several modules, such as:</p><ul><li><strong>Application Development Module</strong>: This module provides resources to connect to your clusters using official MongoDB libraries. If you have connected an app with a driver, recent connections will be displayed here.</li></ul><p><strong>Note</strong>: If your app is not listed, ensure that you set the appName in your connection string to match your cluster name. It may take up to one hour after connection for your app to appear in the project overview.</p><p><strong>Example Connection String</strong>:</p><p>plaintext</p><p>mongodb+srv://&lt;db_username&gt;:&lt;db_password&gt;@myCluster.abc12.mongodb.net/?retryWr</p><p><strong>Invitations to Organizations and Projects</strong></p><p><strong>Important Information</strong></p><ul><li><strong>Project Invitation Deprecation</strong>: As of September 13, 2023, project invitations have been deprecated. When you invite an organization member to projects within the organization, they are automatically granted access without receiving separate invitations. If you invite a user to projects in an organization they do not belong to, they will receive a single invitation to the organization, which includes access to all granted projects. Invitations expire after 30 days.</li></ul><p><strong>Viewing Pending Invitations</strong></p><p>To view pending invitations to join organizations:</p><ol><li>In the upper right corner of the Atlas UI, click your username to access the Account menu.</li><li>Under Atlas, click <strong>Invitations</strong>.</li></ol><p>To accept an invitation, click <strong>Accept Invite</strong> for the corresponding invitation. You can also accept an invitation from the email Atlas sends when you are first invited to join an organization or project.</p><p><strong>Invitation Details</strong></p><p>Atlas displays the following information for each invitation:</p><table><tr><td><p><strong>Organization</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>Name of the organization</p></td><td><p>You are invited to join.</p></td></tr><tr><td><p>Roles</p></td><td><p><a href="https://html.onlineviewer.net/docs/atlas/reference/user-roles/#std-label-user-roles">User roles</a> this invitation grants on the specified organization and projects.</p></td></tr><tr><td><p>Sent On</p></td><td><p>Time that the invitation was sent.</p></td></tr><tr><td><p>Expiration Date</p></td><td><p>Date that the invitation expires.</p></td></tr><tr><td><p>Actions</p></td><td><p>Button to accept the invitation.</p></td></tr></table><p><strong>Viewing Outgoing Invitations</strong></p><p>To view outgoing invitations to an organization:</p><ol><li>If it's not already displayed, select your desired organization from the Organizations menu in the navigation bar.</li><li>Do one of the following: <ul><li>Select <strong>Organization Access</strong> from the Access Manager menu in the navigation bar.</li><li>Click <strong>Access Manager</strong> in the sidebar.</li></ul></li></ol><p>To view outgoing invitations to a project:</p><ol><li>If it's not already displayed, select your desired organization from the Organizations menu.</li><li>If it's not already displayed, select your desired project from the Projects menu.</li><li>Do one of the following: <ul><li>Select <strong>Project Access</strong> from the Access Manager menu in the navigation bar.</li><li>Expand the Options menu next to the Projects menu, click <strong>Project Settings</strong>, and click <strong>Access Manager</strong> in the sidebar.</li></ul></li></ol><p>The <strong>Project Access Manager</strong> page displays outgoing invitations as <strong>Pending User</strong>.</p><p><a id="_Hlk185781609"></a>Objective 3.3: Access the audit log and activity feed.</p><p><strong>Activity Feed Overview</strong></p><ol><li><strong>Organization Activity Feed</strong>:<ul><li>Displays events related to the organization, such as billing or access events.</li><li>Requires at least <strong>Organization Member</strong> access to view.</li></ul></li><li><strong>Project Activity Feed</strong>:<ul><li>Provides detailed information about events specific to a project, such as changes in cluster configurations.</li><li>Requires at least <strong>Project Read Only</strong> access to view.</li></ul></li></ol><p><strong>Accessing the Activity Feed</strong></p><p>You can access the activity feed through the Atlas UI, Atlas CLI, or the Atlas Administration API.</p><p><strong>Using the Atlas CLI</strong></p><p>To retrieve all events for an organization, use the following command:</p><p>bash</p><p>atlas events organizations list [options]</p><p>For project events, use:</p><p>bash</p><p>atlas events projects list [options]</p><p><strong>Filtering Events</strong></p><p>You can filter events in both the Organization and Project Activity Feeds by various criteria:</p><ol><li><strong>Time Range</strong>:<ul><li>Set a start and end date to view events within a specific timeframe.</li></ul></li><li><strong>Event Type</strong>:<ul><li>Select specific event categories or events to include or exclude from the feed.</li></ul></li></ol><p><strong>Event Categories</strong></p><p>Here are some of the categories you can filter by:</p><table><thead><tr><th><p><strong>Category</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Access</p></td><td><p>Events related to Atlas users, such as API key creation or user role changes.</p></td></tr><tr><td><p>Alerts</p></td><td><p>Events related to alert configurations and monitoring.</p></td></tr><tr><td><p>Billing</p></td><td><p>Events related to payments and payment methods.</p></td></tr><tr><td><p>Organization</p></td><td><p>Events related to the organization, such as creation or suspension.</p></td></tr><tr><td><p>Others</p></td><td><p>Miscellaneous events, including log retrieval and BI Connector events.</p></td></tr><tr><td><p>Projects</p></td><td><p>Events related to Atlas projects, such as project creation or deletion.</p></td></tr></tbody></table><p><strong>Viewing the Activity Feed in the Atlas UI</strong></p><p>To view the activity feed:</p><ol><li>Select your organization from the Organizations menu.</li><li>For the Organization Activity Feed: <ul><li>Click the Organization Settings icon next to the Organizations menu.</li></ul></li><li>For the Project Activity Feed: <ul><li>Select your project from the Projects menu.</li><li>Click the Project Activity Feed icon in the navigation bar or access it through Project Settings.</li></ul></li></ol><p><strong>Set Up Database Auditing in MongoDB Atlas</strong></p><p>Database auditing in MongoDB Atlas allows administrators to track system activity across deployments with multiple users. This feature is essential for compliance and security, enabling you to monitor actions performed by users and applications.</p><p><strong>Important Notes</strong></p><ul><li><strong>Availability</strong>: Database auditing is not available for:<ul><li>Serverless instances</li><li>M0 clusters</li><li>M2/M5 clusters</li><li>Flex clusters</li></ul></li><li><strong>Audit Logs</strong>: Atlas supports auditing most documented system event actions, but it does not track user creation or modification events since these operations are performed directly in the admin database.</li></ul><p><strong>Performing a Full Database Audit</strong></p><p>To conduct a comprehensive audit, you need to combine audit logs, the mongodb.log, and the Project Activity Feed. The authCheck event action logs authorization attempts by users trying to read from and write to databases in your clusters.</p><p><strong>Event Actions</strong></p><p>Atlas implements the authCheck event action as four separate actions:</p><table><thead><tr><th><p><strong>Event Action</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>authChecksReadFailures</p></td><td><p>Logs failed read attempts withÂ auditAuthorizationSuccessÂ set to false.</p></td></tr><tr><td><p>authChecksReadAll</p></td><td><p>Logs all read attempts (successes and failures) withÂ auditAuthorizationSuccessÂ set to true.Â <strong>Warning:</strong>Â Enabling this may impact performance.</p></td></tr><tr><td><p>authChecksWriteFailures</p></td><td><p>Logs failed write attempts withÂ auditAuthorizationSuccessÂ set to false.</p></td></tr><tr><td><p>authChecksWriteAll</p></td><td><p>Logs all write attempts (successes and failures) withÂ auditAuthorizationSuccessÂ set to true.Â <strong>Warning:</strong>Â Enabling this may impact performance.</p></td></tr></tbody></table><p><strong>Setting Up Database Auditing</strong></p><p>To set up database auditing, follow these steps:</p><ol><li><strong>Select Organization</strong>: Choose the organization that contains your project from the Organizations menu in the navigation bar.</li><li><strong>Select Project</strong>: Choose your project from the Projects menu.</li><li><strong>Access Advanced Settings</strong>: In the sidebar, click <strong>Advanced</strong> under the <strong>Security</strong> heading.</li></ol><p>By default, Atlas logs failed authentication attempts of both known and unknown users in the audit log of the primary node. You can also use a custom JSON filter to specify which events to audit.</p><p><strong>Custom Audit Filters</strong></p><p>You can specify a JSON-formatted audit filter for more granular control over event auditing. The filter document must resolve to a query that matches one or more fields in the audit event message.</p><p><strong>Example Audit Filter</strong>:</p><p>json</p><p>{ "atype": "authenticate" }</p><p><strong>Important Considerations</strong></p><ul><li><strong>Performance Impact</strong>: Enabling audit authorization successes can severely impact cluster performance. Use this option with caution.</li><li><strong>Rolling Upgrades</strong>: Atlas uses a rolling upgrade strategy for enabling or updating audit configuration settings across all clusters in the project.</li></ul><p><strong>Retrieving Audit Logs</strong></p><p>To retrieve audit logs in Atlas, refer to the MongoDB Logs documentation. You can also retrieve logs using the API.</p><p><strong>View Database Access History</strong></p><p>The Database Access History feature in MongoDB Atlas allows you to track authentication requests made against your clusters. This feature is not available for certain deployments, including:</p><ul><li>Serverless instances</li><li>M0 clusters</li><li>M2/M5 clusters</li><li>Flex clusters</li></ul><p><strong>Authentication Request Methods</strong></p><p>Atlas collects authentication requests made through the following methods:</p><ul><li>mongosh</li><li>Compass</li><li>Drivers</li></ul><p><strong>Note</strong>: Authentication requests made with API Keys through the Atlas Administration API are not logged.</p><p><strong>Logged Information</strong></p><p>For each authentication request within the last 7 days, Atlas logs the following information:</p><table><thead><tr><th><p><strong>Field</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Timestamp</p></td><td><p>The date and time of the authentication request.</p></td></tr><tr><td><p>Username</p></td><td><p>The username associated with the database user who made the authentication request. For LDAP usernames, the UI displays the resolved LDAP name. Hover over the name to see the full LDAP username.</p></td></tr><tr><td><p>IP Address</p></td><td><p>The IP address of the machine that sent the authentication request.</p></td></tr><tr><td><p>Host</p></td><td><p>The target server that processed the authentication request.</p></td></tr><tr><td><p>Authentication Source</p></td><td><p>The database that the authentication request was made against.Â adminÂ is the authentication source for SCRAM-SHA users andÂ $externalÂ for LDAP users.</p></td></tr><tr><td><p>Authentication Result</p></td><td><p>The success or failure of the authentication request. A reason code is displayed for failed authentication requests.</p></td></tr></tbody></table><p>Authentication requests are pre-sorted by descending timestamp with 25 entries per page.</p><p><strong>Important Considerations</strong></p><ul><li>If a cluster experiences an activity spike and generates an extremely large quantity of log messages, Atlas may stop collecting and storing new logs for a period of time.</li><li>Log analysis rate limits apply only to the Performance Advisor UI, the Query Insights UI, the Access Tracking UI, and the Atlas Search Query Analytics UI. Downloadable log files are always complete.</li><li>If authentication requests occur during a period when logs are not collected, they will not appear in the database access history.</li></ul><p><strong>Access Requirements</strong></p><p>To view database access history, you must have either the <strong>Project Owner</strong> or <strong>Organization Owner</strong> role in Atlas.</p><p><strong>Using the Atlas CLI</strong></p><p>To return the access logs for a cluster using the Atlas CLI, run the following command:</p><p>bash</p><p>atlas accessLogs list [options]</p><p>For more details on command syntax and parameters, refer to the Atlas CLI documentation for access logs.</p><p><strong>Viewing Database Access History in the Atlas UI</strong></p><p>To view your database access history using the Atlas UI:</p><ol><li>Select the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li>Select your desired project from the Projects menu in the navigation bar.</li><li>Click <strong>Clusters</strong> in the sidebar to display the Clusters page.</li><li>On the cluster card, click the options menu (three dots).</li><li>Select <strong>View Database Access History</strong>.</li></ol><p>Alternatively:</p><ol><li>Click the cluster name.</li><li>Click the options menu (three dots).</li><li>Select <strong>View Database Access History</strong>.</li></ol><p>This feature provides valuable insights into authentication activities, helping you monitor and manage access to your MongoDB Atlas clusters effectively.</p><p>Objective 3.4: Data protection methods.</p><p><strong>Encryption at Rest using Customer Key Management</strong></p><p>MongoDB Atlas provides the ability to enhance security by using customer-managed keys for encryption at rest. This feature allows you to manage your encryption keys through your cloud provider's Key Management Service (KMS). Below is a detailed overview of the key points related to this feature.</p><p><strong>Key Points</strong></p><ul><li><strong>Default Encryption</strong>: Atlas encrypts all cluster storage and snapshot volumes at rest by default. You can add an additional layer of security by using your cloud provider's KMS along with the MongoDB encrypted storage engine.</li><li><strong>Supported KMS Providers</strong>:<ul><li><strong>Amazon Web Services Key Management Service (AWS KMS)</strong></li><li><strong>Azure Key Vault</strong></li><li><strong>Google Cloud Platform Key Management Service (GCP KMS)</strong></li></ul></li><li><strong>Configuration Requirements</strong>:<ul><li>You must have <strong>Project Owner</strong> access to configure customer key management.</li><li>Valid key management provider credentials and an encryption key are required.</li></ul></li></ul><p><strong>Steps to Configure Customer Key Management</strong></p><ol><li><strong>Select Organization and Project</strong>:<ul><li>Choose the organization that contains your project from the Organizations menu.</li><li>Select your project from the Projects menu.</li></ul></li><li><strong>Access Advanced Settings</strong>:<ul><li>In the sidebar, click <strong>Advanced</strong> under the Security heading.</li></ul></li><li><strong>Enable Customer Key Management</strong>:<ul><li>Toggle the <strong>Manage your own encryption keys</strong> setting to <strong>Yes</strong> on the cluster configuration form.</li><li>Click <strong>Review Changes</strong> and then <strong>Apply Changes</strong> to deploy your cluster.</li></ul></li><li><strong>IP Access List</strong>:<ul><li>Depending on your KMS configuration, you may need to add Atlas control plane IP addresses to your cloud provider's access list to enable communication between Atlas and KMS.</li></ul></li><li><strong>Validate KMS Configuration</strong>:<ul><li>Atlas validates your KMS configuration when you add or update credentials, every 15 minutes, and on-demand.</li></ul></li></ol><p><strong>Important Considerations</strong></p><ul><li><strong>Cluster Availability</strong>: If your KMS provider becomes unavailable, your cluster will not be disabled while it is running. However, if you restart your cluster, the lack of a KMS provider will disable it.</li><li><strong>Key Rotation</strong>: Atlas cannot rotate customer-managed encryption keys. Refer to your KMS provider's documentation for guidance on key rotation.</li><li><strong>Restoring Deleted Keys</strong>: If a key is deleted, you must restore it to regain access to your clusters. Each KMS provider has its own method for restoring keys.</li></ul><p><strong>Encrypted Backups</strong></p><ul><li>Atlas encrypts all snapshot volumes, securing your cluster data on disk. You can also encrypt your snapshot storage volumes and access encrypted snapshots.</li><li>To restore snapshots, you must use the key that was active at the time the snapshot was taken.</li></ul><p><strong>Manage Customer Keys with AWS KMS</strong></p><p>This page provides detailed instructions on how to manage customer-managed keys using AWS Key Management Service (KMS) in MongoDB Atlas. Below are the key sections and procedures outlined in the documentation.</p><p><strong>Required Access</strong></p><ul><li>You must have <strong>Project Owner</strong> access to configure customer key management for your Atlas project.</li><li>Users with <strong>Organization Owner</strong> access must add themselves as a Project Owner to manage keys.</li></ul><p><strong>Enable Customer-Managed Keys with AWS KMS</strong></p><p>To enable customer-managed keys for your Atlas project, you need to configure AWS IAM roles instead of IAM users. This change enhances security and simplifies access management.</p><p><strong>Example</strong></p><p>Hereâ€™s an example of how to set up AWS KMS for customer-managed keys:</p><ol><li><strong>Create a Symmetric AWS KMS Key</strong>: Follow the AWS documentation to create a symmetric key.</li><li><strong>Configure IAM Role</strong>: Ensure the IAM role has permissions to perform actions like DescribeKey, Encrypt, and Decrypt.</li></ol><p><strong>Prerequisites</strong></p><ul><li>Use an <strong>M10 or larger cluster</strong>.</li><li>Ensure you have a <strong>symmetric AWS KMS key</strong>.</li><li>Configure an <strong>AWS IAM role</strong> with sufficient privileges.</li></ul><p><strong>Enable Role-Based Access to Your Encryption Key for a Project</strong></p><ol><li><strong>Select Organization and Project</strong>: Choose the organization and project from the navigation menu.</li><li><strong>Access Advanced Settings</strong>: Click on <strong>Advanced</strong> under the Security heading in the sidebar.</li></ol><p><strong>Rotate Your AWS Customer Master Key</strong></p><p>You can rotate your AWS Customer Master Key (CMK) to enhance security. Follow AWS guidelines for key rotation.</p><p><strong>MongoDB Master Key - MongoDB Responsibility</strong></p><p>MongoDB manages the MongoDB Master Key, which is used to encrypt per-database encryption keys.</p><p><strong>Your AWS CMK - Your Responsibility</strong></p><p>You are responsible for managing your AWS CMK, including permissions and access.</p><p><strong>Procedure</strong></p><ol><li><strong>Configure Customer Key Management</strong>: Set up customer key management for your Atlas project before enabling it on clusters.</li><li><strong>Allow Access from Atlas IP Addresses</strong>: Ensure that your AWS KMS configuration allows access from Atlas IP addresses.</li></ol><p><strong>Reconfigure AWS KMS Region During an Outage</strong></p><p>In case of a regional outage, you may need to reconfigure your AWS KMS region. Follow the outlined procedures to ensure continuity.</p><p><strong>Example API Call</strong></p><p>To update your AWS KMS settings in Atlas, you can use the following curl command:</p><p>bash</p><p>curl --user "{public key}:{private key}" --digest \</p><p>  --header "Accept: application/json" \</p><p>  --header "Content-Type: application/json" \</p><p>  --include \</p><p>  --request PATCH \</p><p>  "https://cloud.mongodb.com/api/atlas/v1.0/groups/{groupId}/encryptionAtRest?pretty=true&amp;envelope=true" \</p><p>  --data '{</p><p>      "awsKms": {</p><p>          "enabled": true,</p><p>          "roleId": "&lt;roleId&gt;",</p><p>          "customerMasterKeyID": "&lt;master-key-id&gt;",</p><p>          "region": "&lt;aws-region&gt;"</p><p>      }</p><p>  }'</p><p><strong>Important Notes</strong></p><ul><li>If you switch to role-based access, you cannot revert to credentials-based access for encryption keys on that project.</li><li>Ensure that you have the correct IAM role and AWS KMS key settings for all clusters in a project where encryption at rest is enabled.</li></ul><p>Objective 3.5: Configure networking access.</p><p><strong>Configure IP Access List Entries</strong></p><p>MongoDB Atlas allows client connections to your cluster only from IP addresses specified in the project's IP access list. Each entry can be a single IP address or a CIDR-notated range of addresses. For AWS clusters with VPC Peering connections, you can also specify a Security Group associated with the peered VPC.</p><p><strong>Key Features</strong></p><ul><li><strong>IP Access List</strong>: The IP access list applies to all clusters in the project and can contain up to 200 entries. However, projects with existing sharded clusters created before August 25, 2017, can have up to 100 entries.</li><li><strong>Temporary Entries</strong>: Atlas supports creating temporary IP access list entries that expire within a user-configurable 7-day period.</li><li><strong>Activity Feed Notifications</strong>: When you create, delete, or modify IP access list entries, Atlas notifies you in the project's Activity Feed. For example, modifying an entry will show the deletion of the old entry and the creation of a new one.</li></ul><p><strong>Viewing the Activity Feed</strong></p><p>To view the project's Activity Feed:</p><ol><li>Select the organization that contains your project from the Organizations menu.</li><li>Select your desired project from the Projects menu.</li><li>Expand the Options menu next to the Projects menu and click <strong>Project Settings</strong>.</li></ol><p><strong>Required Access</strong></p><p>To manage IP Access List entries, you must have <strong>Project Owner</strong> access to the project. Users with <strong>Organization Owner</strong> access must add themselves as a Project Owner.</p><p><strong>Managing IP Access List Entries</strong></p><ol><li><strong>View IP Access List Entries</strong>:<ul><li>In the Atlas UI, navigate to <strong>Network Access</strong> under the Security heading to view existing entries.</li></ul></li><li><strong>Add IP Access List Entries</strong>:<ul><li>Click <strong>Add IP Address</strong> and enter the desired IP address or CIDR block. You can also specify a Security Group ID for AWS.</li></ul></li><li><strong>Modify IP Access List Entries</strong>:<ul><li>Click <strong>Edit</strong> next to the entry you want to modify. You can change the IP address or CIDR block and update the comment.</li></ul></li><li><strong>Delete IP Access List Entries</strong>:<ul><li>Click <strong>Delete</strong> next to the entry you want to remove.</li></ul></li></ol><p><strong>Important Considerations</strong></p><ul><li><strong>CIDR Notation</strong>: Adding the CIDR 0.0.0.0/0 allows access from anywhere, so ensure strong credentials are used for all database users.</li><li><strong>Temporary Access</strong>: You can specify a temporary access duration (6 hours, 1 day, or 1 week) for IP addresses. Once expired, the address will be removed from the access list.</li><li><strong>Connection Behavior</strong>: When an entry is removed, existing connections from that address may remain open for a variable amount of time.</li></ul><p><strong>Atlas CLI Commands</strong></p><p>To manage IP access list entries using the Atlas CLI:</p><ul><li><strong>List Entries</strong>:</li></ul><p>bash</p><p>ï‚·  atlas accessLists list [options]</p><p>ï‚·  <strong>Create an Entry</strong>:</p><p>bash</p><p>ï‚·  atlas accessLists create [entry] [options]</p><p>ï‚·  <strong>Describe an Entry</strong>:</p><p>bash</p><p>ï‚·  atlas accessLists describe &lt;entry&gt; [options]</p><p>ï‚·  <strong>Delete an Entry</strong>:</p><p>bash</p><p>atlas accessLists delete &lt;entry&gt; [options]</p><p><strong>Set Up a Network Peering Connection</strong></p><p>MongoDB Atlas supports network peering connections for dedicated clusters hosted on AWS, Google Cloud, and Azure, as well as on multi-cloud sharded clusters. This feature establishes a private connection between your Atlas Virtual Private Cloud (VPC) and your cloud provider's VPC, isolating traffic from public networks for enhanced security.</p><p><strong>Required Access</strong></p><p>To set up a network peering connection, you must have either <strong>Organization Owner</strong> or <strong>Project Owner</strong> access to the project.</p><p><strong>Important Notes</strong></p><ul><li><strong>Unsupported Deployments</strong>: Network peering is not available for serverless instances, M0, M2/M5 clusters, or flex clusters.</li><li><strong>Cross-Provider Limitations</strong>: Atlas does not support network peering between clusters deployed in a single region on different cloud providers (e.g., AWS and GCP).</li></ul><p><strong>Steps to Configure Network Peering</strong></p><ol><li><strong>Log in to AWS</strong>:<ul><li>Access your AWS account and navigate to the VPC dashboard.</li></ul></li><li><strong>Select Your VPC</strong>:<ul><li>Open your list of VPC resources and select the VPC you want to peer with.</li></ul></li><li><strong>Enable DNS Hostnames and Resolution</strong>:<ul><li>Ensure that DNS hostnames and DNS resolution are enabled for your VPC. This allows your application to connect to the cluster using private IP addresses.</li></ul></li><li><strong>Access Network Access in Atlas</strong>:<ul><li>In the Atlas UI, go to the <strong>Network Access</strong> page for your project.</li><li>Click on the <strong>Peering</strong> tab and then click <strong>Add Peering Connection</strong>.</li></ul></li><li><strong>Fill Out Peering Connection Details</strong>:<ul><li>Select the cloud provider (e.g., AWS) and fill in the required fields, including: <ul><li><strong>Account ID</strong>: Your AWS Account ID.</li><li><strong>VPC ID</strong>: The ID of the peer VPC.</li><li><strong>VPC CIDR</strong>: The CIDR block of the peer VPC (must not overlap with your Atlas CIDR).</li><li><strong>Application VPC Region</strong>: The AWS region where the application VPC resides.</li></ul></li></ul></li><li><strong>Atlas VPC Configuration</strong>:<ul><li>Specify the Atlas VPC region and CIDR block. The Atlas CIDR block must be between /24 and /21.</li></ul></li><li><strong>Initiate Peering</strong>:<ul><li>Click <strong>Initiate Peering</strong> and wait for the approval of the peering connection request from the owner of the peer VPC.</li></ul></li><li><strong>Update Route Tables</strong>:<ul><li>In the AWS VPC dashboard, navigate to <strong>Route Tables</strong> and add a route for the Atlas VPC's CIDR block, targeting the AWS Peering Connection ID.</li></ul></li></ol><p><strong>Important Considerations</strong></p><ul><li><strong>Maximum Peering Connections</strong>: Each Atlas project can have a maximum of 50 peering connections, including up to 25 pending connections.</li><li><strong>Security Group Rules</strong>: Ensure that your AWS security group allows outbound traffic on ports 27015-27017 to your Atlas CIDR.</li></ul><p><strong>Private Endpoints in Atlas</strong></p><p>MongoDB Atlas supports private endpoints on dedicated clusters across various cloud providers, enhancing security by allowing private connections to your Atlas clusters. Hereâ€™s a detailed overview of how private endpoints work in Atlas.</p><p><strong>Supported Cloud Providers</strong></p><ul><li><strong>AWS</strong>: Utilizes the AWS PrivateLink feature.</li><li><strong>Azure</strong>: Uses the Azure Private Link feature.</li><li><strong>Google Cloud</strong>: Implements the GCP Private Service Connect feature.</li></ul><p>You can also set up private endpoints for your Online Archive.</p><p><strong>Resources Created for Private Endpoints</strong></p><p>When you enable private endpoints, the following resources are created:</p><table><thead><tr><th><p><strong>Resource</strong></p></th><th><p><strong>Creator</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Private endpoint service</p></td><td><p>Atlas</p></td><td><p>A collection of private endpoint resources within your Atlas VPC behind a network load balancer.</p></td></tr><tr><td><p>Interface endpoint</p></td><td><p>AWS</p></td><td><p>An AWS VPC endpoint with a private IP address that sends traffic to the private endpoint service over AWS PrivateLink.</p></td></tr><tr><td><p>Private endpoint</p></td><td><p>AWS and Atlas together</p></td><td><p>A generic term for the private connection established between Atlas and your cloud provider.</p></td></tr></tbody></table><p><strong>Advantages of Private Endpoints</strong></p><ul><li><strong>One-Way Connections</strong>: Connections using private endpoints are one-way, meaning Atlas VPCs cannot initiate connections back to your VPCs, maintaining a secure network boundary.</li><li><strong>Transitive Connections</strong>: You can connect to private endpoints transitively from:<ul><li>Another VPC peered to the private endpoint-connected VPC.</li><li>An on-premises data center connected with Direct Connect to the private endpoint-connected VPC.</li></ul></li></ul><p><strong>Setting Up Private Endpoints</strong></p><p>To set up a private endpoint, you must have either <strong>Organization Owner</strong> or <strong>Project Owner</strong> access to the project.</p><ol><li><strong>AWS Setup</strong>:<ul><li>Create a VPC and enable DNS hostnames and resolution.</li><li>In Atlas, navigate to <strong>Network Access</strong> and add a private endpoint.</li></ul></li><li><strong>Azure Setup</strong>:<ul><li>Create a VNet and configure a private endpoint in Atlas.</li></ul></li><li><strong>Google Cloud Setup</strong>:<ul><li>Create a VPC and set up a private endpoint service in Atlas.</li></ul></li></ol><p><strong>Multi-Region Support</strong></p><p>GCP Private Service Connect now provides multi-region support, allowing you to connect to private endpoints from different Google Cloud regions. This ensures high availability for your multi-region clusters.</p><p><strong>Important Recommendations</strong></p><ul><li><strong>DNS Seedlist Connection Strings</strong>: MongoDB strongly recommends using DNS seedlist private endpoint-aware connection strings to ensure that DNS automatically updates the ports used by private endpoints if they change.</li><li><strong>Port Allow-listing</strong>: It is advisable to allow-list the entire port range instead of specific ports to accommodate potential changes.</li></ul><p><strong>Set Up a Private Endpoint for a Dedicated Cluster</strong></p><p>To enable a client to connect to an Atlas dedicated cluster using private endpoints, follow these steps. You must have either <strong>Organization Owner</strong> or <strong>Project Owner</strong> access to the project.</p><p><strong>Prerequisites, Considerations, and Limitations</strong></p><p>Before setting up a private endpoint, ensure you review the prerequisites, considerations, and limitations for using private endpoints in Atlas:</p><ul><li>Prerequisites</li><li>Considerations</li><li>Limitations</li></ul><p><strong>Setting Up AWS PrivateLink via Atlas CLI</strong></p><ol><li><strong>Install the Atlas CLI</strong>: If you haven't already, install the Atlas CLI by following the installation guide.</li><li><strong>Create a Private Endpoint</strong>: Run the following command to initiate the setup of AWS PrivateLink in Atlas. Ensure that the --region matches the region where your cluster is deployed:</li></ol><p>bash</p><p>ï‚·  atlas privateEndpoints aws create [options]</p><p>For more details on command syntax and parameters, refer to the Atlas CLI documentation.</p><p>ï‚·  <strong>Note the Private Endpoint Service ID</strong>: After running the command, note the private endpoint service's ID from the response. For example:</p><p>ï‚·  Private endpoint '6344ac8f51b94c6356527881' created.</p><p>It may take Atlas some time to provision the private endpoint, so wait 1-2 minutes before proceeding.</p><p>ï‚·  <strong>Describe the Private Endpoint</strong>: Use the following command to describe the private endpoint using its ID:</p><p>bash</p><p>ï‚·  atlas privateEndpoints aws describe &lt;privateEndpointId&gt; [options]</p><p>Note the value for ENDPOINT SERVICE in the response, which shows the name of the private endpoint service associated with this private endpoint.</p><p>ï‚·  <strong>Create an Interface Endpoint in AWS</strong>: Run the command in the AWS CLI, replacing the placeholders with your values:</p><p>bash</p><p>aws ec2 create-vpc-endpoint --vpc-id {VPC-ID} \</p><p>--region {REGION} --service-name {SERVICE-NAME} \</p><p>ï‚·  --vpc-endpoint-type Interface --subnet-ids {SUBNET-IDS}</p><p>Ensure you specify at least one subnet; otherwise, AWS won't provision an interface endpoint.</p><p>ï‚·  <strong>Provide Interface Endpoint Info to Atlas</strong>: Use the Atlas CLI to provide the interface endpoint information to Atlas:</p><p>bash</p><ol><li>atlas privateEndpoints aws interfaces create &lt;endpointServiceId&gt; [options]</li></ol><p>Replace &lt;endpointServiceId&gt; with the ID noted earlier and set the privateEndpointId to your VPC Endpoint ID.</p><p><strong>Security Group Configuration</strong></p><p>For each resource that needs to connect to your Atlas clusters using AWS PrivateLink, the resource's security group must allow outbound traffic to the interface endpoint's private IP addresses on all ports. Follow these steps to configure the security group:</p><ol><li>In the AWS console, navigate to the VPC Dashboard.</li><li>Click <strong>Security Groups</strong>, then click <strong>Create security group</strong>.</li><li>Use the wizard to create a security group, ensuring you select your VPC.</li><li>Select the security group you just created, then click the <strong>Inbound Rules</strong> tab.</li><li>Click <strong>Edit Rules</strong> and add rules to allow all inbound traffic from each resource in your VPC that needs to connect to your Atlas cluster.</li><li>Click <strong>Save Rules</strong>.</li></ol><p><strong>Verify the Private Endpoint</strong></p><p>To verify that the AWS private endpoint is available, run the following command:</p><p>bash</p><p>atlas privateEndpoints aws interfaces describe &lt;interfaceEndpointId&gt; [options]</p><p>Check that the STATUS field's value is AVAILABLE.</p><p><strong>Setting Up AWS PrivateLink via Atlas UI</strong></p><ol><li>Select the organization and project from the navigation menu.</li><li>In the sidebar, click <strong>Network Access</strong> under the Security heading.</li><li>Click <strong>Add Private Endpoint</strong> and follow the prompts to enter your AWS VPC details.</li></ol><p><strong>Manage and Connect from Private Endpoints</strong></p><p>After setting up a private endpoint for a cluster in MongoDB Atlas, you can manage and connect to your Atlas private endpoint by following these steps:</p><p><strong>Access Requirements</strong></p><ul><li>To view private endpoints, you need <strong>Project Read Only</strong> access.</li><li>To delete private endpoints, you must have <strong>Project Owner</strong> access or higher.</li><li>Users with <strong>Organization Owner</strong> access must add themselves as a Project Owner to manage private endpoints.</li></ul><p><strong>Connecting to an Atlas Cluster via Private Endpoint</strong></p><ol><li><strong>Select Organization and Project</strong>:<ul><li>From the Organizations menu in the navigation bar, select the organization that contains your desired project.</li><li>From the Projects menu, select your project.</li></ul></li><li><strong>Access Clusters</strong>:<ul><li>Click on <strong>Clusters</strong> in the sidebar to display the Clusters page.</li></ul></li><li><strong>Connect to the Cluster</strong>:<ul><li>Click <strong>Connect</strong> for the cluster you want to connect to.</li></ul></li><li><strong>Database User Configuration</strong>:<ul><li>If prompted, create a new MongoDB user with access to the desired database(s) on the cluster. If you already have users configured, you can skip this step.</li><li>Enter the new user's <strong>Username</strong> and <strong>Password</strong> (or use the <strong>Autogenerate Secure Password</strong> option).</li><li>Click <strong>Create Database User</strong> to save the user.</li></ul></li><li><strong>Choose Your Connection Method</strong>:<ul><li>After adding a database user, click <strong>Choose Your Connection Method</strong> to get the connection string.</li></ul></li></ol><p><strong>Using the Atlas CLI</strong></p><p>To manage private endpoints using the Atlas CLI, you can use the following commands:</p><ul><li><strong>Describe a Private Endpoint</strong>:</li></ul><p>bash</p><p>ï‚·  atlas privateEndpoints aws describe &lt;privateEndpointId&gt; [options]</p><p>ï‚·  <strong>List All AWS Private Endpoints</strong>:</p><p>bash</p><p>ï‚·  atlas privateEndpoints aws list [options]</p><p>ï‚·  <strong>Describe an AWS Private Endpoint Interface</strong>:</p><p>bash</p><p>ï‚·  atlas privateEndpoints aws interfaces describe &lt;interfaceEndpointId&gt; [options]</p><p>ï‚·  <strong>Delete an AWS Private Endpoint</strong>:</p><p>bash</p><p>ï‚·  atlas privateEndpoints aws delete &lt;privateEndpointId&gt; [options]</p><p>ï‚·  <strong>Delete an AWS Private Endpoint Interface</strong>:</p><p>bash</p><ul><li>atlas privateEndpoints aws interfaces delete &lt;interfaceEndpointId&gt; [options]</li></ul><p>For Azure and Google Cloud, similar commands are available:</p><ul><li><strong>Azure Private Endpoint Commands</strong>:</li></ul><p>bash</p><p>atlas privateEndpoints azure describe &lt;privateEndpointId&gt; [options]</p><p>atlas privateEndpoints azure list [options]</p><p>atlas privateEndpoints azure delete &lt;privateEndpointId&gt; [options]</p><p>ï‚·  atlas privateEndpoints azure interfaces delete &lt;privateEndpointResourceId&gt; [options]</p><p>ï‚·  <strong>Google Cloud Private Endpoint Commands</strong>:</p><p>bash</p><p>atlas privateEndpoints gcp describe &lt;privateEndpointId&gt; [options]</p><p>atlas privateEndpoints gcp list [options]</p><p>atlas privateEndpoints gcp delete &lt;privateEndpointId&gt; [options]</p><ul><li>atlas privateEndpoints gcp interfaces delete &lt;id&gt; [options]</li></ul><p><strong>Managing Private Endpoints via Atlas UI</strong></p><ol><li><strong>Select Organization and Project</strong>:<ul><li>From the Organizations menu, select your organization.</li><li>From the Projects menu, select your project.</li></ul></li><li><strong>Access Network Access</strong>:<ul><li>In the sidebar, click <strong>Network Access</strong> under the Security heading.</li></ul></li><li><strong>Manage Private Endpoints</strong>:<ul><li>Click the <strong>Private Endpoint</strong> tab.</li><li>To remove a private endpoint, click <strong>Terminate</strong> next to the desired endpoint and confirm the action.</li></ul></li></ol><p><strong>Viewing Private Endpoint Status</strong></p><p>To check the status of each private endpoint:</p><ol><li><strong>Access the Network Access Page</strong>:<ul><li>In Atlas, select the organization and project from the navigation menu.</li><li>Click on <strong>Network Access</strong> under the Security heading in the sidebar.</li></ul></li><li><strong>Check the Private Endpoint Tab</strong>:<ul><li>Click the <strong>Private Endpoint</strong> tab to review the statuses of your private endpoints.</li></ul></li></ol><p><strong>Status Descriptions</strong></p><p><strong>Atlas Endpoint Service Status</strong>:</p><table><thead><tr><th><p><strong>Status</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Creating private link</p></td><td><p>Atlas is creating the network load balancer and VPC resources.</p></td></tr><tr><td><p>Failed</p></td><td><p>A system failure has occurred.</p></td></tr><tr><td><p>Available</p></td><td><p>The Atlas network load balancer and VPC endpoint service are ready to receive connection requests.</p></td></tr><tr><td><p>Deleting</p></td><td><p>Atlas is deleting the private endpoint service.</p></td></tr></tbody></table><p><strong>Endpoint Status</strong>:</p><table><thead><tr><th><p><strong>Status</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Not configured</p></td><td><p>Atlas created the network load balancer and VPC endpoint service, but AWS hasn't yet created the interface endpoint. Click Edit and complete the wizard to create the interface endpoint.</p></td></tr><tr><td><p>Pending acceptance</p></td><td><p>AWS has received the connection request from your interface endpoint to the Atlas VPC endpoint service.</p></td></tr><tr><td><p>Pending</p></td><td><p>AWS is establishing the connection between your interface endpoint and the Atlas VPC endpoint service.</p></td></tr><tr><td><p>Failed</p></td><td><p>AWS failed to establish a connection between Atlas VPC resources and the interface endpoint in your VPC. Click Edit, verify that the information you provided is correct, and then create the private endpoint again.</p></td></tr><tr><td><p>Available</p></td><td><p>Atlas VPC resources are connected to the interface endpoint in your VPC. You can connect to Atlas clusters in this region using AWS PrivateLink.</p></td></tr><tr><td><p>Deleting</p></td><td><p>Atlas is removing the interface endpoint from the private endpoint service.</p></td></tr></tbody></table><p><strong>Common Issues and Resolutions</strong></p><ol><li><strong>Interface Endpoint Fails</strong>:<ul><li>If you see the message: </li><li>No DNS entries found for endpoint vpce-&lt;guid&gt;, your endpoint must be provisioned in at least one subnet. Click "Edit" to fix the problem.</li><li><strong>Resolution</strong>: <ul><li>Click <strong>Edit</strong>.</li><li>Click <strong>Back</strong>.</li><li>Specify at least one subnet.</li><li>Follow the remaining instructions to create the AWS PrivateLink connection.</li></ul></li></ul></li><li><strong>Security Group Configuration</strong>:<ul><li>Ensure that the security group for each resource that needs to connect to your Atlas clusters allows outbound traffic to the interface endpoint's private IP addresses on all ports (1024-65535).</li><li>The interface endpoint's security group must allow inbound traffic on all ports from each resource that needs to connect.</li></ul></li></ol><p><strong>Testing Connectivity</strong></p><p>To test connectivity from your application to your Private Endpoint in Atlas, you can use the following commands:</p><ol><li><strong>Using nslookup</strong>:</li></ol><p>bash</p><p>ï‚·  nslookup -type=SRV _mongodb._tcp.cluster0-pl-0-k45tj.mongodb.net</p><p>ï‚·  <strong>Using telnet</strong>: Replace &lt;xyz&gt; with the appropriate identifier from your SRV record output:</p><p>bash</p><p>telnet pl-0-&lt;xyz&gt;.mongodb.net 1024</p><p>telnet pl-0-&lt;xyz&gt;.mongodb.net 1025</p><ol><li>telnet pl-0-&lt;xyz&gt;.mongodb.net 1026</li></ol><p><strong>Summary</strong></p><p>This guide provides a comprehensive overview of troubleshooting private endpoint connection issues in MongoDB Atlas. By checking the status of your private endpoints, ensuring proper security group configurations, and testing connectivity, you can effectively resolve common issues related to private endpoint connections.</p><p><strong>Domain 4: Database Backup and Recovery (13%)</strong></p><p>Objective 4.1: Backup and restore options for clusters.</p><p><strong>Cloud Backup in MongoDB Atlas:</strong></p><p>MongoDB Atlas provides a robust cloud backup solution that allows users to safeguard their data effectively. Below is a detailed explanation of the key features and functionalities related to cloud backups in MongoDB Atlas.</p><p><strong>Key Features of Cloud Backup</strong></p><ul><li><strong>Availability</strong>:<ul><li>Cloud backups are available for clusters hosted on: <ul><li>Microsoft Azure</li><li>Amazon Web Services (AWS)</li><li>Google Cloud Platform (GCP)</li></ul></li></ul></li><li><strong>Backup Activation</strong>:<ul><li>Users can enable cloud backup during: <ul><li>Cluster creation</li><li>Modification of an existing cluster</li></ul></li><li>To enable, toggle the "Turn on Cloud Backup" option to Yes in the cluster configuration modal.</li></ul></li><li><strong>Backup Compliance Policy</strong>:<ul><li>For strict data protection requirements, users can enable a Backup Compliance Policy to ensure the safety of backup data.</li></ul></li></ul><p><strong>Redundancy and Storage</strong></p><ul><li><strong>Snapshot Redundancy</strong>:<ul><li>Cloud backups inherit the snapshot redundancy of the cloud provider: <ul><li><strong>AWS</strong>: Stores objects across a minimum of three Availability Zones.</li><li><strong>Microsoft Azure</strong>: Uses locally redundant storage (LRS) to replicate data three times within a single data center.</li><li><strong>Google Cloud</strong>: Spreads data across multiple zones in the backup region.</li></ul></li></ul></li><li><strong>Multi-Region Snapshot Distribution</strong>:<ul><li>Users can enable this feature to create copies of snapshots and oplogs in other Atlas regions, ensuring data availability even if the primary region goes down.</li></ul></li></ul><p><strong>Important Considerations</strong></p><ul><li><strong>Legacy Backup Snapshots</strong>:<ul><li>If users previously ran Atlas clusters on version 4.4 or earlier, Legacy Backup snapshots are retained according to the legacy backup retention policy.</li><li>Restoring from Legacy Backup snapshots is deprecated; users are advised to restore to a local MongoDB cluster running version 4.4 or earlier.</li></ul></li><li><strong>User Permissions</strong>:<ul><li>To manage or restore backups, users must have Project Owner access.</li><li>Organization Owner access requires users to add themselves as a Project Owner to manage backups.</li></ul></li><li><strong>Sharded Clusters</strong>:<ul><li>Cloud backups support sharded clusters, but users cannot restore an existing snapshot to a cluster after adding or removing a shard. Snapshots can be restored to another cluster with a matching topology.</li></ul></li></ul><table><thead><tr><th><p><strong>Cloud Provider</strong></p></th><th><p><strong>Redundancy Method</strong></p></th></tr></thead><tbody><tr><td><p>AWS</p></td><td><p>Stores objects across a minimum of three Availability Zones</p></td></tr><tr><td><p>Microsoft Azure</p></td><td><p>Uses locally redundant storage (LRS) to replicate data three times</p></td></tr><tr><td><p>Google Cloud</p></td><td><p>Spreads data across multiple zones in the backup region</p></td></tr></tbody></table><p><strong>Single-Region Cluster Backups</strong></p><p>For single-region cluster backups, Atlas follows a specific algorithm to determine the order of nodes for snapshotting:</p><ol><li><strong>Snapshot on a Secondary</strong>: Prioritize taking snapshots from secondary nodes.</li><li><strong>Lowest Priority Node</strong>: If possible, snapshot the node with the lowest priority.</li><li><strong>Incremental Snapshots</strong>: Attempt to take incremental snapshots from one snapshot to the next.</li><li><strong>Lexicographical Order</strong>: If there are ties, snapshot nodes based on their hostname in lexicographical order.</li></ol><ul><li>If a selected node is unhealthy, Atlas will attempt to snapshot the next preferred node.</li><li>Snapshots are stored in the same cloud region as the cluster and are retained based on the configured retention policy.</li></ul><p><strong>Multi-Region Cluster Backups</strong></p><p>For multi-region cluster backups, the algorithm is slightly modified:</p><ol><li><strong>Highest Priority Region</strong>: Start by taking snapshots in the highest priority region.</li><li><strong>Snapshot on a Secondary</strong>: Prioritize secondary nodes.</li><li><strong>Lowest Priority Node</strong>: If possible, snapshot the node with the lowest priority.</li><li><strong>Incremental Snapshots</strong>: Attempt to take incremental snapshots.</li><li><strong>Lexicographical Order</strong>: If there are ties, snapshot nodes based on their hostname in lexicographical order.</li></ol><ul><li>Similar to single-region backups, if a selected node is unhealthy, Atlas will try the next preferred node.</li><li>Snapshots are retained based on the configured retention policy.</li></ul><p><strong>Global Cluster Backups</strong></p><p>Atlas can back up global clusters using cloud backups. When restoring, shards in the source cluster are restored to the corresponding shards in the target cluster in the same order as specified in the cluster configuration.</p><p><strong>Continuous Cloud Backups</strong></p><p>Continuous cloud backups allow for point-in-time restoration within a specified window. To enable continuous cloud backups, you can configure your backup policy using the Backup Policy Editor.</p><ul><li>Enabling continuous cloud backups may increase the monthly cost of your cluster.</li><li>Oplog backups are stored in the cloud provider's storage service (e.g., S3 for AWS, Azure Blob Storage for Azure, Google Cloud Storage for Google Cloud).</li></ul><p><strong>Important Considerations</strong></p><ul><li><strong>Causal Consistency</strong>: For clusters running MongoDB version 4.2 or later, Atlas maintains causal consistency when taking snapshots.</li><li><strong>Oplog Management</strong>: If continuous cloud backups are disabled or if the cluster experiences excessive writes, existing oplog backups may be deleted.</li><li><strong>CLI Commands</strong>: You can manage backups using the Atlas CLI. Here are some commands:</li></ul><p>bash</p><p># List cloud backup snapshots for your project and cluster</p><p>atlas backups snapshots list &lt;clusterName&gt; [options]</p><p># Describe a specific snapshot</p><p>atlas backups snapshots describe &lt;snapshotId&gt; [options]</p><p><strong>Viewing Snapshots</strong></p><p>To view existing snapshots for a cluster:</p><ol><li>Select the organization and project from the navigation bar.</li><li>Click on the cluster's name.</li><li>Click the Backup tab to view available snapshots.</li></ol><p>If the cluster has no Backup tab, backups are disabled for that cluster.</p><p><strong>Flex Cluster Backups in MongoDB Atlas</strong></p><p>MongoDB Atlas provides a specific backup strategy for Flex clusters, ensuring that data is regularly backed up while minimizing performance impacts. Below is a detailed overview of how Flex cluster backups work.</p><p><strong>Backup Process</strong></p><ul><li><strong>Automatic Snapshots</strong>:<ul><li>Atlas takes daily snapshots of Flex clusters automatically, starting 24 hours after the cluster is created.</li><li>Snapshots are always taken from a <strong>secondary node</strong> to minimize performance impact on the primary node.</li></ul></li><li><strong>Retention Policy</strong>:<ul><li>The last <strong>8 daily snapshots</strong> are retained.</li><li>Users can download or restore these snapshots to an Atlas cluster.</li></ul></li></ul><p><strong>User Permissions</strong></p><ul><li>To manage backups for a Flex cluster, users must have <strong>Project Owner</strong> access.</li><li>Users with <strong>Organization Owner</strong> access must add themselves as a Project Owner to manage backups.</li></ul><p><strong>Backup Limitations</strong></p><ul><li><strong>Custom Policies</strong>:<ul><li>Custom backup policies are not supported for Flex cluster snapshots. Atlas takes a single daily snapshot at the same time.</li></ul></li><li><strong>On-Demand Snapshots</strong>:<ul><li>On-demand snapshots are not supported for Flex clusters.</li></ul></li><li><strong>Restoration</strong>:<ul><li>Flex cluster snapshots can only be restored to replica sets, not to sharded clusters.</li></ul></li></ul><p><strong>Snapshot Storage Locations</strong></p><p>The following table indicates where Atlas stores Flex cluster snapshots based on the cluster location:</p><table><thead><tr><th><p><strong>Cluster Location</strong></p></th><th><p><strong>Snapshot Storage Location</strong></p></th></tr></thead><tbody><tr><td><p>Australia</p></td><td><p>Australia</p></td></tr><tr><td><p>Germany</p></td><td><p>Germany</p></td></tr><tr><td><p>Hong Kong</p></td><td><p>Australia</p></td></tr><tr><td><p>India, Singapore, Taiwan</p></td><td><p>Asia</p></td></tr><tr><td><p>USA</p></td><td><p>USA</p></td></tr><tr><td><p>All other cluster locations</p></td><td><p>Ireland</p></td></tr></tbody></table><p><strong>Viewing Snapshots</strong></p><p>To view existing snapshots for a Flex cluster:</p><ol><li>Select the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li>Select your desired project from the Projects menu in the navigation bar.</li><li>Click <strong>Clusters</strong> in the sidebar.</li><li>Click your cluster's name.</li><li>Click the <strong>Backup</strong> tab. If the cluster has no Backup tab, backups are disabled for that cluster.</li></ol><p>Alternatively, to view a list of all M10+ clusters with cloud backup enabled:</p><ol><li>Select the organization that contains your project from the Organizations menu.</li><li>Select your project from the Projects menu.</li><li>Click <strong>Backup</strong> under the Security heading in the sidebar.</li></ol><p><strong>Additional Notes</strong></p><ul><li>If you choose to retain backups from a terminated cluster, they remain accessible under their source cluster name until they expire or are deleted.</li><li>The Atlas CLI does not support Flex cluster backup snapshots.</li></ul><p><strong>Shared Cluster Backups in MongoDB Atlas</strong></p><p>MongoDB Atlas provides a backup solution for M2 and M5 Shared clusters, ensuring that your data is regularly backed up with minimal performance impact. Below is a detailed overview of how shared cluster backups work.</p><p><strong>Backup Process</strong></p><ul><li><strong>Automatic Snapshots</strong>:<ul><li>Atlas takes daily snapshots of M2 and M5 Shared clusters automatically, starting 24 hours after the cluster is created.</li><li>Snapshots are always taken from a <strong>secondary node</strong> to minimize performance impact on the primary node.</li></ul></li><li><strong>Retention Policy</strong>:<ul><li>The last <strong>8 daily snapshots</strong> are retained, which can be downloaded or restored to an Atlas cluster.</li></ul></li></ul><p><strong>User Permissions</strong></p><ul><li>To manage backups for a cluster, users must have <strong>Project Owner</strong> access.</li><li>Users with <strong>Organization Owner</strong> access must add themselves as a Project Owner to manage backups.</li></ul><p><strong>Backup Limitations</strong></p><ul><li><strong>Custom Policies</strong>:<ul><li>Custom backup policies are not supported for M2 and M5 cluster snapshots. Atlas takes a single daily snapshot at the same time.</li></ul></li><li><strong>On-Demand Snapshots</strong>:<ul><li>On-demand snapshots are not supported for M2 and M5 clusters.</li></ul></li><li><strong>Restoration Restrictions</strong>:<ul><li>You cannot restore M2 and M5 snapshots to a sharded cluster; they can only be restored to replica sets.</li><li>Serverless instance snapshots cannot be restored to M2 and M5 clusters.</li></ul></li><li><strong>Version Compatibility</strong>:<ul><li>Starting with MongoDB 5.0, you can restore snapshots of clusters that run only the two most recent major versions of MongoDB to M2 and M5 clusters. For example: <ul><li>Snapshots from clusters running MongoDB 4.4 can be restored to an M2 or M5 cluster running MongoDB 5.0.</li><li>Snapshots from earlier versions than 4.4 cannot be restored to an M2 or M5 cluster running MongoDB 5.0.</li></ul></li></ul></li></ul><p><strong>Viewing Snapshots</strong></p><p>To view existing snapshots for a shared cluster:</p><ol><li>Select the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li>Select your desired project from the Projects menu in the navigation bar.</li><li>Click <strong>Clusters</strong> in the sidebar.</li><li>Click your cluster's name.</li><li>Click the <strong>Backup</strong> tab. If the cluster has no Backup tab, then Atlas backups are disabled for that cluster.</li></ol><p>Alternatively, to view a list of all M10+ clusters with cloud backup enabled:</p><ol><li>Select the organization that contains your project from the Organizations menu.</li><li>Select your project from the Projects menu.</li><li>In the sidebar, click <strong>Backup</strong> under the Security heading.</li></ol><p>If you choose to retain backups from a terminated cluster, they remain accessible under their source cluster name until they expire or are deleted.</p><p>Additionally, Atlas displays existing M2 or M5 snapshots in the All Daily Snapshots table, from which you can restore or download your existing snapshots.</p><p>Objective 4.2: Backup policies based on business requirements.</p><p><strong>Manage Backup Policies in MongoDB Atlas</strong></p><p>MongoDB Atlas allows users to view and customize backup policies for automated backups, ensuring that data is regularly backed up according to specific schedules. Hereâ€™s a detailed overview of how to manage backup policies in Atlas.</p><p><strong>Required Access</strong></p><p>To manage backup policies, users need specific access levels:</p><ul><li><strong>View Backup Policies</strong>: Requires Project Read Only access. Users with Organization Owner access must add themselves as a Project Read Only to view backup policies.</li><li><strong>Modify or Delete Backup Policies</strong>: Requires Project Owner access. Users with Organization Owner access must add themselves as a Project Owner to modify or delete backup policies.</li></ul><p><strong>Viewing Backup Policies</strong></p><p>To view the backup policies for a cluster:</p><ol><li>Select the organization from the Organizations menu in the navigation bar.</li><li>Select the desired project from the Projects menu.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li><li>Click on the cluster's name.</li><li>Click the <strong>Backup</strong> tab to view the backup policy details.</li></ol><p>If the cluster does not have a Backup tab, backups are disabled for that cluster.</p><p><strong>Configuring Backup Policies</strong></p><p>To configure a backup policy using the Backup Policy Editor:</p><ol><li>Select the organization and project as described above.</li><li>Click on <strong>Clusters</strong> and then on your cluster's name.</li><li>Click the <strong>Backup</strong> tab.</li><li>In the Backup Policy Editor, you can set: <ul><li><strong>Snapshot Time</strong>: Specify the time of day (in UTC) when snapshots are taken.</li><li><strong>Frequency and Retention</strong>: Define how often snapshots are taken and how long they are retained.</li><li><strong>Point-in-Time (PIT) Restores</strong>: If enabled, specify a PIT window that allows restoration to any point in time within the last X days.</li></ul></li></ol><p><strong>Example Backup Policy</strong></p><p>The default backup policy may look like this:</p><table><thead><tr><th><p><strong>Policy Type</strong></p></th><th><p><strong>Tier</strong></p></th><th><p><strong>Continuous Cloud Backup</strong></p></th><th><p><strong>Snapshot Taken</strong></p></th><th><p><strong>Snapshot Retained</strong></p></th></tr></thead><tbody><tr><td><p>Hourly</p></td><td><p>NVMe</p></td><td><p>Enabled</p></td><td><p>Every 12 hours</p></td><td><p>2 days</p></td></tr><tr><td><p>Hourly</p></td><td><p>non-NVMe</p></td><td><p>Enabled</p></td><td><p>Every 6 hours</p></td><td><p>2 days</p></td></tr><tr><td><p>Daily</p></td><td><p>All</p></td><td><p>Either</p></td><td><p>Every day</p></td><td><p>7 days</p></td></tr><tr><td><p>Weekly</p></td><td><p>All</p></td><td><p>Either</p></td><td><p>Every Saturday</p></td><td><p>4 weeks</p></td></tr><tr><td><p>Monthly</p></td><td><p>All</p></td><td><p>Either</p></td><td><p>Last day of the month</p></td><td><p>12 months</p></td></tr><tr><td><p>Yearly</p></td><td><p>All</p></td><td><p>Either</p></td><td><p>Every 1st of December</p></td><td><p>1 year</p></td></tr></tbody></table><p><strong>Configuring the Restore Window</strong></p><p>To specify the restore window duration for point-in-time restores:</p><ol><li>Select the desired duration from the Restore Window list.</li><li>Ensure that the restore window does not exceed the Hourly Snapshot Retention Time.</li></ol><p><strong>Extra Snapshot Retention</strong></p><p>If a Backup Compliance Policy is enabled, you can configure extra snapshot retention to retain snapshots beyond the standard protection period. This allows for additional flexibility in managing backups.</p><p><strong>Steps to Configure Extra Snapshot Retention</strong></p><ol><li>In the Extra Snapshot Retention section, select the frequency unit.</li><li>Specify the extra snapshot retention time for each frequency unit.</li><li>Click <strong>Save Changes</strong>.</li></ol><p><strong>Important Considerations</strong></p><ul><li>The retention time must be equal to or longer than the frequency unit.</li><li>If a backup frequency unit is deleted, the associated snapshots remain until they expire or are deleted.</li><li>If a Backup Compliance Policy is enabled, only MongoDB support can delete policy items specified in that policy.</li></ul><p><strong>Manage Your Backup Snapshots in MongoDB Atlas</strong></p><p>In MongoDB Atlas, managing backup snapshots is an essential part of ensuring data safety and recovery. Hereâ€™s a detailed overview of how to manage your backup snapshots effectively.</p><p><strong>Snapshot Operations</strong></p><p>While most snapshot operations are automated according to your backup policies, you can also perform the following actions:</p><ul><li><strong>View Snapshots</strong>: Check the existing snapshots for your clusters.</li><li><strong>Manually Delete Snapshots</strong>: Remove snapshots that are no longer needed.</li><li><strong>Initiate On-Demand Snapshots</strong>: Create snapshots outside of the scheduled backup times.</li></ul><p><strong>Access Requirements</strong></p><p>To perform snapshot operations, you need specific access roles:</p><ul><li><strong>To Take or Delete a Snapshot</strong>: You must have Project Owner access. If you have Organization Owner access, you need to add yourself as a Project Owner to perform these actions.</li><li><strong>To View Snapshots</strong>: You need Project Read Only access. Similarly, Organization Owners must add themselves as Project Read Only to view backup policies.</li></ul><p><strong>Deleting Snapshots</strong></p><p>You can delete snapshots using either the Atlas CLI or the Atlas UI. Hereâ€™s how:</p><p><strong>Using the Atlas CLI</strong></p><p>To delete a backup snapshot, run the following command:</p><p>bash</p><p>atlas backups snapshots delete &lt;snapshotId&gt; [options]</p><p>For more details on command syntax and parameters, refer to the Atlas CLI documentation for deleting snapshots.</p><p><strong>Using the Atlas UI</strong></p><p>To delete a snapshot from the Atlas UI, follow these steps:</p><ol><li>Select the organization that contains your project from the Organizations menu.</li><li>Select your project from the Projects menu.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li><li>Click your cluster's name.</li><li>Click the <strong>Backup</strong> tab. If there is no Backup tab, backups are disabled for that cluster.</li><li>Under the Snapshots tab, select the snapshot you wish to delete and confirm the deletion.</li></ol><p>Deleting the original snapshot will propagate the deletion to all copies of that snapshot.</p><p><strong>Viewing Snapshots</strong></p><p>To view existing snapshots for a cluster:</p><ol><li>Select the organization and project as described above.</li><li>Click on <strong>Clusters</strong> and then on your cluster's name.</li><li>Click the <strong>Backup</strong> tab to see the snapshots.</li></ol><p>You can also view a list of all M10+ clusters with cloud backup enabled by navigating to the Backup section under the Security heading in the sidebar.</p><p><strong>Snapshot Types</strong></p><p>Atlas displays both on-demand and policy-based snapshots. You can filter the view to see only policy-based snapshots or only on-demand snapshots.</p><ul><li><strong>Policy-Based Snapshots</strong>: These are generated according to your backup policy and will show the frequency of the policy item that generated them (e.g., Yearly, Monthly, Weekly, Daily, or Hourly).</li><li><strong>On-Demand Snapshots</strong>: These are created manually when needed.</li></ul><p><strong>Creating On-Demand Snapshots</strong></p><p>To create an on-demand snapshot:</p><ol><li>Select the organization and project as described above.</li><li>Click on <strong>Clusters</strong> and then on your cluster's name.</li><li>Click the button below the cluster name and select <strong>Take Snapshot Now</strong>.</li><li>In the On-Demand Snapshot modal, enter the retention period and a description for the snapshot.</li><li>Click <strong>Take Snapshot</strong> to create the snapshot.</li></ol><p><strong>Important Notes</strong></p><ul><li>If there is already an on-demand snapshot with a status of queued or inProgress, you must wait until it completes before taking another.</li><li>If you have a Backup Compliance Policy enabled with a specified retention time for on-demand snapshots, you cannot decrease the retention time after the snapshot is taken.</li></ul><p><strong>Monitoring Snapshots</strong></p><p>To monitor the status of a specific backup snapshot, you can use the following command in the Atlas CLI:</p><p>bash</p><p>atlas backups snapshots watch &lt;snapshotId&gt; [options]</p><p>This allows you to track when the snapshot becomes available.</p><p><strong>Configure Atlas to Automatically Copy Snapshots to Other Regions</strong></p><p>MongoDB Atlas allows you to configure automatic distribution of snapshots and oplogs across multiple regions. This feature enhances disaster recovery capabilities and ensures that you can restore your cluster even if the primary region experiences an outage.</p><p><strong>Key Features</strong></p><ul><li><strong>Disaster Recovery</strong>: By distributing snapshots across regions, you can restore your cluster quickly if the primary region goes down.</li><li><strong>Optimized Restores</strong>: Atlas can perform optimized direct attach restores for clusters in the same project and regions where snapshots are stored, reducing recovery time.</li><li><strong>Oplog Distribution</strong>: Copied oplogs can be used for continuous cloud backup from secondary regions if the primary region goes down.</li></ul><p><strong>Required Access</strong></p><p>To modify or delete backup policies, you must have Project Owner access. Users with Organization Owner access must add themselves as a Project Owner to make changes.</p><p><strong>Procedure to Configure Snapshot Distribution</strong></p><ol><li><strong>Navigate to the Backup Policy Tab</strong>:<ul><li>Go to the Backup Policy tab and expand the Additional Backup Copies section.</li></ul></li><li><strong>Enable Snapshot Distribution</strong>:<ul><li>Toggle the <strong>Copy to other regions</strong> option on. A table of distribution policies will appear, pre-populated with the cluster's current regions.</li></ul></li></ol><p><strong>Note</strong>: For global clusters, you can enable or disable this setting independently for each zone.</p><ol><li><strong>Select Regions for Distribution</strong>:<ul><li>In the <strong>Copy to other regions</strong> table, click <strong>Choose a region</strong> in the Region column and select the region to distribute snapshots to.</li><li>You can only select regions from the same cloud provider as the primary region.</li></ul></li><li><strong>Configure Snapshot Policies</strong>:<ul><li>In the Snapshots column, click the arrow to view available snapshot policies for the cluster. You can enable or disable any combination of the available policies on a region-by-region basis.</li></ul></li></ol><p><strong>Note</strong>: If overlapping policy items generate the same snapshot, Atlas associates the snapshot with the policy item that has the longest retention time.</p><ol><li><strong>Enable Oplog Distribution</strong>:<ul><li>If Continuous Cloud Backup is enabled for the cluster, you can enable oplog distribution for each additional region.</li></ul></li></ol><table><thead><tr><th><p><strong>Region</strong></p></th><th><p><strong>Hourly</strong></p></th><th><p><strong>Daily</strong></p></th><th><p><strong>Weekly</strong></p></th><th><p><strong>Monthly</strong></p></th><th><p><strong>Yearly</strong></p></th><th><p><strong>On Demand</strong></p></th><th><p><strong>Point-in-Time</strong></p></th></tr></thead><tbody><tr><td><p>us-east-1 (Original)</p></td><td><p>Every 6 hours</p></td><td><p>Every 2 days</p></td><td><p>Every Sunday</p></td><td><p>Last day of the month</p></td><td><p>Dec. 1st</p></td><td><p>Yes</p></td><td><p>Yes</p></td></tr><tr><td><p>us-east-2 (Copy)</p></td><td><p>Disabled</p></td><td><p>Disabled</p></td><td><p>Enabled</p></td><td><p>Enabled</p></td><td><p>Enabled</p></td><td><p>Disabled</p></td><td><p>No</p></td></tr><tr><td><p>us-west-1 (Copy)</p></td><td><p>Enabled</p></td><td><p>Enabled</p></td><td><p>Enabled</p></td><td><p>Enabled</p></td><td><p>Enabled</p></td><td><p>Enabled</p></td><td><p>Yes</p></td></tr><tr><td><p>us-west-2 (Copy)</p></td><td><p>Enabled</p></td><td><p>Enabled</p></td><td><p>Disabled</p></td><td><p>Disabled</p></td><td><p>Disabled</p></td><td><p>Enabled</p></td><td><p>Yes</p></td></tr></tbody></table><p><strong>Deleting Snapshot Distribution Policies</strong></p><p>To delete a policy for snapshot distribution:</p><ol><li>In the Action column, click the delete icon.</li><li>In the dialog box, select either <strong>Keep all snapshots in this region</strong> or <strong>Delete all snapshots in this region</strong>, then click <strong>Confirm</strong>.</li></ol><p>Alternatively, to disable all snapshot distribution policies within a single-region cluster or global cluster zone, toggle the <strong>Copy to other regions</strong> option off.</p><p><strong>Important Notes</strong></p><ul><li>In the event of a cloud provider service outage in a region configured for automatic snapshot distribution, Atlas will attempt to restore using snapshots stored in copy regions.</li><li>If you have a Backup Compliance</li></ul><p><strong>Configure a Backup Compliance Policy in MongoDB Atlas</strong></p><p>If you have strict data protection requirements, enabling a Backup Compliance Policy in MongoDB Atlas can help protect your backup data. Hereâ€™s a detailed overview of how to configure and manage a Backup Compliance Policy.</p><p><strong>Important Considerations</strong></p><p><strong>Approval for Disabling</strong></p><ul><li><strong>MongoDB Support Approval</strong>: After enabling a Backup Compliance Policy, only MongoDB support can approve requests to disable it. The request must come from the security or legal representative specified for the policy.</li><li><strong>Verification Process</strong>: The representative must complete an extensive verification process to disable the policy.</li></ul><p><strong>Prohibited Actions</strong></p><p>When a Backup Compliance Policy is enabled, the following actions are restricted:</p><ul><li><strong>Disable the Policy</strong>: Cannot be done without MongoDB support.</li><li><strong>Modify Backup Policy</strong>: Cannot lower the minimum requirements set by the Backup Compliance Policy.</li><li><strong>Delete Backup Snapshots</strong>: Users cannot delete snapshots.</li><li><strong>Decrease Retention Time</strong>: Cannot reduce the retention time for snapshots after they are taken.</li><li><strong>Disable Cloud Backup</strong>: Cannot disable cloud backup if the policy requires it.</li><li><strong>Disable Continuous Cloud Backup</strong>: Requires support approval if the policy mandates point-in-time restore.</li><li><strong>Reduce Restore Window</strong>: Requires support approval.</li><li><strong>Delete Policy Items</strong>: Cannot delete items specified in the policy without support approval.</li><li><strong>Delete Projects</strong>: Cannot delete a project if any snapshots exist.</li></ul><p><strong>Configuring a Backup Compliance Policy</strong></p><p>To configure a Backup Compliance Policy, follow these steps:</p><ol><li><strong>Access Requirements</strong>: Ensure you have Project Owner access. If you have Organization Owner access, add yourself as a Project Owner.</li><li><strong>Enable the Policy</strong>:<ul><li>Use the Atlas CLI to enable the Backup Compliance Policy:</li></ul></li></ol><p>bash</p><p>ï‚·  atlas backups compliancePolicy enable [options]</p><p>ï‚·  <strong>Set Frequency and Retention</strong>:</p><ul><li>Specify the frequency and retention time for backups. Each row in the Backup Policy Frequency and Retention table represents a backup policy item.</li><li>You can add frequency units and specify how often backups should occur and how long they should be retained.</li></ul><p>ï‚·  <strong>Point-in-Time Restore</strong>:</p><ul><li>Toggle the option for requiring point-in-time restore for all clusters.</li><li>Specify a restore window, ensuring it does not exceed the hourly snapshot retention time.</li></ul><p>ï‚·  <strong>Encryption Settings</strong>:</p><ul><li>Toggle the option for requiring encryption at rest using customer key management.</li></ul><p>ï‚·  <strong>Save the Policy</strong>: After configuring the settings, save the Backup Compliance Policy.</p><table><thead><tr><th><p><strong>Frequency Unit</strong></p></th><th><p><strong>Every</strong></p></th><th><p><strong>Retention Time</strong></p></th></tr></thead><tbody><tr><td><p>Hourly</p></td><td><p>6</p></td><td><p>2 days</p></td></tr><tr><td><p>Daily</p></td><td><p>1</p></td><td><p>7 days</p></td></tr><tr><td><p>Weekly</p></td><td><p>1</p></td><td><p>4 weeks</p></td></tr></tbody></table><p><strong>Viewing Backup Compliance Policy</strong></p><p>To view projects that have a Backup Compliance Policy enabled:</p><ol><li>Select the organization from the Organizations menu.</li><li>Select the desired project from the Projects menu.</li><li>Navigate to the Project Settings to see the Backup Compliance Policy details.</li></ol><p><strong>Important Notes</strong></p><ul><li><strong>Backup Storage Costs</strong>: Enabling a Backup Compliance Policy limits your ability to reduce backup storage costs. You cannot adjust retention or delete backups to lower costs.</li><li><strong>Automatic Cloud Backup</strong>: All new and existing clusters will have Cloud Backup automatically enabled and will adhere to the project-level Backup Compliance Policy.</li><li><strong>Activity Feed</strong>: Any changes to the Backup Compliance Policy will be reflected in the Project Activity Feed.</li></ul><p><strong>Storage Engine and Cloud Backup Encryption in MongoDB Atlas</strong></p><p>MongoDB Atlas ensures the security of your data at rest by encrypting all snapshots using the standard storage encryption methods provided by your cloud provider. Hereâ€™s a detailed overview of how encryption works in Atlas, especially when using Customer Key Management.</p><p><strong>Encryption Overview</strong></p><ul><li><strong>Standard Encryption</strong>: All snapshots are encrypted using the cloud provider's standard encryption methods, which are managed by the provider.</li><li><strong>Customer Key Management</strong>: If you enable <strong>Encryption at Rest using Customer Key Management</strong>, Atlas applies an additional layer of encryption to your snapshots using the Key Management Service (KMS) provider.</li></ul><p><strong>Key Management Service (KMS) Providers</strong></p><ol><li><strong>AWS KMS</strong>:<ul><li>For clusters using AWS IAM as their KMS, Atlas utilizes the project's customer master key (CMK) and AWS IAM user or role credentials at the time of the snapshot.</li><li>This provides an additional layer of encryption on top of the existing encryption applied to all Atlas storage and snapshot volumes.</li><li>Oplog data collected for point-in-time (PIT) restores is also encrypted with the customer's CMK.</li></ul></li><li><strong>Azure Key Vault</strong>:<ul><li>For clusters using Azure Key Vault as their KMS, Atlas uses the project's Key Identifier, Key Vault Credentials, and Active Directory application account credentials at the time of the snapshot.</li><li>Similar to AWS, this adds an additional layer of encryption to the existing storage encryption.</li></ul></li></ol><p><strong>Accessing and Managing Encrypted Snapshots</strong></p><p><strong>Viewing the Key Used to Encrypt a Snapshot</strong></p><p>To view the encryption key ID for a snapshot:</p><ol><li>Select the organization that contains your project from the Organizations menu.</li><li>Select your desired project from the Projects menu.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li><li>Click your cluster's name.</li><li>Click the <strong>Backup</strong> tab. If the cluster has no Backup tab, backups are disabled for that cluster.</li><li>Note the Encryption Key ID for each snapshot. Atlas lists the Key Identifier used to encrypt the snapshot. Unencrypted snapshots will display "Not enabled."</li></ol><p><strong>Important Considerations</strong></p><ul><li><strong>Restoration Requirements</strong>: Atlas requires access to the encryption key associated with the snapshot's Encryption Key ID to successfully restore that snapshot.</li><li><strong>Deleting Encryption Keys</strong>: Before deleting an Encryption Key ID, check all backup-enabled clusters in the project for any snapshots still using that key. Once an encryption key is deleted, all snapshots encrypted with that key become inaccessible and unrecoverable.</li><li><strong>Automatic Deletion of Backups</strong>: Atlas automatically deletes backups according to the backup scheduling and retention policies. Once all snapshots depending on a given Encryption Key ID are deleted, you can safely delete the key.</li><li><strong>Disabling Encryption Keys</strong>: If you disable an Encryption Key ID, you must re-enable it before restoring a snapshot encrypted with that key.</li></ul><p><strong>Access an Encrypted Snapshot in MongoDB Atlas</strong></p><p>When using <strong>Encryption at Rest</strong> with <strong>Customer Key Management</strong> in MongoDB Atlas, the mongod data files in your snapshots are encrypted. To access and restore these snapshots, you need to ensure that the mongod instance can access a KMIP (Key Management Interoperability Protocol) server that provides the appropriate decryption key. Below are the steps and considerations for accessing an encrypted snapshot.</p><p><strong>Considerations</strong></p><ul><li><strong>KMIP Proxy Standalone</strong>: You will need to download the KMIP Proxy Standalone binary for your operating system to access the encrypted data files.</li><li><strong>Credentials</strong>: By default, the KMIP Proxy uses credentials stored in the /&lt;dbPath&gt;/cloudProviderCredentials/&lt;keyID&gt;.&lt;cloudProvider&gt;.metadata file. If you rotate keys, these credentials will reflect the latest key rotation.</li><li><strong>Role-Based Access</strong>: If you use role-based access to your encryption key, the metadata file may not contain valid credentials. You will need to update it or provide temporary credentials.</li></ul><p><strong>Example Metadata File Update</strong></p><p>If you need to update the metadata file, it should look like this:</p><p>json</p><p>{</p><p>  "accessKeyId": "TemporaryAccessKeyId",</p><p>  "secretAccessKey": "TemporarySecretAccessKey",</p><p>  "roleId": "",</p><p>  "region": "us-east-1"</p><p>}</p><p><strong>Procedure to Access an Encrypted Snapshot</strong></p><ol><li><strong>Select Your Organization and Project</strong>:<ul><li>From the Organizations menu, select the organization that contains your project.</li><li>From the Projects menu, select your desired project.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li></ul></li><li><strong>Access the Backup Tab</strong>:<ul><li>Click on your cluster's name.</li><li>Click the <strong>Backup</strong> tab. If there is no Backup tab, backups are disabled for that cluster.</li></ul></li><li><strong>Download the Snapshot</strong>:<ul><li>Click on the <strong>Snapshots</strong> tab.</li><li>In the Actions column, expand the Actions menu and click <strong>Download</strong> for the snapshot you want to download.</li><li>Atlas prepares the snapshot and generates a one-time use download link that expires after four hours. You will receive this link via email.</li></ul></li><li><strong>Download KMIP Proxy</strong>:<ul><li>In the Preparing Snapshot Download modal, click <strong>Download KMIP Proxy</strong> and select the binary for your operating system.</li></ul></li><li><strong>Run the KMIP Proxy</strong>:<ul><li>Open a terminal or command prompt and invoke the following command with the specified parameters:</li></ul></li></ol><p>bash</p><p>kmipProxyStandalone -awsAccessKey &lt;accessKey&gt; -awsSecretAccessKey &lt;secretAccessKey&gt; \</p><p>  -awsSessionToken &lt;token&gt; -awsRegion &lt;region&gt; -cloudProvider aws \</p><p>  -dbpath &lt;dbpath&gt; -kmipPort &lt;kmipPort&gt; -mongodPort &lt;mongodPort&gt;</p><p><strong>Restore from a Snapshot Using Encryption at Rest</strong></p><p>MongoDB Atlas allows you to restore data from a snapshot of a cluster that uses <strong>Encryption at Rest</strong> with <strong>Customer Key Management</strong>. Hereâ€™s a detailed overview of the requirements, limitations, and steps to perform the restoration.</p><p><strong>Requirements and Limitations</strong></p><ul><li><strong>Cluster Type</strong>: This feature is only available for M10+ dedicated clusters.</li><li><strong>Encryption Provider</strong>: You can only restore to a cluster that uses the same encryption provider as the source cluster. Snapshots taken from clusters without Encryption at Rest cannot be restored to a cluster with it.</li><li><strong>DefaultRWConcern</strong>: If the DefaultRWConcern value on the source snapshot differs from the target cluster, Atlas overrides the value on the source snapshot with the value on the target cluster.</li><li><strong>Project Compatibility</strong>: When restoring from a snapshot in a different project, ensure that the target project has a cluster with Encryption at Rest enabled. If not, you can either deploy a new cluster with Encryption at Rest or enable it in an existing cluster.</li><li><strong>Data Deletion</strong>: Atlas deletes all existing data on the target cluster prior to the restore. The target cluster may be unavailable during the restoration process.</li></ul><p><strong>Optimization Tips</strong></p><p>To optimize performance and reduce the time it takes to restore, consider the following:</p><ul><li>Select a target cluster that isn't global or multi-cloud.</li><li>Ensure the target cluster belongs to the same Atlas project and cloud provider region as the snapshot.</li><li>Choose a cluster tier with the same storage capacity as the original volume used by the source cluster.</li><li>If using AWS, select configured IOPS that fall within the configured range.</li><li>Avoid using NVMe storage for the target cluster, as it can degrade restore performance.</li></ul><p><strong>Steps to Restore from a Snapshot</strong></p><ol><li><strong>Select Organization and Project</strong>:<ul><li>From the Organizations menu, select the organization containing your desired project.</li><li>From the Projects menu, select your project.</li></ul></li><li><strong>Access Clusters</strong>:<ul><li>Click on <strong>Clusters</strong> in the sidebar to display the Clusters page.</li></ul></li><li><strong>Select Cluster</strong>:<ul><li>Click on your cluster's name.</li></ul></li><li><strong>Open Backup Tab</strong>:<ul><li>Click the <strong>Backup</strong> tab. If there is no Backup tab, backups are disabled for that cluster.</li></ul></li><li><strong>Restore Snapshot</strong>:<ul><li>In the Actions column, expand the Actions menu and click <strong>Restore</strong> for the desired snapshot.</li><li>In the Restore dialog box, select the target Atlas Project to which you want to restore.</li></ul></li><li><strong>Confirm Restoration</strong>:<ul><li>Ensure the target cluster runs the same or a greater version of MongoDB as the snapshot.</li><li>After the restoration, Atlas triggers a key rotation for the MongoDB encryption key.</li></ul></li></ol><table><thead><tr><th><p><strong>Error</strong></p></th><th><p><strong>Result</strong></p></th></tr></thead><tbody><tr><td><p>Can't restore a non-encrypted snapshot to a cluster with Encryption at Rest enabled.</p></td><td><p>The snapshot can't be restored to Atlas.</p></td></tr><tr><td><p>Target cluster doesn't have encryption enabled.</p></td><td><p>You can either deploy a new target cluster with Encryption at Rest or enable it on your desired target cluster.</p></td></tr><tr><td><p>Encryption provider of target cluster doesn't match selected snapshot's encryption provider.</p></td><td><p>The encryption provider for the snapshot and target cluster don't match. You can either create a new snapshot with the same encryption provider or change the encryption provider for the target cluster.</p></td></tr><tr><td><p>Encryption credentials on snapshot aren't present.</p></td><td><p>Atlas can't restore a snapshot whose encryption key was deleted.</p></td></tr></tbody></table><p><strong>Export Cloud Backup Snapshot in MongoDB Atlas</strong></p><p>MongoDB Atlas allows you to export your Cloud Backup snapshots to object storage services like AWS S3 and Azure Blob Storage. Hereâ€™s a detailed overview of how to manage exports, including supported services, export formats, and required configurations.</p><p><strong>Supported Storage Services</strong></p><p>Atlas currently supports the following object storage services for exporting snapshots:</p><ul><li><strong>AWS S3 buckets</strong></li><li><strong>Azure Blob Storage</strong></li></ul><p><strong>How Atlas Exports Snapshots</strong></p><p>You can manually export individual snapshots or set up an export policy for automatic exports. The export policy requires you to specify a frequency:</p><ul><li>Daily</li><li>Weekly</li><li>Monthly</li><li>Yearly</li></ul><p>Atlas will automatically export any backup snapshot that matches the specified export frequency.</p><p><strong>Example Scenario</strong></p><p>If you have a backup policy that sets a weekly and monthly snapshot schedule, and an export policy that sets a monthly export frequency, Atlas will export only the monthly snapshot if it coincides with the weekly snapshot. To export weekly snapshots as well, you would need to update the export policy to include weekly exports.</p><p><strong>Exported Data Format</strong></p><p>Atlas exports documents in gzip-compressed Extended JSON (v2) format. The exported files are stored in the following path on your object store:</p><p>/exported_snapshots/&lt;orgName&gt;/&lt;projectName&gt;/&lt;clusterName&gt;/&lt;initiationDateOfSnapshot&gt;/&lt;timestamp&gt;/&lt;dbName&gt;/&lt;collectionName&gt;/&lt;shardName&gt;.&lt;increment&gt;.json.gz</p><p><strong>Path Components</strong></p><table><thead><tr><th><p><strong>Component</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>&lt;orgName&gt;</p></td><td><p>Name of your Atlas organization.</p></td></tr><tr><td><p>&lt;projectName&gt;</p></td><td><p>Name of your Atlas project.</p></td></tr><tr><td><p>&lt;clusterName&gt;</p></td><td><p>Name of your Atlas cluster.</p></td></tr><tr><td><p>&lt;initiationDateOfSnapshot&gt;</p></td><td><p>Date when the snapshot was taken.</p></td></tr><tr><td><p>&lt;timestamp&gt;</p></td><td><p>Timestamp when the export job was created.</p></td></tr><tr><td><p>&lt;dbName&gt;</p></td><td><p>Name of the database in the Atlas cluster.</p></td></tr><tr><td><p>&lt;collectionName&gt;</p></td><td><p>Name of the Atlas collection.</p></td></tr><tr><td><p>&lt;shardName&gt;</p></td><td><p>Name of the replica set or primary shard.</p></td></tr><tr><td><p>&lt;increment&gt;</p></td><td><p>Count that increments as chunks are uploaded.</p></td></tr></tbody></table><p><strong>Limitations</strong></p><ul><li>You cannot export fallback snapshots.</li><li>Only one active export per snapshot is allowed.</li><li>Exporting view collections or system collections (except for &lt;database&gt;.system.js) is not supported.</li><li>Snapshots from clusters with IP-restricted Encryption at Rest enabled cannot be exported.</li><li>Snapshots from projects configured for Private Endpoints cannot be exported.</li></ul><p><strong>Required Access</strong></p><p>To manage Cloud Backup snapshots, you must have Project Owner access. Users with Organization Owner access must add themselves as a Project Owner to manage snapshots.</p><p><strong>Prerequisites for Exporting</strong></p><p>To export your Cloud Backup snapshots, you need an M10 or higher Atlas cluster with Cloud Backup enabled. Additionally, you must configure access for the object storage service:</p><p><strong>For AWS S3</strong></p><ol><li><strong>Configure AWS IAM Role</strong>: Create a role with STS:AssumeRole that grants Atlas access to your AWS resources.</li><li><strong>Set IAM Role Policy</strong>: Grant Atlas write access with the following policy:</li></ol><p>json</p><p>{</p><p>  "Version": "2012-10-17",</p><p>  "Statement": [</p><p>    {</p><p>      "Effect": "Allow",</p><p>      "Action": "s3:GetBucketLocation",</p><p>      "Resource": "arn:aws:s3:::bucket-name"</p><p>    },</p><p>    {</p><p>      "Effect": "Allow",</p><p>      "Action": "s3:PutObject",</p><p>      "Resource": "arn:aws:s3:::bucket-name/*"</p><p>    }</p><p>  ]</p><p>}</p><p><strong>For Azure Blob Storage</strong></p><ol><li><strong>Set Up Azure Service Principal</strong>: Create a service principal with the necessary access policy for your Atlas project.</li><li><strong>Assign Roles</strong>: Assign the <em>Storage Blob Delegator</em> and <em>Storage Blob Data Contributor</em> roles to your service principal.</li></ol><p>Objective 4.3: Restore procedures for clusters.</p><p><strong>Restore Your Cluster in MongoDB Atlas</strong></p><p>MongoDB Atlas provides several methods to restore your cluster from backups. Hereâ€™s a comprehensive overview of the restoration process, including required access, limitations, prerequisites, and how to view the status of snapshot restorations.</p><p><strong>Required Access</strong></p><p>To view cloud backup restore jobs, you must have <strong>Project Owner</strong> access or higher in the project.</p><p><strong>Limitations</strong></p><ul><li>You cannot restore a snapshot created from a MongoDB 7.0 sharded cluster with 3 or fewer shards to a MongoDB 8.0 sharded cluster with 3 or fewer shards using the default embedded config server configuration. You must first disable the Managed Configs to create a sharded cluster with a dedicated config server before restoring the snapshot.</li></ul><p><strong>Prerequisites</strong></p><ul><li>Ensure that the target Atlas cluster does not receive client requests during the restoration process. For maximum uptime, consider restoring to a new cluster and reconfiguring your application to use that new cluster once it is operational.</li></ul><p><strong>Restoration Methods</strong></p><p>You can restore data from:</p><ul><li><strong>Scheduled and On-Demand Snapshots</strong>: Restore from snapshots that were created based on your backup policy or manually.</li><li><strong>Continuous Cloud Backup</strong>: Restore from continuous backups that capture changes in real-time.</li><li><strong>Locally Downloaded Snapshot Files</strong>: Restore from snapshots that you have downloaded to your local environment.</li><li><strong>Snapshots of a Cluster Using Encryption at Rest with Customer Key Management</strong>: Restore from encrypted snapshots.</li><li><strong>Cloud Manager Deployment</strong>: Restore from backups taken in a Cloud Manager deployment.</li></ul><p><strong>Viewing Status of Snapshot Restorations</strong></p><p>To list all cloud backup restore jobs for your cluster using the Atlas CLI, you can run the following command:</p><p>bash</p><p>atlas backups restores describe &lt;restoreJobId&gt; [options]</p><p>To return the details for a specific cloud backup restore job, use:</p><p>bash</p><p>atlas backups restores describe &lt;restoreJobId&gt; [options]</p><p>To view all cloud backup restore jobs for a specified serverless instance in your project, run:</p><p>bash</p><p>atlas serverless backups restores describe [options]</p><p><strong>Steps to View Restoration Status in the Atlas UI</strong></p><ol><li>Select the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li>Select your desired project from the Projects menu.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li><li>Click your cluster's name.</li><li>Click the <strong>Backup</strong> tab. If the cluster has no Backup tab, then Atlas backups are disabled for that cluster.</li></ol><p>The <strong>Backup</strong> page displays the status of completed and in-progress snapshot restorations, including when Atlas took the snapshot and the snapshot's delivery type.</p><ul><li>For manually downloaded snapshots, the Status column displays progress while Atlas prepares the download link. Once the download is ready, the column displays the link to download the snapshot.</li><li>For automated restores and Continuous Cloud Backup restores, the Status column updates as the restoration progresses on each node in the cluster. When the restoration completes, the column displays the time of completion and the cluster to which Atlas restored the snapshot.</li></ul><p><strong>Restore from a Scheduled or On-Demand Snapshot in MongoDB Atlas</strong></p><p>MongoDB Atlas allows you to restore data from scheduled or on-demand Cloud Backups, including snapshots from different projects or organizations. Below are the key points and steps to perform a restoration.</p><p><strong>Key Considerations</strong></p><ul><li><strong>Cross-Organization Restores</strong>: You can only perform cross-organization restores through the Atlas UI.</li><li><strong>DefaultRWConcern</strong>: If the DefaultRWConcern value on the source snapshot differs from the target cluster, Atlas overrides the value on the source snapshot with the value on the target cluster.</li><li><strong>Cluster Types</strong>: This feature is not available for M0 clusters. For M10+ dedicated clusters running MongoDB 4.2 or higher, Atlas restores Atlas Search index definitions from a Cloud Backup snapshot, but it does not restore search index data.</li><li><strong>Sharded Clusters</strong>: If you are restoring from a sharded cluster, the source and target clusters must have the same number of shards. Atlas cannot restore a sharded cluster snapshot to a replica set.</li><li><strong>Migration from Shared Clusters</strong>: If your cluster has been migrated from an M2 or M5 cluster to a Flex cluster, you have access to the last 8 backup snapshots since the date of the migration.</li><li><strong>Snapshot Compatibility</strong>: Starting with MongoDB 5.0, you can restore snapshots of clusters that run only the two most recent major versions of MongoDB to M2 and M5 clusters.</li><li><strong>Fallback Snapshots</strong>: If a scheduled snapshot fails, Atlas attempts to repeat the snapshot process. You may use the resulting fallback snapshot to restore the cluster, but this is not recommended as fallback snapshots may contain inconsistent data.</li></ul><p><strong>Steps to Restore from a Snapshot</strong></p><p><strong>Using the Atlas UI</strong></p><ol><li><strong>Select Organization and Project</strong>:<ul><li>From the Organizations menu, select the organization that contains your desired project.</li><li>From the Projects menu, select your project.</li></ul></li><li><strong>Access Clusters</strong>:<ul><li>Click on <strong>Clusters</strong> in the sidebar.</li></ul></li><li><strong>Select Cluster</strong>:<ul><li>Click on your cluster's name.</li></ul></li><li><strong>Open Backup Tab</strong>:<ul><li>Click the <strong>Backup</strong> tab. If there is no Backup tab, backups are disabled for that cluster.</li></ul></li><li><strong>Restore Snapshot</strong>:<ul><li>In the Actions column, expand the Actions menu and click <strong>Restore</strong> for the snapshot you want to restore.</li><li>In the modal window, select the target project and the target cluster from the dropdown menu.</li></ul></li><li><strong>Confirm Restoration</strong>:<ul><li>Follow the prompt and click <strong>Restore</strong>.</li></ul></li><li><strong>Restart Application</strong>:<ul><li>Restart your application and ensure it uses the new target cluster.</li></ul></li></ol><p><strong>Using the Atlas CLI</strong></p><p>To start a restore job for your project and cluster, run the following command:</p><p>bash</p><p>atlas backups restores start &lt;automated|download|pointInTime&gt; [options]</p><p>To watch for a specific restore job to complete, use:</p><p>bash</p><p>atlas backups restores watch &lt;restoreJobId&gt; [options]</p><p>To start a restore job for your serverless instance, run:</p><p>bash</p><p>atlas serverless backups restores create [options]</p><p>To watch the specified backup restore job until it completes, use:</p><p>bash</p><p>atlas serverless backups restores watch [options]</p><p><strong>Important Notes</strong></p><ul><li>Atlas deletes all existing data on the target cluster prior to the restore, and the target cluster will be unavailable during the restoration process.</li><li>Ensure that you have the necessary permissions (Project Owner access or higher) to initiate the restore job.</li></ul><p><strong>Restore from Continuous Cloud Backup in MongoDB Atlas</strong></p><p>MongoDB Atlas allows you to restore data from a Continuous Cloud Backup by specifying either a specific date and time or a specific oplog entry. Hereâ€™s a detailed overview of the restoration process, including requirements, limitations, and steps to perform the restoration.</p><p><strong>Requirements and Limitations</strong></p><ul><li><strong>Cluster Type</strong>: This feature is available only for M10+ dedicated clusters and Serverless instances.</li><li><strong>Restoration Timeframe</strong>: For Serverless instances, you can only restore to a date and time within the last 72 hours. Serverless instances do not support restoring from an oplog entry.</li><li><strong>DefaultRWConcern</strong>: If the DefaultRWConcern value on the source snapshot differs from the target cluster, Atlas overrides the value on the source snapshot with the value on the target cluster. If there is no value configured for the DefaultRWConcern on the target cluster, Atlas retains the value from the snapshot.</li><li><strong>Atlas Search Index Definitions</strong>: For M10+ dedicated clusters running MongoDB 4.2 or higher, Atlas restores Atlas Search index definitions from a Cloud Backup snapshot, but it does not restore search index data. This may lead to delays during snapshot restorations if large search indexes are defined.</li></ul><p><strong>Steps to Restore from Continuous Cloud Backup</strong></p><p><strong>Using the Atlas UI</strong></p><ol><li><strong>Select Organization and Project</strong>:<ul><li>From the Organizations menu, select the organization that contains your desired project.</li><li>From the Projects menu, select your project.</li></ul></li><li><strong>Access Clusters</strong>:<ul><li>Click on <strong>Clusters</strong> in the sidebar.</li></ul></li><li><strong>Select Cluster</strong>:<ul><li>Click on your cluster's name.</li></ul></li><li><strong>Open Backup Tab</strong>:<ul><li>Click the <strong>Backup</strong> tab. If there is no Backup tab, backups are disabled for that cluster.</li></ul></li><li><strong>Initiate Point in Time Restore</strong>:<ul><li>Click the <strong>Point in Time Restore</strong> button on the far right side of the screen.</li></ul></li><li><strong>Choose Restore Method</strong>:<ul><li>Select either the <strong>Date &amp; Time</strong> or <strong>Oplog Timestamp</strong> tab. <ul><li>If you select <strong>Date &amp; Time</strong>, specify the time of restore with one minute of granularity.</li><li>If you select <strong>Oplog Timestamp</strong>, specify the time of restore with one second of granularity.</li></ul></li></ul></li><li><strong>Enter Desired Time</strong>:<ul><li>Enter the desired point in time to restore from. You can restore from any time during the continuous cloud backup window, except between when you initiate a restore and when Atlas completes a snapshot after the restore.</li></ul></li><li><strong>Select Target Cluster</strong>:<ul><li>Click the <strong>Next: Select Cluster</strong> button.</li><li>Choose a project and cluster to restore to from the dropdown menus.</li></ul></li><li><strong>Confirm Restoration</strong>:<ul><li>Click the <strong>Restore</strong> button to initiate the restoration process.</li></ul></li></ol><p><strong>Using the Atlas CLI</strong></p><p>To start a restore job for your project and cluster, run the following command:</p><p>bash</p><p>atlas backups restores start &lt;automated|download|pointInTime&gt; [options]</p><p>To watch for a specific restore job to complete, use:</p><p>bash</p><p>atlas backups restores watch &lt;restoreJobId&gt; [options]</p><p>For serverless instances, use the following command to create a restore job:</p><p>bash</p><p>atlas serverless backups restores create [options]</p><p>To watch the specified backup restore job until it completes, run:</p><p>bash</p><p>atlas serverless backups restores watch [options]</p><p><strong>Important Notes</strong></p><ul><li>Atlas deletes all existing data on the target cluster prior to the restore, and the target cluster will be unavailable during the restoration process.</li><li>After the restore completes, Atlas takes a snapshot of the restored cluster, which has a retention period equal to the cluster's continuous cloud backup window.</li></ul><p><strong>Enable Faster Cross-Project Restores in MongoDB Atlas</strong></p><p>MongoDB Atlas provides a feature to enable faster cross-project restores for clusters with AWS nodes created before March 27, 2024. This feature enhances the efficiency of restoring backups across different projects.</p><p><strong>Key Considerations</strong></p><ul><li><strong>Availability</strong>:<ul><li>The <strong>Faster Restore</strong> button is only visible for Atlas clusters with AWS nodes created before March 27, 2024.</li><li>This button does not appear for MongoDB Atlas for Government clusters.</li></ul></li><li><strong>Rolling Replacement</strong>:<ul><li>When you enable faster cross-project restores, Atlas replaces each node in your clusters in a rolling fashion during your next maintenance window.</li><li>This replacement process might take longer than the defined maintenance window.</li></ul></li><li><strong>Node Availability</strong>:<ul><li>Secondary reads and analytic nodes will be unavailable during the node replacement process.</li></ul></li><li><strong>Email Confirmation</strong>:<ul><li>Once the replacement is complete, Atlas sends an email confirmation to notify you.</li></ul></li></ul><p><strong>Procedure to Enable Faster Cross-Project Restores</strong></p><ol><li><strong>Select Organization</strong>:<ul><li>If it's not already displayed, select the organization that contains your desired project from the Organizations menu in the navigation bar.</li></ul></li><li><strong>Select Project</strong>:<ul><li>If it's not already displayed, select your desired project from the Projects menu in the navigation bar.</li></ul></li><li><strong>Access Clusters</strong>:<ul><li>If it's not already displayed, click <strong>Clusters</strong> in the sidebar to view the Clusters page.</li></ul></li><li><strong>Select Cluster</strong>:<ul><li>Click on your cluster's name to access its details.</li></ul></li><li><strong>Open Backup Tab</strong>:<ul><li>Click the <strong>Backup</strong> tab. If the cluster has no Backup tab, then Atlas backups are disabled for that cluster, and no snapshots are available. You can enable backups when you scale the cluster.</li></ul></li><li><strong>Enable Faster Restore</strong>:<ul><li>Click the <strong>Faster Restore</strong> button.</li><li>If the Faster Restore button is missing or disabled, you already have faster cross-project restores enabled.</li></ul></li><li><strong>Confirm Action</strong>:<ul><li>Click <strong>Confirm</strong> to enable the feature.</li></ul></li></ol><p><strong>Restore from a Locally-Downloaded Snapshot in MongoDB Atlas</strong></p><p>MongoDB Atlas provides a mechanism for restoring data from locally-downloaded backup snapshots. Hereâ€™s a detailed overview of the process, including requirements, limitations, and steps to perform the restoration.</p><p><strong>Key Points</strong></p><ul><li><strong>Data Deletion</strong>: Atlas deletes all existing data on the target cluster prior to the restore. The target cluster remains available during the restoration process.</li><li><strong>Download Failures</strong>: If your manual download of a backup snapshot fails, you can restart the backup request as long as the most recent failure occurred no more than one hour ago.</li><li><strong>Private Endpoints</strong>: For clusters deployed on AWS or Azure with configured private endpoints, you can download the snapshot over the private endpoint in the same region as the snapshot. Note that charges may apply for downloading over the private endpoint.</li></ul><p><strong>Requirements and Limitations</strong></p><ul><li><strong>Access Level</strong>: You must have Project Owner access or higher to download a backup snapshot.</li><li><strong>Cluster Type</strong>: This feature is unavailable for M0 clusters.</li><li><strong>File Compatibility</strong>: The downloaded files consist of raw files copied from the data directory. The mongorestore command is incompatible with these files. You need to start a mongod instance and point it to the extracted directory.</li><li><strong>Private Endpoint Limitations</strong>: If you are near your cloud provider's private endpoint, you might not be able to download a snapshot through it. In this case, use the public download endpoint provided by Atlas.</li></ul><p><strong>Steps to Download a Backup Snapshot</strong></p><ol><li><strong>Select Organization and Project</strong>:<ul><li>From the Organizations menu, select the organization that contains your desired project.</li><li>From the Projects menu, select your desired project.</li></ul></li><li><strong>Access Clusters</strong>:<ul><li>Click on <strong>Clusters</strong> in the sidebar.</li></ul></li><li><strong>Select Cluster</strong>:<ul><li>Click your cluster's name.</li></ul></li><li><strong>Open Backup Tab</strong>:<ul><li>Click the <strong>Backup</strong> tab. If there is no Backup tab, backups are disabled for that cluster.</li></ul></li><li><strong>Download Snapshot</strong>:<ul><li>Click the <strong>Snapshots</strong> sub-tab.</li><li>In the Actions column, expand the Actions menu and click <strong>Download</strong> for the snapshot you want to download.</li><li>Atlas generates a one-time use download link that expires within 1 hour.</li></ul></li></ol><p><strong>Extracting and Accessing Data Files</strong></p><p>Once the download is ready, Atlas will notify you via email and display the download link in the Restores &amp; Downloads tab.</p><p><strong>Example Command to Extract the Snapshot</strong></p><p>The snapshot is compressed into a .tar.gz file. You can extract it using the following command:</p><p>bash</p><p>tar -xvzf ~/Downloads/mongodb-snapshots/my-cluster-snapshot.tar.gz</p><p><strong>Starting a mongod Instance</strong></p><p>To access the data files, start a mongod instance and point it to the extracted directory using the --dbpath option:</p><p>bash</p><p>mongod --dbpath ~/Downloads/mongodb-snapshots/my-cluster-snapshot/</p><p><strong>Restore a Cloud Manager Snapshot to Atlas</strong></p><p>You can automatically restore a backup from a Cloud Manager deployment to an Atlas deployment. Here are the key requirements and steps involved in the process:</p><p><strong>Requirements</strong></p><ul><li><strong>User Roles</strong>:<ul><li>You must have the <strong>Project Backup Admin</strong> role for the Cloud Manager project that contains the source clusters.</li><li>You also need the <strong>Project Owner</strong> role for the Atlas projects that contain the target clusters.</li></ul></li><li><strong>DefaultRWConcern</strong>:<ul><li>If the DefaultRWConcern value on the source snapshot differs from the target cluster, Atlas overrides the value on the source snapshot with the value on the target cluster.</li><li>If there is no value configured for the DefaultRWConcern on the target cluster, Atlas retains the value from the snapshot.</li></ul></li><li><strong>Sharded Clusters</strong>:<ul><li>If you are restoring from a sharded cluster, the source and target clusters must have the same number of shards.</li><li>Atlas cannot restore a sharded cluster snapshot to a replica set.</li></ul></li><li><strong>Cluster Types</strong>:<ul><li>This feature is unavailable for M0 clusters and for Serverless instances.</li></ul></li><li><strong>MongoDB Version Compatibility</strong>:<ul><li>You can only restore a Cloud Manager snapshot to an Atlas cluster if both deployments run the same version of MongoDB server, or if the Atlas deployment runs one version higher than the Cloud Manager deployment.</li></ul></li></ul><p><strong>Restoration Process</strong></p><ul><li><strong>Data Deletion</strong>: Atlas deletes all existing data on the target cluster prior to the restore. The target cluster remains available during the restoration process.</li><li><strong>Storage Space</strong>: Ensure that the hosts for your Atlas deployment have sufficient storage space for the restored databases, plus additional space for dataset growth. You can use the db.stats() command to find the current database size.</li><li><strong>Instance Types</strong>: The instance types of the nodes in the Atlas deployment must have at least as much memory and throughput capacity as the nodes in the Cloud Manager deployment.</li></ul><p><strong>Import Archive from S3 in MongoDB Atlas</strong></p><p>You can restore data archived to S3 buckets using the mongoimport and mongorestore tools. Below is a detailed guide on the prerequisites and the procedure to import archived data from S3.</p><p><strong>Prerequisites</strong></p><p>Before you begin, ensure you have the following:</p><ol><li><strong>AWS CLI Installed</strong>: You need to install the AWS Command Line Interface (CLI). You can find the installation guide here.</li><li><strong>AWS CLI Configured</strong>: Configure the AWS CLI with your credentials. Follow the configuration guide here.</li><li><strong>MongoDB Database Tools Installed</strong>: Install the mongoimport and mongorestore tools. You can find the installation instructions in the MongoDB documentation.</li></ol><p><strong>Procedure</strong></p><p><strong>Step 1: Download Archived Data from S3</strong></p><p>Use the following command to copy the archived data from your S3 bucket to a local folder:</p><p>bash</p><p>aws s3 cp s3://&lt;bucketName&gt;/&lt;prefix&gt; &lt;downloadFolder&gt; --recursive --gunzip</p><p>Where:</p><ul><li>&lt;bucketName&gt;: Name of the AWS S3 bucket.</li><li>&lt;prefix&gt;: Path to archived data in the bucket, formatted as: </li><li>/exported_snapshots/&lt;orgId&gt;/&lt;projectId&gt;/&lt;clusterName&gt;/&lt;initiationDateOfSnapshot&gt;/&lt;timestamp&gt;/</li><li>&lt;downloadFolder&gt;: Path to the local folder where you want to copy the archived data.</li></ul><p><strong>Example Command</strong></p><p>bash</p><p>aws s3 cp s3://export-test-bucket/exported_snapshots/1ab2cdef3a5e5a6c3bd12de4/12ab3456c7d89d786feba4e7/myCluster/2021-04-24T0013/1619224539 mybucket --recursive --gunzip</p><p><strong>Step 2: Import Data Using mongoimport</strong></p><p>Create a shell script (e.g., massimport.sh) to automate the import process. Hereâ€™s a sample script:</p><p>bash</p><p><strong>#!/bin/bash</strong></p><p>regex='/(.+)/(.+)/.+'</p><p>dir=${1%/}</p><p>connstr=$2</p><p># Iterate through the subdirectories of the downloaded and extracted snapshot export</p><p>find $dir -type f -not -path '*/\.*' -not -path '*metadata\.json' | while read line; do</p><p>  [[ $line =~ $regex ]]</p><p>  db_name=${BASH_REMATCH[1]}</p><p>  col_name=${BASH_REMATCH[2]}</p><p>  mongoimport --uri "$connstr" --mode=upsert -d $db_name -c $col_name --file $line --type json</p><p>done</p><p># Create the required directory structure and copy/rename files for mongorestore</p><p>find $dir -type f -name '*metadata\.json' | while read line; do</p><p>  [[ $line =~ $regex ]]</p><p>  db_name=${BASH_REMATCH[1]}</p><p>  col_name=${BASH_REMATCH[2]}</p><p>  mkdir -p ${dir}/metadata/${db_name}/</p><p>  cp $line ${dir}/metadata/${db_name}/${col_name}.metadata.json</p><p>done</p><p>mongorestore "$connstr" ${dir}/metadata/</p><p># Remove the metadata directory</p><p>rm -rf ${dir}/metadata/</p><p><strong>Step 3: Run the Import Script</strong></p><p>Execute the script with the following command:</p><p>bash</p><p>sh massimport.sh &lt;downloadFolder&gt; "mongodb+srv://&lt;connectionString&gt;"</p><p>Where:</p><ul><li>&lt;downloadFolder&gt;: Path to the local folder where you copied the archived data.</li><li>&lt;connectionString&gt;: Connection string for the Atlas cluster.</li></ul><p><strong>Example Command</strong></p><p>bash</p><p>sh massimport.sh mybucket "mongodb+srv://&lt;myConnString&gt;"</p><p><strong>Important Notes</strong></p><ul><li>The --mode=upsert option in mongoimport allows handling duplicate documents from the archive.</li><li>Ensure that the connection string is correctly formatted to connect to your MongoDB Atlas cluster.</li></ul><p><strong>Manage Online Archive in MongoDB Atlas</strong></p><p>MongoDB Atlas provides a feature called <strong>Online Archive</strong> that allows you to move infrequently accessed data from your Atlas cluster to a MongoDB-managed read-only Federated Database Instance on cloud object storage. This helps in optimizing storage costs while maintaining access to archived data.</p><p><strong>Overview</strong></p><ul><li><strong>Archiving Process</strong>: Atlas archives data based on specified criteria in an archiving rule. The criteria can vary depending on the type of collection (standard or time series).</li><li><strong>Federated Database Instances</strong>: When you configure an Online Archive, Atlas creates two federated database instances:<ul><li>One for querying archived data only.</li><li>Another for querying both your cluster and archived data.</li></ul></li></ul><p><strong>Cluster Requirements</strong></p><ul><li>Online Archive is available only on M10 and greater clusters.</li></ul><p><strong>Required Permissions</strong></p><p>To create or delete an Online Archive, you must have one of the following roles:</p><ul><li><strong>Project Data Access Admin</strong></li><li><strong>Project Cluster Manager</strong></li><li><strong>Project Owner</strong></li></ul><p><strong>How Atlas Archives Data</strong></p><ol><li><strong>Job Execution</strong>: Atlas runs a query in the archive's namespace to identify documents that match the archiving criteria. This query is referred to as a <em>job</em>.<ul><li>By default, Atlas runs the job every five minutes, expanding the interval if the document size does not meet the threshold.</li><li>The threshold is 2GB per job.</li></ul></li><li><strong>Data Writing</strong>: For documents that match the archival criteria, Atlas:<ul><li>Writes to a maximum of 10,000 partitions per data archiving job.</li><li>Writes up to 2GB of document data to partitions on cloud object storage for each unique combination of query field values.</li></ul></li></ol><p><strong>Limitations</strong></p><ul><li>Online Archive does not support: <ul><li>Writing to the Online Archive.</li><li>Archiving capped collections.</li><li>Archiving data below the size of 5 MiB after 7 days.</li></ul></li><li>The Online Archive is read-only, and Atlas does not update archived data.</li></ul><p><strong>Viewing the Online Archive</strong></p><p>To view your federated database instance for the Online Archive:</p><ol><li>Select the organization that contains your project from the Organizations menu.</li><li>Select your project from the Projects menu.</li><li>Click on <strong>Data Federation</strong> under the Services heading.</li></ol><p><strong>Querying the Online Archive</strong></p><p>You can query your Online Archive data using the connection string through the Online Archive or federated database instance. You can also use SQL to query the archived data.</p><p><strong>Managing Query Limits for Online Archive</strong></p><p>You can configure limits on the amount of data processed for queries against archived data to control costs. If the processed data reaches the configured limit, Atlas will not execute new queries and will return an error.</p><p><strong>Editing and Deleting Online Archives</strong></p><p>You can edit archiving rules, delete your Online Archive, or pause archiving through the Atlas console.</p><p><strong>Online Archive Costs</strong></p><p>While Online Archive helps lower storage costs, you will incur costs for the amount of data transferred and queried.</p><p><strong>Domain 5: Logging (6%)</strong></p><p>Objective 5.1: Review activity from Activity Feed.</p><p>Ref-- Objective 3.3</p><p>Objective 5.2: Retrieve log data.</p><p><strong>View and Download MongoDB Logs</strong></p><p>MongoDB logs are crucial for monitoring and troubleshooting your database instances. Each mongod, mongos, and mongosqld instance maintains its own log file, which records activity and system events. Atlas retains the last 30 days of log messages and system event audit messages. The Performance Advisor retains at most 7 days of logs. If you terminate a cluster, the logs generated by that cluster persist, and you can download them until the end of their retention periods.</p><p><strong>Required Access</strong></p><p>To download logs, you must have <strong>Project Data Access Read Only</strong> access or higher to the project. Users with <strong>Organization Owner</strong> access must add themselves to the project as a <strong>Project Owner</strong>.</p><p><strong>View and Download Cloud Deployment Logs</strong></p><p><strong>Using the Atlas CLI</strong></p><p>To download logs for a specific hostname, use the following command:</p><p>bash</p><p>atlas logs download &lt;hostname&gt; &lt;mongodb.gz|mongos.gz|mongosqld.gz|mongodb-audit-log.gz|mongos-audit-log.gz&gt; [options]</p><p>For more details on command syntax and parameters, refer to the Atlas CLI documentation for atlas logs download.</p><p><strong>Using the Atlas UI</strong></p><p>To download logs for a single process in a given cluster:</p><ol><li>If it's not already displayed, select the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li>If it's not already displayed, select your desired project from the Projects menu in the navigation bar.</li><li>If it's not already displayed, click <strong>Clusters</strong> in the sidebar.</li></ol><p>The Clusters page displays.</p><ol><li>Click the ellipsis icon (...) next to the cluster that contains the mongod instance whose logs you want to download.</li><li>Select <strong>Download Logs</strong>.</li></ol><p>In the <strong>Download Logs</strong> dialog box, fill in the following fields:</p><table><thead><tr><th><p><strong>Field</strong></p></th><th><p><strong>Content</strong></p></th></tr></thead><tbody><tr><td><p>Select process</p></td><td><p>Select the process for which you want logs. For clusters where the only log type available is mongod, Atlas does not display this field. Valid options are:</p></td></tr><tr><td><p>mongod</p></td><td><p>Database <a href="https://www.mongodb.com/docs/manual/reference/program/mongod/">server</a> logs.</p></td></tr><tr><td><p>mongod-audit-log</p></td><td><p><a href="https://html.onlineviewer.net/docs/atlas/database-auditing/#std-label-set-up-database-auditing">Database auditing</a> logs. Note: this option only appears if you have database auditing enabled for your cluster.</p></td></tr><tr><td><p>mongos</p></td><td><p><a href="https://www.mongodb.com/docs/manual/reference/program/mongos/">mongos</a> logs. Note: this option only appears if your cluster is <a href="https://www.mongodb.com/docs/manual/sharding/">sharded</a>.</p></td></tr><tr><td><p>mongos-audit-log</p></td><td><p><a href="https://www.mongodb.com/docs/manual/reference/program/mongos/">mongos</a> auditing logs. Note: this option only appears if your sharded cluster has auditing enabled.</p></td></tr><tr><td><p>mongosqld</p></td><td><p><a href="https://html.onlineviewer.net/docs/atlas/bi-connection/#std-label-bi-connection">BI Connector</a> logs. Note: this option only appears if you have BI Connector enabled for your cluster.</p></td></tr><tr><td><p>Select server</p></td><td><p>Select the server in the cluster whose logs you want to retrieve.</p></td></tr><tr><td><p>Time Period</p></td><td><p>Select the time frame of log activity to return. If you select Custom Time, specify the inclusive start and end time of log activity to return. The start time must be less than 30 days ago. <strong>IMPORTANT:</strong> To ensure that your log data returns within the desired time frame, set the time zone in your Atlas <a href="https://html.onlineviewer.net/docs/atlas/tutorial/manage-project-settings/#std-label-project-settings">project settings</a>.</p></td></tr></tbody></table><p><strong>Push Logs to AWS S3 Bucket</strong></p><p>You can continually push logs from mongod, mongos, and audit logs to an AWS S3 bucket. Atlas exports logs every 5 minutes.</p><p><strong>Access Requirements</strong></p><p>To push logs to an AWS S3 bucket, you must have one of the following roles:</p><ul><li><strong>Project Owner</strong>: This role allows you to manage project settings and resources.</li><li><strong>Organization Owner</strong>: This role provides full access to all projects within the organization.</li></ul><p><strong>Prerequisites</strong></p><p>You will need:</p><ul><li>An <strong>AWS account</strong> with permissions to manage IAM roles.</li><li>An <strong>existing AWS S3 bucket</strong> where the logs will be stored.</li></ul><p><strong>Steps to Push Logs to AWS S3</strong></p><ol><li><strong>Select Organization</strong>:<ul><li>If it's not already displayed, select the organization that contains your project from the Organizations menu in the navigation bar.</li></ul></li><li><strong>Select Project</strong>:<ul><li>If it's not already displayed, select your project from the Projects menu in the navigation bar.</li></ul></li><li><strong>Access Advanced Security Settings</strong>:<ul><li>In the sidebar, click <strong>Advanced</strong> under the <strong>Security</strong> heading.</li><li>The Advanced page displays.</li></ul></li><li><strong>Configure AWS Role</strong>:<ul><li>You will be prompted to either: <ul><li>Create a new AWS role.</li><li>Use one already attached to Atlas.</li></ul></li></ul></li></ol><p><strong>Important Notes</strong></p><ul><li>You cannot specify which logs to send; Atlas sends all mongod, mongos, and audit logs.</li><li>Push-based log export does not support Bring Your Own Key (BYOK).</li></ul><p>This objective covers how to access more detailed logs for troubleshooting and analysis.</p><ul><li>Types of Logs: <ul><li>mongod.log: Contains detailed information about the MongoDB server process, including startup messages, connections, operations, and errors. This is the most important log for troubleshooting performance issues or errors within the database.</li><li>Audit Logs: Record administrative operations performed on the MongoDB deployment, such as user creation, role changes, and schema modifications. These are essential for security auditing and compliance. (Covered also in Domain 3)</li><li>Profiler Logs: Record information about slow queries, allowing you to identify performance bottlenecks. (Covered in Domain 6)</li></ul></li><li>Accessing Logs: <ul><li>Atlas UI: You can access and download logs directly from the Atlas UI for your clusters.</li><li>Atlas CLI: The Atlas Command-Line Interface allows you to programmatically retrieve logs.</li></ul></li><li>Log Retention: Atlas retains logs for a specific period, depending on your cluster tier and configuration.</li><li>Exam Focus: Be familiar with the different types of logs available and how to access them through the Atlas UI. Understand that mongod.log is the primary log for troubleshooting database issues.</li></ul><p>Key Differences Between Activity Feed and Logs:</p><table><tr><td><p><strong><em>Feature</em></strong></p></td><td><p><strong><em>Activity Feed</em></strong></p></td><td><p><strong><em>Logs (mongod.log, Audit Logs, Profiler Logs)</em></strong></p></td></tr><tr><td><p>Granularity</p></td><td><p>High-level events</p></td><td><p>Detailed information about specific operations</p></td></tr><tr><td><p>Primary Use</p></td><td><p>Auditing and tracking changes within Atlas</p></td><td><p>Troubleshooting, performance analysis, security auditing</p></td></tr><tr><td><p>Access</p></td><td><p>Atlas UI</p></td><td><p>Atlas UI, Atlas CLI</p></td></tr></table><p><strong>Domain 6: Metrics and Monitoring (21%)</strong></p><p>Objective 6.1: Core metrics for MongoDB performance.</p><p><strong>Overview of Cluster Metrics Monitoring in MongoDB Atlas</strong></p><p>MongoDB Atlas provides a comprehensive monitoring system for clusters, allowing users to track various metrics that indicate the performance and health of their databases. This is crucial for identifying performance issues and ensuring that the cluster meets operational requirements.</p><p><strong>Key Sections of the Page</strong></p><ul><li><strong>View Metrics</strong>: This section allows users to access different metrics related to their clusters.</li><li><strong>Important Metrics</strong>: Highlights the key metrics that users should monitor to gauge cluster health.</li><li><strong>Monitoring Data Storage Granularity</strong>: Explains how metrics are aggregated over time.</li><li><strong>Burst Reporting</strong>: Discusses the maximum reported values for metrics over specified intervals.</li><li><strong>Free Cluster and Shared Cluster Monitoring Considerations</strong>: Outlines limitations for free and shared clusters.</li><li><strong>Serverless Instance Monitoring Considerations</strong>: Details the metrics available for serverless instances.</li><li><strong>Manage Tags</strong>: Instructions on how to manage tags for clusters.</li></ul><p><strong>Core Metrics to Monitor</strong></p><p>Monitoring specific metrics can help in assessing the cluster's performance. Here are some of the core metrics:</p><table><thead><tr><th><p><strong>Chart</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Connections</p></td><td><p>Indicates the total active connections to the cluster. Monitor to determine if connection limits are sufficient.</p></td></tr><tr><td><p>Disk IOPS</p></td><td><p>Indicates input operations per second. Monitor to ensure the cluster can handle future workloads.</p></td></tr><tr><td><p>Disk Usage</p></td><td><p>Indicates total bytes of used disk space. Monitor to manage data and operational data size.</p></td></tr><tr><td><p>Query Targeting</p></td><td><p>Indicates the efficiency of read operations. Monitor to identify inefficient queries.</p></td></tr><tr><td><p>Normalized System CPU</p></td><td><p>Indicates CPU usage scaled to a range of 0-100%. Monitor to ensure data retrieval efficiency.</p></td></tr><tr><td><p>Oplog GB/Hour</p></td><td><p>Indicates the average rate of oplog data generated per hour. Monitor to determine if oplog size needs to be increased.</p></td></tr><tr><td><p>Util %</p></td><td><p>Percentage of time requests are serviced by disk. Monitor to decide on increasing provisioned IOPS or upgrading the cluster.</p></td></tr></tbody></table><p><strong>Data Retention and Granularity</strong></p><ul><li><strong>Granularity Levels</strong>: Metrics are collected at different granularity levels, with the default being 1 minute. Premium monitoring allows for 10-second granularity.</li><li><strong>Retention Periods</strong>: Metrics are retained for varying durations based on their granularity:</li></ul><table><thead><tr><th><p><strong>Data Period</strong></p></th><th><p><strong>Duration of Retention</strong></p></th></tr></thead><tbody><tr><td><p>10 seconds</p></td><td><p>8 hours</p></td></tr><tr><td><p>1 minute</p></td><td><p>48 hours</p></td></tr><tr><td><p>5 minutes</p></td><td><p>48 hours</p></td></tr><tr><td><p>1 hour</p></td><td><p>63 days</p></td></tr><tr><td><p>1 day</p></td><td><p>Forever</p></td></tr></tbody></table><p><strong>Important Considerations</strong></p><ul><li><strong>Cluster Types</strong>: Different cluster types (e.g., M0, M2, M5) have limitations on the metrics available for monitoring.</li><li><strong>Monitoring Resumption</strong>: Monitoring for free clusters pauses after 7 days of inactivity and resumes upon a successful connection.</li><li><strong>Tag Management</strong>: Users can manage tags for their clusters, but should avoid including sensitive information in tags.</li></ul><p><strong>Overview of Cluster Metrics</strong></p><p>You can view select project metrics using the Atlas CLI. Here are the commands to retrieve metrics for disk partitions on a specified host:</p><p><strong>Commands</strong></p><p>To return the metrics for a disk partition on a specified host:</p><p>bash</p><p>atlas metrics disks describe &lt;hostname:port&gt; &lt;diskName&gt; [options]</p><p>To list available disks or disk partitions on a specified host:</p><p>bash</p><p>atlas metrics disks list &lt;hostname:port&gt; [options]</p><p>For more details on the syntax and parameters, refer to the Atlas CLI documentation for:</p><ul><li>atlas metrics disks describe</li><li>atlas metrics disks list</li></ul><p><strong>Clusters View</strong></p><p>The Clusters view displays all clusters in an Atlas project and features core metrics per cluster. You can click on a cluster's name to access its Overview tab, where you can quickly assess cluster health through available charts. For more information, see View All Cloud Clusters.</p><p><strong>Monitoring Cluster Metrics</strong></p><p>Monitoring cluster metrics is crucial for identifying performance issues and ensuring that your cluster meets operational requirements. Here are the key metrics available for monitoring:</p><p><strong>Metrics Table</strong></p><table><thead><tr><th><p><strong>Chart</strong></p></th><th><p><strong>Data</strong></p></th><th><p><strong>Use Case</strong></p></th></tr></thead><tbody><tr><td><p><strong>Connections</strong></p></td><td><p>The total number of active connections to the cluster. For a replica set, it shows active connections to the primary.</p></td><td><p>Monitor connections to determine if current limits are sufficient.</p></td></tr><tr><td><p><strong>Data Size</strong></p></td><td><p>Displays the amount of storage space in bytes used by stored data (Serverless Instances Only).</p></td><td><p>Monitor storage space for disk auto-scaling or manual increases.</p></td></tr><tr><td><p><strong>Disk IOPS</strong></p></td><td><p>The sum of read and write input/output operations per second (IOPS) for the cluster (M10+ Clusters Only).</p></td><td><p>Monitor IOPS to ensure the cluster can handle future workloads.</p></td></tr><tr><td><p><strong>Disk Latency</strong></p></td><td><p>The latency, in milliseconds, of the disk partition used by MongoDB.</p></td><td><p>Monitor to determine the average time to read from or write to disk.</p></td></tr><tr><td><p><strong>Disk Usage</strong></p></td><td><p>Total bytes of used disk space for the cluster (Serverless Instances and M10+ Clusters Only).</p></td><td><p>Monitor combined size of data and operational data on the cluster.</p></td></tr><tr><td><p><strong>Logical Size</strong></p></td><td><p>Displays the sum of total bytes of documents and index data across all databases (M0/M2/M5 Clusters Only).</p></td><td><p>Monitor the size of documents and index data on the cluster.</p></td></tr><tr><td><p><strong>Network</strong></p></td><td><p>Average rate of physical bytes or requests sent to/from the database server per second (Serverless Instances and M0/M2/M5 Clusters Only).</p></td><td><p>Monitor network performance.</p></td></tr><tr><td><p><strong>Operations</strong></p></td><td><p>Aggregated read (R) and write (W) operations on the cluster.</p></td><td><p>Monitor performance issues related to high workloads.</p></td></tr><tr><td><p><strong>Util %</strong></p></td><td><p>Percentage of time the partition is servicing requests.</p></td><td><p>Monitor utilization to determine if upgrades are needed.</p></td></tr></tbody></table><p><strong>Important Notes</strong></p><ul><li>Currently, Serverless instance metrics do not support third-party services (e.g., Datadog).</li><li>Clusters using NVMe SSDs display Disk Latency charts using the maximum value across the physical drives that make up the RAID.</li></ul><p><strong>Review Serverless Metrics in MongoDB Atlas</strong></p><p>To effectively monitor the performance of your Atlas Serverless instances, follow these steps to access the metrics:</p><ol><li><strong>Select Organization</strong>: From the Organizations menu in the navigation bar, choose the organization that contains your desired project.</li><li><strong>Select Project</strong>: From the Projects menu, select your desired project.</li><li><strong>Access Clusters</strong>: Click on "Clusters" in the sidebar to display the Clusters page.</li><li><strong>View Monitoring</strong>:<ul><li>Click the <strong>View Monitoring</strong> button for the Serverless instance.</li><li>Alternatively, click the name of the Serverless instance to open the overview, then navigate to <strong>Monitoring</strong> and select the <strong>Metrics</strong> tab.</li></ul></li></ol><p>Monitoring these metrics is essential for identifying performance issues and ensuring that your cluster meets operational requirements. For more details on available metrics, refer to the section on Review Available Metrics.</p><p><strong>Metrics View Sections</strong></p><p>The Metrics view consists of three distinct sections, allowing for comprehensive monitoring of your Serverless instance.</p><p><strong>Monitoring Data Storage Granularity</strong></p><p>Atlas provides several controls for the Metric view, which affect all charts displayed:</p><table><thead><tr><th><p><strong>Control</strong></p></th><th><p><strong>Function</strong></p></th></tr></thead><tbody><tr><td><p><strong>Granularity</strong></p></td><td><p>Modifies the granularity of metrics displayed for each chart. Options range from 1 minute to 1 day (24 hours). Selecting 'Auto' adjusts granularity based on the selected Zoom or Current Display date.</p></td></tr><tr><td><p><strong>Zoom</strong></p></td><td><p>Modifies the date range of metrics displayed for each chart, with options between 1 hour and 5 years.</p></td></tr><tr><td><p><strong>Filter by time range</strong></p></td><td><p>Sets the start and end date-time range for metrics displayed, overriding the selected zoom level.</p></td></tr><tr><td><p><strong>Add Chart</strong></p></td><td><p>Selects one or more charts to display or hide.</p></td></tr><tr><td><p><strong>Group Opcounters metrics</strong></p></td><td><p>Groups the individual components of the Opcounters chart.</p></td></tr></tbody></table><p>Objective 6.2: Core metrics for system performance.</p><p><strong>Review MongoDB Processes</strong></p><p>Monitoring MongoDB processes is essential for identifying performance issues and ensuring that your cluster meets operational requirements. Hereâ€™s a detailed overview of how to access and utilize the metrics for MongoDB processes in Atlas.</p><p><strong>Accessing MongoDB Process Metrics</strong></p><p>To view the metrics for a specific MongoDB process using the Atlas CLI, you can use the following commands:</p><ul><li>To return details for a specific MongoDB process:</li></ul><p>bash</p><p>ï‚·  atlas processes describe &lt;hostname:port&gt; [options]</p><p>ï‚·  To list all MongoDB processes for your project:</p><p>bash</p><p>ï‚·  atlas processes list [options]</p><p>ï‚·  To list MongoDB processes for a specified host:</p><p>bash</p><ul><li>atlas metrics processes &lt;hostname:port&gt; [options]</li></ul><p>For more information on the command syntax and parameters, refer to the Atlas CLI documentation for:</p><ul><li>atlas processes describe</li><li>atlas processes list</li><li>atlas metrics processes</li></ul><p><strong>Viewing Metrics in the Atlas UI</strong></p><p>To view the metrics for a specific MongoDB process in the Atlas UI:</p><ol><li>Select the organization that contains your desired project from the Organizations menu in the navigation bar.</li><li>Select your desired project from the Projects menu.</li><li>Click on <strong>Clusters</strong> in the sidebar to access the Clusters page.</li></ol><p><strong>Metrics Tabs</strong></p><p>The Atlas process view displays three tabs for monitoring metrics:</p><ul><li><strong>Status Tab</strong>: Displays the process metrics collected from the selected mongod or mongos process.</li><li><strong>Hardware Tab</strong>: Shows hardware metrics for the host machine supporting the selected mongod or mongos process.</li><li><strong>DB Stats Tab</strong>: Displays database metrics for the selected database. Database metrics are retrieved every 20 minutes by default, but this frequency can be adjusted.</li></ul><p>If the collection of database statistics affects performance, you can disable it by navigating to the Project Settings page and setting "Collect Database Specific Statistics" to No.</p><p><strong>Monitoring Data Storage Granularity</strong></p><p>Atlas provides several controls for the Status, Hardware, and DB Stats views. Adjusting any of these options affects all charts displayed under the selected view:</p><table><thead><tr><th><p><strong>Control</strong></p></th><th><p><strong>Function</strong></p></th></tr></thead><tbody><tr><td><p>Granularity</p></td><td><p>Modifies the granularity of metrics displayed for each chart. Options range from 1 minute to 1 day (24 hours). Select `Auto` for automatic adjustment based on the selected Zoom or Current Display date.</p></td></tr><tr><td><p>Zoom</p></td><td><p>Modifies the date range of metrics displayed for each chart, with options between 1 hour and 5 years.</p></td></tr><tr><td><p>Current Display</p></td><td><p>Modifies the start and end date-time range of metrics displayed for each chart, overriding the previously selected zoom level.</p></td></tr><tr><td><p>Add Chart</p></td><td><p>Selects one or more charts to display or hide.</p></td></tr><tr><td><p>Select Database</p></td><td><p>Visible only for the DB Stats view. Selects the database for which to display metrics.</p></td></tr><tr><td><p>Display Opcounters on Separate Charts</p></td><td><p>Splits the Opcounters chart into its individual components for detailed analysis.</p></td></tr><tr><td><p>Display Timeline Annotations</p></td><td><p>Shows or hides chart annotations indicating server events.</p></td></tr></tbody></table><p>Objective 6.3: Metrics available in different cluster types.</p><p><strong>Review Replica Set Clusters</strong></p><p>A <strong>replica set</strong> in MongoDB is a group of mongod processes that maintain the same data set. Monitoring cluster metrics is essential for identifying performance issues and ensuring that your current cluster meets your operational requirements.</p><p><strong>Accessing Metrics</strong></p><p>To return the metrics for a database on a replica set's specified host using the Atlas CLI, you can use the following commands:</p><p>bash</p><p>atlas metrics databases describe &lt;hostname:port&gt; &lt;databaseName&gt; [options]</p><p>To list available databases for the replica set's specified host, use:</p><p>bash</p><p>atlas metrics databases list &lt;hostname:port&gt; [options]</p><p>For more details on the syntax and parameters, refer to the Atlas CLI documentation for:</p><ul><li>atlas metrics databases describe</li><li>atlas metrics databases list</li></ul><p><strong>Viewing Metrics in the Atlas UI</strong></p><p>To view the metrics for a specific Atlas cluster:</p><ol><li>Click the <strong>View Monitoring</strong> button for that cluster.</li><li>Alternatively, click on the name of the cluster to open the cluster overview, then navigate to the <strong>Metrics</strong> tab.</li></ol><p><strong>Metrics View Sections</strong></p><p>The Metrics view in the Atlas UI has three distinct sections, allowing for comprehensive monitoring of your replica set.</p><p><strong>Monitoring Data Storage Granularity</strong></p><p>Atlas provides several controls for the Metric view, which affect all charts displayed:</p><table><thead><tr><th><p><strong>Control</strong></p></th><th><p><strong>Function</strong></p></th></tr></thead><tbody><tr><td><p>Granularity</p></td><td><p>Modifies the granularity of metrics displayed for each chart. Options range from 1 minute to 1 day (24 hours). Selecting 'Auto' adjusts granularity based on the selected Zoom or Current Display date.</p></td></tr><tr><td><p>Zoom</p></td><td><p>Modifies the date range of metrics displayed for each chart, with options between 1 hour and 5 years.</p></td></tr><tr><td><p>Current Display</p></td><td><p>Sets the start and end date-time range for metrics displayed, overriding the selected zoom level.</p></td></tr><tr><td><p>Toggle Members</p></td><td><p>Limits charts to the selected replica set members, indicating primary and secondary states.</p></td></tr><tr><td><p>Add Chart</p></td><td><p>Selects one or more charts to display or hide.</p></td></tr><tr><td><p>Display Opcounters on Separate Charts</p></td><td><p>Splits the Opcounters chart into its individual components for more detailed analysis.</p></td></tr><tr><td><p>Display Timeline Annotations</p></td><td><p>Shows or hides chart annotations indicating server events.</p></td></tr></tbody></table><p><strong>Chart Interaction Features</strong></p><p>When viewing charts, you can perform the following actions:</p><table><thead><tr><th><p><strong>Task</strong></p></th><th><p><strong>Action</strong></p></th></tr></thead><tbody><tr><td><p>View a detailed description of a chart</p></td><td><p>Hover over the chart and click next to the chart name to open the Chart Info modal.</p></td></tr><tr><td><p>Expand a chart</p></td><td><p>Click the two-way arrow at the top right of the chart.</p></td></tr><tr><td><p>Zoom in on a period of time</p></td><td><p>Click and drag over a portion of the chart. Double-click to reset.</p></td></tr><tr><td><p>View statistics at a particular time</p></td><td><p>Hover over a point on the chart.</p></td></tr><tr><td><p>Move a chart</p></td><td><p>Click and hold the grabber in the upper left corner, then drag the chart.</p></td></tr><tr><td><p>Share a URL to the chart</p></td><td><p>Hover over the chart and click the curved arrow to retrieve a URL or email the chart.</p></td></tr></tbody></table><p><strong>Review Sharded Clusters</strong></p><p>A <strong>sharded cluster</strong> in MongoDB consists of a set of nodes that work together to distribute data across multiple servers. This setup enhances performance and scalability. To view the metrics for a specific Atlas cluster, you can either click the <strong>View Monitoring</strong> button for that cluster or select the cluster name to access the cluster overview and then click the <strong>Metrics</strong> tab.</p><p><strong>Metrics Overview</strong></p><p>The Metrics tab for sharded clusters provides a side-by-side comparison of shards, allowing you to monitor various metrics effectively. This is crucial for identifying performance issues and ensuring that your cluster meets operational requirements. For more information on the metrics available, refer to the section on Review Available Metrics.</p><p><strong>Monitoring Data Storage Granularity</strong></p><p>Atlas provides several controls for the Metric view:</p><table><thead><tr><th><p><strong>Control</strong></p></th><th><p><strong>Function</strong></p></th></tr></thead><tbody><tr><td><p>Granularity</p></td><td><p>Modifies the granularity of metrics displayed for each chart. Options range from 1 minute to 1 day (24 hours). Selecting `Auto` adjusts granularity based on the selected Zoom or Current Display date.</p></td></tr><tr><td><p>Zoom</p></td><td><p>Modifies the date range of metrics displayed for each chart, with options between 1 hour and 5 years.</p></td></tr><tr><td><p>Current Display</p></td><td><p>Modifies the start and end date-time range of metrics displayed for each chart, overriding the previously selected zoom level.</p></td></tr><tr><td><p>Display</p></td><td><p>Selects which metric to chart, allowing only one chart at a time.</p></td></tr><tr><td><p>Display Data</p></td><td><p>Directs Atlas to display data as `Individually`, `Sum`, or `Averaged` across all shards.</p></td></tr><tr><td><p>View</p></td><td><p>Selects which sharded cluster components to display: `SHARDS`, `MONGOS`, or `CONFIGS`.</p></td></tr></tbody></table><p><strong>Metrics Table</strong></p><p>Atlas displays each data source contributing to the metric chart in a table below the chart:</p><table><thead><tr><th><p><strong>Column</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Shard Name</p></td><td><p>Displays the name of each shard when View is set to `SHARDS` or the name of each `mongos` or config server process when set to `MONGOS` or `CONFIGS`.</p></td></tr><tr><td><p>Alerts</p></td><td><p>Indicates if there are any open alerts for the listed shard or process.</p></td></tr><tr><td><p>Data Size</p></td><td><p>Visible only if View is set to `SHARDS`, indicating the logical size of all documents and indexes on the shard.</p></td></tr><tr><td><p>Show</p></td><td><p>Visible only if View is set to `SHARDS`, indicating which replica set members to show on the selected chart.</p></td></tr><tr><td><p>Read, Write, and Queued</p></td><td><p>Metric data related to the displayed chart, with detailed information available on hover.</p></td></tr></tbody></table><p><strong>Review Real-Time Metrics</strong></p><p><strong>Availability</strong></p><ul><li><strong>Real-Time Metrics</strong>: Atlas supports real-time performance metrics for mongod or mongos processes and replica set clusters. For sharded clusters, real-time performance metrics can be viewed for each shard's replica set.</li><li><strong>User Role Requirement</strong>: To access the Real Time tab, you must have the Project Owner Atlas user role.</li></ul><p><strong>Accessing Real-Time Metrics</strong></p><p>To view real-time performance metrics for a specific Atlas cluster in a project:</p><ol><li>Click the <strong>View Monitoring</strong> button for that cluster.</li><li>Alternatively, click on the name of the cluster to open the cluster overview, then click <strong>Real Time</strong> to access the Real-Time Performance Panel.</li></ol><p>Monitoring metrics in real-time allows you to respond to time-critical issues immediately.</p><p><strong>Importance of Monitoring Cluster Metrics</strong></p><ul><li><strong>Identify Performance Issues</strong>: Monitoring cluster metrics helps in identifying performance issues and determining whether your current cluster meets your operational requirements.</li><li><strong>Available Metrics</strong>: For more information on the metrics available to monitor your clusters, see Review Available Metrics.</li></ul><p><strong>Monitoring Data Storage Granularity</strong></p><ul><li>The granularity of data storage for real-time metrics can be adjusted to provide insights at different intervals, allowing for a more tailored monitoring experience.</li></ul><p><strong>Review Available Metrics</strong></p><p>MongoDB Atlas provides a variety of metrics to monitor the performance and health of your databases. Hereâ€™s a detailed overview of the available metrics:</p><p><strong>Asserts</strong></p><ul><li><strong>ASSERT_REGULAR</strong>: Average rate of regular asserts raised per second.</li><li><strong>ASSERT_WARNING</strong>: Average rate of warnings per second.</li><li><strong>ASSERT_MSG</strong>: Average rate of message asserts per second, which are internal server errors with defined text strings.</li><li><strong>ASSERT_USER</strong>: Average rate of user asserts per second, including errors like out of disk space or duplicate key errors.</li></ul><p><strong>Purpose</strong>: Monitor asserts to track errors during read/write operations and check server logs for sources of errors.</p><p><strong>Avg Object Size</strong></p><ul><li>Displays the average object size across all collections in the database.</li></ul><p><strong>Purpose</strong>: Helps track object sizes to understand database space usage.</p><p><strong>Cache Activity</strong></p><ul><li><strong>readInto</strong>: Rate in bytes per second of data read from disk into memory.</li><li><strong>writtenFrom</strong>: Rate in bytes per second of data written from memory to disk.</li></ul><p><strong>Purpose</strong>: Monitor cache activity to ensure efficient query servicing.</p><p><strong>Cache Ratio</strong></p><ul><li><strong>Cache Fill Ratio</strong>: Percentage of cache currently filled with data.</li><li><strong>Dirty Fill Ratio</strong>: Proportion of dirty bytes (modified in memory but not yet written to disk).</li></ul><p><strong>Purpose</strong>: High ratios indicate efficient cache usage; monitor to ensure data durability and performance.</p><p><strong>Cache Usage</strong></p><ul><li><strong>dirty</strong>: Total dirty bytes cached in memory.</li><li><strong>used</strong>: Total bytes cached in memory.</li></ul><p><strong>Purpose</strong>: Sustained high usage indicates insufficient RAM for workloads.</p><p><strong>Catalog</strong></p><ul><li><strong>total databases</strong>: Total number of non-system databases.</li><li><strong>total collections</strong>: Total number of collections across all non-system databases.</li><li><strong>total views</strong>: Total number of views across all non-system databases.</li><li><strong>total indexes</strong>: Total number of indexes across all non-system collections.</li></ul><p><strong>Purpose</strong>: Monitor catalog counts to prevent excessive databases/collections from causing issues.</p><p><strong>Collections</strong></p><ul><li>Displays the number of collections in the database.</li></ul><p><strong>Purpose</strong>: Helps determine performance metrics like restart times and backup performance.</p><p><strong>Connections</strong></p><ul><li>Displays the total number of active connections to the cluster.</li></ul><p><strong>Purpose</strong>: Monitor connections to ensure limits are sufficient.</p><p><strong>Cursors</strong></p><ul><li><strong>totalOpen</strong>: Number of open cursors.</li><li><strong>totalTimedOut</strong>: Average rate of timed-out cursors per second.</li></ul><p><strong>Purpose</strong>: Monitor cursors to manage resource usage effectively.</p><p><strong>DB Storage</strong></p><ul><li><strong>storageSize</strong>: Total on-disk storage space allocated for document storage.</li><li><strong>dataSize</strong>: Amount of storage space used by stored data.</li><li><strong>db data size without system</strong>: Size of document data across non-system databases.</li></ul><p><strong>Purpose</strong>: Monitor storage space for scaling decisions.</p><p><strong>Disk IOPS</strong></p><ul><li>Displays input operations per second.</li></ul><p><strong>Purpose</strong>: Monitor IOPS to ensure the cluster can handle workloads.</p><p><strong>Disk Latency</strong></p><ul><li><strong>Read</strong>: Average time to read from disk.</li><li><strong>Write</strong>: Average time to write to disk.</li></ul><p><strong>Purpose</strong>: Track efficiency of disk operations.</p><p><strong>Disk Queue Depth</strong></p><ul><li>Displays the average length of the queue of requests to the disk partition.</li></ul><p><strong>Purpose</strong>: Identify potential bottlenecks.</p><p><strong>Disk Space Metrics</strong></p><ul><li><strong>Disk Space Free</strong>: Total free space remaining on disk.</li><li><strong>Disk Space Percent Free</strong>: Free space as a percentage of total disk space.</li><li><strong>Disk Space Used</strong>: Total space used on disk.</li></ul><p><strong>Purpose</strong>: Monitor disk space to manage scaling.</p><p><strong>Disk Throughput</strong></p><ul><li><strong>Disk Read Throughput</strong>: Rate of data read from disk in MB/s.</li><li><strong>Disk Write Throughput</strong>: Rate of data written to disk in MB/s.</li></ul><p><strong>Purpose</strong>: Assess efficiency of data retrieval and persistence.</p><p><strong>Document Metrics</strong></p><ul><li><strong>Returned</strong>: Documents returned per second.</li><li><strong>Inserted</strong>: Documents inserted per second.</li><li><strong>Updated</strong>: Documents updated per second.</li><li><strong>Deleted</strong>: Documents deleted per second.</li></ul><p><strong>Purpose</strong>: Measure MongoDB workload performance.</p><p><strong>Execution Time</strong></p><ul><li>Average time for read, write, and command operations.</li></ul><p><strong>Purpose</strong>: Optimize queries and indexes based on execution time.</p><p><strong>Index Metrics</strong></p><ul><li><strong>Index Size</strong>: Total size of all indexes in the database.</li><li><strong>Indexes</strong>: Total number of indexes in the database.</li></ul><p><strong>Purpose</strong>: Manage indexes effectively.</p><p><strong>CPU Metrics</strong></p><ul><li><strong>Max Normalized System CPU</strong>: Maximum CPU usage scaled to a range of 0-100%.</li><li><strong>Max Process CPU</strong>: Maximum CPU usage for the MongoDB process.</li></ul><p><strong>Purpose</strong>: Monitor CPU usage to ensure efficient data retrieval.</p><p><strong>Memory Metrics</strong></p><ul><li><strong>Memory Resident</strong>: Memory consumed by the MongoDB process.</li><li><strong>Memory Virtual</strong>: Memory reserved for swap space.</li></ul><p><strong>Purpose</strong>: Monitor memory usage to determine if upgrades are needed.</p><p><strong>Network Metrics</strong></p><ul><li><strong>bytesIn</strong>: Average rate of bytes sent to the database</li></ul><p>Objective 6.4: Configure and respond to alerts.</p><p><strong>Alert Basics in MongoDB Atlas</strong></p><p>MongoDB Atlas provides built-in tools to help monitor your clusters effectively through alerts. Hereâ€™s a detailed overview of how alerts function and their significance:</p><p><strong>Key Features of Alerts</strong></p><ol><li><strong>Trigger Conditions</strong>: Alerts can be triggered by a variety of conditions related to your databases, users, accounts, and more. You can find the specific conditions here.</li><li><strong>Configuration</strong>: You can configure alert settings based on specific conditions. This allows you to tailor alerts to your operational needs. More details on configuring alerts can be found here.</li><li><strong>Resolution</strong>: When alerts are triggered, you can resolve them by addressing the immediate issue and implementing long-term solutions. Guidance on resolving alerts is available here.</li></ol><p><strong>Alert Notifications</strong></p><ul><li>When a condition triggers an alert, Atlas displays a warning symbol on the cluster and sends notifications based on your alert settings. Notifications continue until the condition is resolved or the alert is deleted/disabled.</li></ul><p><strong>Monitoring Metrics</strong></p><ul><li><strong>Tickets Available</strong>: This metric helps monitor the number of concurrent read or write operations. You can view this on the Tickets Available chart through cluster monitoring.</li><li><strong>Queues</strong>: This metric measures operations waiting on locks and can be viewed on the Queues chart, also accessible through cluster monitoring.</li><li><strong>CPU Steal</strong>: For AWS EC2 clusters, this condition measures the percentage by which CPU usage exceeds the guaranteed baseline CPU credit accumulation rate. You can view CPU usage on the Normalized System CPU chart.</li><li><strong>Query Targeting</strong>: Alerts related to query performance help identify inefficient queries. You can view these metrics on the Query Targeting chart.</li><li><strong>Connection Limits</strong>: Each Atlas instance has a connection limit, and alerts can help you proactively manage scaling needs or issues related to connection availability.</li></ul><p><strong>Configuring Alerts</strong></p><ul><li>You can configure alerts at both the organization and project levels. Atlas provides default alerts at the project level, and you can clone existing alerts or set maintenance window alerts.</li><li>Experiment with alert condition values based on your specific requirements and periodically reassess these values for optimal performance.</li></ul><p><strong>Common Alert Conditions</strong></p><ul><li><strong>Low Metrics</strong>: Configure alerts to trigger if metrics drop below a certain threshold for a specified duration to avoid false positives.</li><li><strong>High Metrics</strong>: Set alerts for when metrics exceed a certain threshold to catch issues when they persist over time.</li><li><strong>Connection Alerts</strong>: These typically occur when the maximum number of allowable connections is exceeded.</li></ul><p><strong>Alert Lifecycle</strong></p><p>When an alert condition is met, the alert lifecycle begins. For more information on the alert workflow, see the Alerts Workflow.</p><p><strong>Review Alert Conditions</strong></p><p>MongoDB Atlas allows you to set up alerts based on various conditions to monitor the health and performance of your clusters. Hereâ€™s a detailed overview of the different alert conditions available:</p><p><strong>Host Alerts</strong></p><ul><li><strong>Host has index suggestions</strong>: Triggered when the Performance Advisor suggests indexes for a host to improve query performance.</li><li><strong>Asserts</strong>: Alerts related to the rate of asserts (errors) in the MongoDB process:<ul><li>Asserts: Msg is</li><li>Asserts: Regular is</li><li>Asserts: User is</li><li>Asserts: Warning is</li></ul></li></ul><p><strong>Auto-Scaling Alerts</strong></p><ul><li><strong>Auto-scaling events</strong>: Alerts related to compute and disk auto-scaling events, such as: <ul><li>Compute auto-scaling initiated for base/analytics tier</li><li>Disk auto-scaling initiated</li><li>Various conditions indicating why auto-scaling did not occur.</li></ul></li></ul><p><strong>Atlas Search Alerts</strong></p><ul><li><strong>Atlas Search metrics</strong>: Alerts based on the performance of Atlas Search processes, including: <ul><li>Index Replication Lag</li><li>Max Number of Lucene Docs</li><li>Number of Error Queries</li></ul></li></ul><p><strong>Execution Time Alerts</strong></p><ul><li><strong>Average Execution Time</strong>: Alerts for average execution times of commands, reads, and writes exceeding specified thresholds.</li></ul><p><strong>Opcounter Alerts</strong></p><ul><li><strong>Opcounters</strong>: Alerts based on the rate of database operations, such as: <ul><li>Opcounter: Cmd</li><li>Opcounter: Insert</li><li>Opcounter: Update</li></ul></li></ul><p><strong>Memory and System Alerts</strong></p><ul><li><strong>Memory metrics</strong>: Alerts related to memory usage, including: <ul><li>Memory: Resident</li><li>System Memory: Used</li><li>Swap Usage: Used</li></ul></li></ul><p><strong>Connection Alerts</strong></p><ul><li><strong>Connections</strong>: Alerts for active connections to the host and their percentage of the configured limit.</li></ul><p><strong>Queue Alerts</strong></p><ul><li><strong>Queues</strong>: Alerts for operations waiting on locks, including: <ul><li>Queues: Readers</li><li>Queues: Writers</li></ul></li></ul><p><strong>Page Faults and Cursors Alerts</strong></p><ul><li><strong>Page Faults</strong>: Alerts for the rate of page faults.</li><li><strong>Cursors</strong>: Alerts for the number of open and timed-out cursors.</li></ul><p><strong>Network Alerts</strong></p><ul><li><strong>Network metrics</strong>: Alerts for network throughput, including: <ul><li>Network: Bytes In</li><li>Network: Bytes Out</li></ul></li></ul><p><strong>Oplog Alerts</strong></p><ul><li><strong>Oplog metrics</strong>: Alerts related to the replication oplog, such as: <ul><li>Oplog Data Per Hour</li><li>Replication Lag</li></ul></li></ul><p><strong>Database Storage Alerts</strong></p><ul><li><strong>DB Data Size</strong>: Alerts for the size of all documents in the database and allocated storage.</li></ul><p><strong>WiredTiger Alerts</strong></p><ul><li><strong>WiredTiger metrics</strong>: Alerts related to the WiredTiger storage engine, including cache usage and ticket availability.</li></ul><p><strong>User Alerts</strong></p><ul><li><strong>User -related alerts</strong>: Alerts for changes in user roles, multi-factor authentication status, and user activity.</li></ul><p><strong>Billing Alerts</strong></p><ul><li><strong>Billing metrics</strong>: Alerts for billing thresholds, credit card expiration, and project costs.</li></ul><p><strong>Maintenance Window Alerts</strong></p><ul><li><strong>Maintenance alerts</strong>: Notifications for scheduled maintenance events.</li></ul><p><strong>App Services Alerts</strong></p><ul><li><strong>App Services metrics</strong>: Alerts for request rates, failed requests, and compute times.</li></ul><p><strong>Serverless Alerts</strong></p><ul><li><strong>Serverless metrics</strong>: Alerts for various performance metrics specific to serverless instances.</li></ul><p><strong>Configure Alert Settings in MongoDB Atlas</strong></p><p>MongoDB Atlas allows you to configure alert settings for your organization and projects, enabling you to monitor the health and performance of your clusters effectively. Hereâ€™s a detailed overview of the key aspects of configuring alerts:</p><p><strong>Required Access</strong></p><ul><li>To manage organization alerts, you need the <strong>Organization Owner</strong> role.</li><li>For managing project alerts, you must have <strong>Project Owner</strong> access.</li><li>The <strong>Organization Billing Admin</strong> role allows limited management of billing alerts.</li></ul><p><strong>Default Alert Settings</strong></p><ul><li>Free clusters (M0) and shared clusters (M2/M5) only trigger alerts related to supported metrics. Refer to the Atlas M0, M2, and M5 Limits for details.</li></ul><p><strong>Notification Options</strong></p><p>You can select multiple notification methods when configuring alerts, including:</p><ul><li><strong>Atlas Project</strong></li><li><strong>Atlas Organization</strong></li><li><strong>Atlas User</strong></li><li><strong>Email</strong></li><li><strong>SMS</strong></li><li><strong>PagerDuty</strong></li><li><strong>Datadog</strong></li><li><strong>VictorOps</strong></li><li><strong>Opsgenie</strong></li><li><strong>Microsoft Teams</strong></li><li><strong>Webhook</strong></li></ul><p>To use certain notification methods, you must set them up in the project's settings. For example, to use Slack, you need to add it through the organization's settings.</p><p><strong>Configuring an Alert</strong></p><ol><li><strong>Select Organization and Project</strong>: Choose the organization and project from the navigation bar.</li><li><strong>Access Alerts</strong>: Click the Project Alerts icon or navigate to Project Settings &gt; Alerts.</li><li><strong>Create or Clone Alert</strong>:<ul><li>To create a new alert, click <strong>Add</strong> and select <strong>New Alert</strong>.</li><li>To clone an existing alert, find the alert in the Alert Settings tab and click <strong>Clone</strong>.</li><li>To update an existing alert, locate it in the Alert Settings tab and click <strong>Edit</strong>.</li></ul></li><li><strong>Set Alert Conditions</strong>: In the Category section, select the target component and the condition/metric. You can filter the alert to apply to specific targets using regular expressions.</li><li><strong>Add Notification Method</strong>: Choose from the available notification options and configure the roles that should receive alerts.</li><li><strong>Recurrence Settings</strong>: Optionally, specify how long the condition must last before sending an alert and how long to wait before resending.</li></ol><p><strong>Resolve Alerts in MongoDB Atlas</strong></p><p>MongoDB Atlas provides a structured approach to managing alerts triggered by various conditions in your database and server settings. Hereâ€™s a detailed overview of how to resolve alerts effectively:</p><p><strong>Viewing Alerts</strong></p><p>To view all open alerts in your organization:</p><ol><li>Select your desired organization from the <strong>Organizations</strong> menu in the navigation bar.</li><li>Click the <strong>Organization Settings</strong> icon next to the Organizations menu.</li></ol><p>To list all alerts for a specific Atlas project using the Atlas CLI, run:</p><p>bash</p><p>atlas alerts list [options]</p><p>To get details for a specific alert in the project, use:</p><p>bash</p><p>atlas alerts describe &lt;alertId&gt; [options]</p><p><strong>Acknowledging Alerts</strong></p><p>To acknowledge alerts, which prevents further notifications until the alert is resolved or unacknowledged:</p><ol><li>Select your desired organization from the <strong>Organizations</strong> menu.</li><li>Click the <strong>Organization Settings</strong> icon.</li></ol><p>To acknowledge an alert using the Atlas CLI:</p><p>bash</p><p>atlas alerts acknowledge &lt;alertId&gt; [options]</p><p>To acknowledge alerts using the Atlas UI:</p><ol><li>Select your organization and project.</li><li>Click the <strong>Project Alerts</strong> icon or navigate to <strong>Project Settings</strong> &gt; <strong>Alerts</strong>.</li></ol><p><strong>Unacknowledging Alerts</strong></p><p>To unacknowledge an alert, allowing notifications to resume:</p><ol><li>Select your organization and project.</li><li>Click the <strong>Project Alerts</strong> icon or navigate to <strong>Project Settings</strong> &gt; <strong>Alerts</strong>.</li></ol><p>To unacknowledge an alert using the Atlas CLI:</p><p>bash</p><p>atlas alerts unacknowledge &lt;alertId&gt; [options]</p><p><strong>Increasing Cluster Capacity</strong></p><p>If an alert indicates that your cluster is under-provisioned, you can resolve it by increasing the cluster's capacity. For more details, refer to the Modify a Cluster documentation.</p><p><strong>Activity Feed</strong></p><p>To view and filter the activity feed for an organization or project, see the View the Activity Feed.</p><p><strong>Resolving Specific Alerts</strong></p><p>For specific alerts, refer to the alert conditions documentation, which provides insights and suggested steps for resolution.</p><p>Objective 6.5: Analyze query performance.</p><p><strong>Monitor Your Clusters</strong></p><p>MongoDB Atlas provides a comprehensive suite of tools to help you monitor your clusters effectively. This includes built-in tools, alerts, charts, integrations, and logs that enhance your ability to maintain optimal performance.</p><p><strong>Monitoring Tools</strong></p><p>To optimize your query performance, you can utilize the following built-in tools:</p><ul><li><strong>Performance Advisor</strong>: <ul><li>Monitor and improve slow queries.</li></ul></li><li><strong>Namespace Insights</strong>: <ul><li>Monitor collection-level query latency.</li></ul></li><li><strong>Query Profiler</strong>: <ul><li>Monitor query performance.</li></ul></li><li><strong>Real-Time Performance Panel</strong>: <ul><li>Monitor real-time performance metrics.</li></ul></li></ul><p><strong>Schema Design Optimization</strong></p><p>To enhance your schema design, you can review frequently used schema design patterns and improve your schema based on recommendations from the Performance Advisor and the Atlas UI.</p><p><strong>Alerts Configuration</strong></p><p>You can trigger alerts based on specific conditions to ensure cluster performance. It is essential to configure alerts and resolve them promptly. When resolving alerts, you should:</p><ul><li>Fix the immediate problem.</li><li>Implement a long-term solution.</li><li>Monitor your progress.</li></ul><p>Before setting up alerts, it is advisable to review the Alert Basics.</p><p><strong>Cluster Performance Monitoring</strong></p><p>To monitor your cluster performance, you can view historical throughput, performance, and utilization metrics for your databases. For more details, review the available metrics.</p><p><strong>Third-Party Integrations</strong></p><p>To receive Atlas alerts in various external monitoring services, you can integrate with third-party monitoring services. You can configure push-based monitoring integrations for Atlas with DataDog and pull monitoring data with the Atlas Administration API.</p><p><strong>Log Management</strong></p><p>You can view and download your MongoDB logs and system event audit messages. This is crucial for troubleshooting and monitoring your database operations.</p><p><strong>Note</strong></p><p>You can configure pull-based logging integrations with jSonar, which can push to other services like Splunk and SumoLogic. Additionally, you can pull log data every 5 minutes with the Atlas Administration API.</p><p><strong>Monitor Collection-Level Query Latency</strong></p><p><strong>Overview</strong></p><p>Namespace Insights in MongoDB Atlas allows you to monitor collection-level query latency, providing valuable metrics and statistics for each top or pinned namespace. This feature is available only on M10+ clusters and helps you analyze the performance of your collections.</p><p><strong>Considerations</strong></p><ul><li><strong>Queryable Encryption</strong>: If enabled for a collection, Namespace Insights will not display that collection, as Atlas redacts this information.</li><li><strong>Data Limit</strong>: If the data limit for a page load is reached, you will see an error message indicating that the chart data limit has been reached.</li><li><strong>Time Series Collections</strong>: Namespace Insights does not support time series collections.</li></ul><p><strong>Access Namespace Insights</strong></p><p>To access Namespace Insights:</p><ol><li>Select the organization that contains your desired project from the <strong>Organizations</strong> menu.</li><li>Select your desired project from the <strong>Projects</strong> menu.</li><li>Click <strong>Clusters</strong> in the sidebar.</li><li>Click <strong>View Monitoring</strong> for the instance in the project panel.</li><li>Click the <strong>Query Insights</strong> tab, where the Namespace Insights tab will display by default.</li></ol><p><strong>Filter Namespace Insights</strong></p><p>You can filter Namespace Insights by host state, hosts, time intervals, and a time range.</p><ul><li><strong>Filter by Host State</strong>:<ul><li>Expand the <strong>Filter by Hosts</strong> drop-down menu.</li><li>Select <strong>Primaries</strong> or <strong>Secondaries</strong>.</li></ul></li><li><strong>Filter by Shard</strong>:<ul><li>Specify a shard in the <strong>Filter by Hosts</strong> search box.</li><li>Select a shard from the drop-down menu.</li></ul></li><li><strong>Filter by Hosts</strong>:<ul><li>Specify hosts in the <strong>Filter by Hosts</strong> search box.</li><li>Select hosts from the drop-down menu.</li></ul></li><li><strong>Time Intervals</strong>: Choose from the following options:<ul><li>7 days</li><li>24 hours</li><li>12 hours</li><li>8 hours</li><li>1 hour</li></ul></li><li><strong>Time Range</strong>:<ul><li>Click the <strong>Filter by time range</strong> drop-down menu.</li><li>Specify a time range and click <strong>Apply Dates</strong>.</li></ul></li></ul><p><strong>View Chart Metrics</strong></p><p>You can view different metrics and operations by selecting from the following metrics:</p><table><thead><tr><th><p><strong>Metric</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Total latency</p></td><td><p>Total combined server operation duration on a collection.</p></td></tr><tr><td><p>Average latency</p></td><td><p>Total server operation time divided by the total server operation count.</p></td></tr><tr><td><p>P50 latency</p></td><td><p>50th percentile in the latency histogram, indicating the median latency.</p></td></tr><tr><td><p>P95 latency</p></td><td><p>95th percentile in the latency histogram, representing the latency below which 95% of operations fall.</p></td></tr><tr><td><p>P99 latency</p></td><td><p>99th percentile in the latency histogram, indicating the latency below which 99% of operations fall.</p></td></tr><tr><td><p>Operation count</p></td><td><p>Total number of server operations performed on a collection.</p></td></tr></tbody></table><p>You can also select operation types:</p><ul><li>All operation types</li><li>Read</li><li>Write</li><li>Command</li></ul><p><strong>Manage Pinned Namespaces</strong></p><p>You can pin a maximum of five namespaces to the top of the table.</p><ul><li><strong>From the Dialog</strong>:<ul><li>Click the <strong>Pin namespaces</strong> button if you have no pinned namespaces.</li><li>If you have pinned namespaces, click the <strong>Manage pinned namespaces</strong> button.</li><li>Specify a namespace in the search box and click to pin it.</li><li>To unpin, click <strong>Unpin</strong> next to the namespace.</li></ul></li><li><strong>From the Table</strong>:<ul><li>Specify a namespace in the <strong>Search namespaces</strong> search box.</li><li>Click the icon next to the namespace to pin it.</li><li>To unpin, click the icon next to the namespace and select <strong>Unpin</strong>.</li></ul></li></ul><p><strong>Select Namespaces to Chart</strong></p><p>You can manually select namespaces to chart by specifying a namespace in the search box and clicking the checkbox next to it. You can select a maximum of five namespaces.</p><p><strong>Edit Columns</strong></p><p>To adjust the metric and operation type columns:</p><ol><li>Click the <strong>Edit Columns</strong> button.</li><li>Expand the metrics to display or hide.</li><li>Select or deselect operation types to display or hide.</li><li>Click inside the table to close the drop-down.</li></ol><p><strong>Go to a Collection</strong></p><p>To navigate to a specific collection:</p><ol><li>Specify a namespace in the <strong>Search namespaces</strong> search box.</li><li>Click the icon next to the namespace for the collection you want to view.</li><li>Click <strong>Go to collection</strong>.</li></ol><p><strong>Monitor Query Performance</strong></p><p>The Query Profiler in MongoDB Atlas is a powerful tool designed to diagnose and monitor performance issues, particularly slow-running queries. Hereâ€™s a detailed overview of its features and functionalities:</p><p><strong>Key Features</strong></p><ul><li><strong>Availability</strong>: The Query Profiler is available only on M10+ clusters and Serverless instances.</li><li><strong>Performance Monitoring</strong>: It collects and displays statistics from your mongod instances, identifying slow queries based on log data. This information is accessible in the Query Insights tab within the Query Profiler section of an instance.</li><li><strong>Difference from Database Profiler</strong>: The Query Profiler focuses on identifying inefficient queries from mongod logs, while the Database Profiler provides detailed information about all commands executed on the mongod based on the specified profiling level.</li></ul><p><strong>Data Display</strong></p><ul><li><strong>Operation Execution Time</strong>: The profiler displays the execution time of operations, helping you identify slow database operations over a specified time frame.</li><li><strong>Server Execution Time</strong>: For Serverless instances, it shows the server execution time.</li><li><strong>Filtering Options</strong>: You can filter the displayed operations by specific hosts, allowing you to focus on primary or secondary host groups.</li></ul><p><strong>Binning Operations</strong></p><p>The Query Profiler supports binning operations of the same type that run on the same collection around the same timestamp. This is useful for aggregating data points and improving the clarity of performance metrics.</p><p><strong>Threshold Management</strong></p><ul><li><strong>Slow Operations Threshold</strong>: Atlas manages the threshold for slow operations based on the average execution time on each mongod host. You can adjust this threshold using the db.setProfilingLevel command in mongosh.</li><li><strong>Caution</strong>: Changing the profiling level can impact performance and system log settings, so it should be done with care, especially in production environments.</li></ul><p><strong>Important Considerations</strong></p><ul><li><strong>Sensitive Data</strong>: Profile data may include sensitive information, so ensure that exposing this data to Atlas aligns with your security practices.</li><li><strong>Data Limitations</strong>: The Query Profiler displays approximately 100,000 sampled logs at a time. If more than 100,000 logs are recorded, only the most recent logs will be shown.</li><li><strong>Log Processing Delays</strong>: Log data is processed in batches, which may result in delays of up to five minutes from real-time.</li><li><strong>Activity Spikes</strong>: During periods of high activity, Atlas may temporarily stop collecting and storing new logs.</li></ul><p><strong>Enabling and Accessing the Query Profiler</strong></p><ul><li><strong>Default Setting</strong>: The Query Profiler is enabled by default in Atlas.</li><li><strong>Disabling the Profiler</strong>: To disable the Query Profiler, navigate to the Project Settings and toggle the Performance Advisor and Profiler to Off.</li><li><strong>Accessing the Profiler</strong>:<ul><li>For clusters, click <strong>View Monitoring</strong> for the instance, then navigate to the <strong>Query Insights</strong> tab and select the <strong>Query Profiler</strong> tab.</li><li>For Serverless instances, click the <strong>Monitoring</strong> tab.</li></ul></li></ul><p><strong>Metrics Selection</strong></p><p>You can customize the metrics displayed in the Query Profiler:</p><ol><li><strong>Select Metric</strong>: Choose from options like Operation Execution Time, Keys Examined, Docs Returned, and more.</li><li><strong>Select Time Period</strong>: Options include 5 days, 24 hours (default), 12 hours, 8 hours, 1 hour, and 10 minutes.</li><li><strong>Filter by Hosts</strong>: Specify which hosts to view metrics for.</li></ol><p><strong>Viewing Query Details</strong></p><p>To view detailed statistics for a specific query:</p><ul><li>Click on the point representing the query on the chart.</li><li>Zoom in on the x and y axes to focus on specific data points.</li></ul><p><strong>Monitor Real-Time Performance</strong></p><p>The Real-Time Performance Panel (RTPP) in MongoDB Atlas is a powerful tool designed to monitor and display real-time metrics related to network traffic, database operations, and hardware statistics for your MongoDB clusters. Hereâ€™s a detailed overview of its features and functionalities:</p><p><strong>Required Access</strong></p><ul><li>To enable or disable the Real-Time Performance Panel for a project, you must have <strong>Project Owner</strong> access. Users with <strong>Organization Owner</strong> access must add themselves to the project as a Project Owner.</li></ul><p><strong>Enable or Disable the Real-Time Performance Panel</strong></p><ol><li><strong>Select Organization</strong>: Choose the organization that contains your desired project from the <strong>Organizations</strong> menu in the navigation bar.</li><li><strong>Select Project</strong>: Choose your desired project from the <strong>Projects</strong> menu.</li><li><strong>Access Project Settings</strong>: Expand the <strong>Options</strong> menu next to the Projects menu and click <strong>Project Settings</strong>.</li></ol><p><strong>Access the Real-Time Performance Panel</strong></p><ol><li><strong>Select Organization</strong>: Choose the organization that contains your desired project from the <strong>Organizations</strong> menu.</li><li><strong>Select Project</strong>: Choose your desired project from the <strong>Projects</strong> menu.</li><li><strong>Click Clusters</strong>: Click on <strong>Clusters</strong> in the sidebar to access the Clusters page.</li></ol><p>If the replica set is part of a sharded cluster, first click the sharded cluster containing the replica set.</p><p><strong>Graph View and Table View</strong></p><p>The RTPP displays data in both graph and table formats, allowing for flexible monitoring of performance metrics.</p><table><thead><tr><th><p><strong>Chart/Location</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Connections, Network In, Network Out</p></td><td><p>Displays the number of current connections and the number of inbound and outbound bytes as reported byÂ mongostat.</p></td></tr><tr><td><p>CPU, Disk IOPS, and Sys Mem</p></td><td><p>Shows the percentage of CPU used, disk read/write operations per second, and total physical memory usage.</p></td></tr><tr><td><p>Operations</p></td><td><p>Displays the number of operations as reported byÂ mongostat.</p></td></tr><tr><td><p>Query Execution Times</p></td><td><p>Shows latency statistics for current read, write requests, and other database commands.</p></td></tr><tr><td><p>Query Targeting</p></td><td><p>Displays the ratio of documents scanned to documents returned in current queries.</p></td></tr><tr><td><p>Reads &amp; Writes</p></td><td><p>Displays active and queued reads and writes as reported byÂ mongostat.</p></td></tr><tr><td><p>Replication Lag</p></td><td><p>Shows the time required to replicate operations from the primary to secondary members of a replica set.</p></td></tr><tr><td><p>Hottest Collections</p></td><td><p>Displays collections with the most operations and their utilization percentage.</p></td></tr><tr><td><p>Slowest Operations</p></td><td><p>Displays the slowest operations as reported byÂ db.currentOp().</p></td></tr></tbody></table><p><strong>Additional Features</strong></p><ul><li><strong>Hover Functionality</strong>: When you pause the graph view, you can hover over a line graph to see its exact value at a given moment in time.</li><li><strong>Field Management</strong>: You can click to hide or display fields from the table for a more customized view.</li></ul><p><strong>Fields in the Table View</strong></p><table><thead><tr><th><p><strong>Fields</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Commands, Queries, Updates, Deletes, Inserts, GetMores</p></td><td><p>Displays the number of specified operations as reported byÂ mongostat.</p></td></tr><tr><td><p>Time / Read, Time / Write, Time / Command</p></td><td><p>Displays latency statistics for current read, write requests, and other commands.</p></td></tr><tr><td><p>Scanned / Returned, Scanned Objects / Returned</p></td><td><p>Displays the ratio of documents scanned to documents returned in current queries.</p></td></tr><tr><td><p>Active Readers, Active Writers, Queued Readers, Queued Writers</p></td><td><p>Displays the number of active and queued reads and writes.</p></td></tr><tr><td><p>Lag Time</p></td><td><p>Displays the time required to replicate operations from the primary to secondary members of a replica set.</p></td></tr><tr><td><p>CPU, Disk IOPS, Sys Mem</p></td><td><p>Displays the percentage of CPU used, disk read/write operations per second, and total physical memory usage.</p></td></tr><tr><td><p>Connections, Bytes In, Bytes Out</p></td><td><p>Displays the number of current connections and the number of inbound and outbound bytes.</p></td></tr></tbody></table><p>Objective 6.6: Optimize deployment using Performance Advisor.</p><p><strong>Monitor and Improve Slow Queries</strong></p><p>The Performance Advisor in MongoDB Atlas helps you monitor slow queries and suggests indexes to improve query performance. Hereâ€™s a detailed overview of its features and functionalities:</p><p><strong>Common Reasons for Slow Queries</strong></p><ol><li><strong>Unsupported Queries</strong>: Queries that are not supported by existing indexes.</li><li><strong>Large Array Fields</strong>: Documents with large array fields can be costly to search and index.</li><li><strong>Multiple Collections</strong>: Queries that retrieve information from multiple collections using $lookup.</li></ol><p><strong>Required Access</strong></p><ul><li><strong>Project Read Only</strong>: Required to view collections with slow queries and suggested indexes.</li><li><strong>Project Data Access Read/Write</strong>: Required to view field values in sample queries.</li><li><strong>Project Owner</strong>: Required to enable or disable the Atlas-managed slow operation threshold.</li></ul><p><strong>Configure the Slow Query Threshold</strong></p><ul><li>By default, Atlas dynamically adjusts the slow query threshold based on execution times. You can opt for a fixed threshold of 100 milliseconds.</li><li>To disable the Atlas-managed slow operation threshold, use the following command in the Atlas CLI:</li></ul><p>bash</p><p>atlas performanceAdvisor slowOperationThreshold disable [options]</p><ul><li>To enable it again, use:</li></ul><p>bash</p><p>atlas performanceAdvisor slowOperationThreshold enable [options]</p><p><strong>Access Performance Advisor</strong></p><p>To access the Performance Advisor in the Atlas UI:</p><ol><li>Select the organization and project from the navigation bar.</li><li>Click on <strong>Clusters</strong> in the sidebar.</li><li>If the replica set is part of a sharded cluster, first click the sharded cluster containing the replica set.</li></ol><p><strong>Index Suggestions</strong></p><p>The Performance Advisor provides index suggestions based on the past 24 hours of query performance. You can view recommendations and create suggested indexes directly within the Performance Advisor.</p><p><strong>Create Suggested Indexes</strong></p><p>To create suggested indexes, you can do so directly in the Performance Advisor. Keep in mind the trade-off between read and write performance when adding new indexes.</p><p><strong>Suggested Index Metrics</strong></p><p>Each suggested index includes metrics such as:</p><table><thead><tr><th><p><strong>Metric</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Execution Count</p></td><td><p>Number of queries executed per hour that would be improved by the suggested index.</p></td></tr><tr><td><p>Average Execution Time</p></td><td><p>Current average execution time in milliseconds for queries that would benefit from the index.</p></td></tr><tr><td><p>Average Query Targeting</p></td><td><p>Average number of documents read per document returned for queries that would benefit from the index.</p></td></tr><tr><td><p>In Memory Sort</p></td><td><p>Number of affected queries needing to be sorted in memory due to lack of an appropriate index.</p></td></tr><tr><td><p>Average Docs Scanned</p></td><td><p>Average number of documents scanned for queries that would benefit from the index.</p></td></tr><tr><td><p>Average Docs Returned</p></td><td><p>Average number of documents returned for queries that would benefit from the index.</p></td></tr><tr><td><p>Average Object Size</p></td><td><p>Average size of objects being queried, which can influence indexing decisions.</p></td></tr></tbody></table><p><strong>Query Shape Metrics</strong></p><p>For each query shape that the index would improve, the Performance Advisor displays:</p><table><thead><tr><th><p><strong>Metric</strong></p></th><th><p><strong>Description</strong></p></th></tr></thead><tbody><tr><td><p>Execution Count</p></td><td><p>Number of queries executed per hour matching the specific query shape.</p></td></tr><tr><td><p>Average Execution Time</p></td><td><p>Average execution time in milliseconds for matching queries based on the specific shape.</p></td></tr><tr><td><p>Average Query Targeting</p></td><td><p>Average number of documents read for every document returned for matching queries.</p></td></tr><tr><td><p>Average Docs Scanned</p></td><td><p>Average number of documents scanned for matching queries.</p></td></tr><tr><td><p>Average Docs Returned</p></td><td><p>Average number of documents returned for matching queries.</p></td></tr></tbody></table><p><strong>Using the Atlas CLI</strong></p><p>You can also use the Atlas CLI to interact with the Performance Advisor. Here are some useful commands:</p><ul><li>To list namespaces experiencing slow queries:</li></ul><p>bash</p><p>atlas performanceAdvisor namespaces list [options]</p><ul><li>To list slow query logs:</li></ul><p>bash</p><p>atlas performanceAdvisor slowQueryLogs list [options]</p><ul><li>To list suggested indexes:</li></ul><p>bash</p><p>atlas performanceAdvisor suggestedIndexes list [options]</p><p><strong>Important Notes</strong></p><ul><li>The Performance Advisor does not provide suggestions for time-series collections.</li><li>If a cluster experiences a spike in activity, Atlas may temporarily stop collecting new logs.</li><li>You cannot create indexes through the Performance Advisor if Data Explorer is disabled for your project.</li></ul><p><strong>Review Index Ranking in MongoDB Atlas Performance Advisor</strong></p><p>The Performance Advisor in MongoDB Atlas provides valuable insights into how to optimize query performance through effective indexing. Hereâ€™s a detailed overview of how it suggests and ranks indexes:</p><p><strong>How Performance Advisor Suggests and Ranks Indexes</strong></p><p>The Performance Advisor monitors queries that take longer than <strong>100 milliseconds</strong> to execute and groups these queries into common <strong>query shapes</strong>. It calculates the inefficiency of each query shape using several aggregated metrics, including:</p><ul><li><strong>Execution Time</strong>: The total time spent executing the query.</li><li><strong>Documents Scanned</strong>: The number of documents scanned during the query.</li><li><strong>Documents Returned</strong>: The number of documents returned by the query.</li><li><strong>Average Object Size</strong>: The average size of the objects being queried.</li></ul><p>Using these metrics, the Performance Advisor calculates the <strong>Impact</strong> of creating an index that matches a specific query shape. The Impact reflects the estimated performance improvement that the suggested index would provide, primarily determined by the total wasted bytes read.</p><p><strong>Index Field Order</strong></p><p>The order of fields in the suggested indexes is influenced by the type of query operation. Generally, the Performance Advisor ranks fields by their <strong>cardinality</strong>, which refers to the uniqueness of the values in a field.</p><p><strong>Limiting Proposed Indexes</strong></p><p>The Performance Advisor does not suggest indexes with more than <strong>16 fields</strong>. Additionally, it only suggests indexes if the difference between scanned documents and returned documents exceeds <strong>500</strong> for impacted queries.</p><p>To avoid redundancy, the Performance Advisor de-duplicates overlapping indexes. For example, if it calculates potential suggested indexes like { a : 1 } and { a : 1, b : 1 }, it will only suggest { a : 1, b : 1 } since the first is a prefix of the second.</p><p><strong>Example: New York City Taxi Data</strong></p><p>Consider a database named cab-db that contains information about New York City taxi rides. A typical document in the yellow collection might look like this:</p><p>json</p><p>{</p><p>  "_id": ObjectId("5db9daab0b2a17b7706cd6a3"),</p><p>  "pickup_datetime": "2014-06-30 02:09:23",</p><p>  "dropoff_datetime": "2014-06-30 02:20:36",</p><p>  "passenger_count": 2,</p><p>  "trip_distance": 3,</p><p>  "fare_amount": 12,</p><p>  "tip_amount": 2.6,</p><p>  "total_amount": 15.6</p><p>}</p><p>With over <strong>10 million documents</strong>, efficient indexing is crucial for performance. Typical queries might search for documents based on specific dropoff times and other fields, such as:</p><p>javascript</p><p>db.yellow.find({</p><p>  "dropoff_datetime": "2014-06-19 21:45:00",</p><p>  "passenger_count": 1,</p><p>  "trip_distance": { "$gt": 3 }</p><p>});</p><p>The Performance Advisor would recommend indexes to improve performance, such as an index on:</p><ul><li>passenger_count</li><li>dropoff_datetime</li><li>trip_distance</li></ul><p><strong>Creating Suggested Indexes</strong></p><p>You can create the suggested indexes directly from the Performance Advisor interface. By doing so, you eliminate the need for the database engine to scan the entire collection, significantly improving query performance. Queries with the suggested index can return results in <strong>50 milliseconds or less</strong>, compared to several seconds without the index.</p><p><strong>Additional Notes</strong></p><ul><li>The Performance Advisor shows index recommendations for all collections by default, but you can narrow down the recommendations to a specific collection.</li><li>You can also create indexes using the Atlas UI.</li></ul><p><strong>Review Drop Index Recommendations</strong></p><p>The Performance Advisor in MongoDB Atlas suggests dropping unused, redundant, and hidden indexes to enhance write performance and free up storage space.</p><p><strong>Key Concepts</strong></p><ul><li><strong>Unused Indexes</strong>: An index is considered unused if it hasn't supported any queries for 7 or more days after its creation or after the server was restarted. The Performance Advisor inspects only the 20 most active collections for unused indexes.</li><li><strong>Redundant Indexes</strong>: An index is flagged as redundant if another index supports any query that it could. For example, if a collection has the following indexes:<ul><li>{ a: 1 }</li><li>{ b: -1 }</li><li>{ a: 1, b: -1 }</li></ul></li></ul><p>The index { a: 1 } is redundant because it matches the prefix of { a: 1, b: -1 }. The redundant indexes are marked with a red Redundant badge in the Performance Advisor.</p><ul><li><strong>Hidden Indexes</strong>: Atlas does not use hidden indexes to support queries, but they still impact write performance and consume storage space. You can hide an index to evaluate the impact of dropping it before making a final decision. Unhiding an index is quicker than rebuilding a dropped index.</li></ul><p><strong>Recommendations</strong></p><ul><li>The Performance Advisor always recommends dropping hidden indexes. If you determine that a hidden index is unnecessary, it should be dropped.</li><li>The Performance Advisor displays hidden indexes from your top 20 most active namespaces at the time the page is loaded. If you have more than 20 namespaces, not all hidden indexes may be displayed.</li></ul><p><strong>Steps to Drop or Hide an Index</strong></p><ol><li><strong>Select Organization and Project</strong>: Choose the organization and project from the navigation bar.</li><li><strong>Access Clusters</strong>: Click on <strong>Clusters</strong> in the sidebar.</li><li><strong>Performance Advisor</strong>: In the Performance Advisor tab, click <strong>Explore Recommendations</strong> on the Drop Indexes card.</li><li><strong>Select Host</strong>: By default, results correspond to one of the primary hosts, but you can select another host from the drop-down.</li><li><strong>Dialog Box</strong>: The Performance Advisor displays a dialog box with a link to the Atlas UI and a copyable MongoDB Shell command to drop or hide the index.</li><li><strong>Using Atlas UI</strong>: Click the <strong>Indexes</strong> tab, then click the <strong>Drop Index</strong> or <strong>Hide Index</strong> icon next to the index. Confirm your selection in the dialog box.</li><li><strong>Using MongoDB Shell</strong>: Paste and run the command provided by the Performance Advisor to drop or hide the index.</li></ol><p><strong>Enable or Disable Performance Advisor for a Project</strong></p><p>The Performance Advisor in MongoDB Atlas is a valuable tool that helps optimize query performance by suggesting indexes based on query patterns. Hereâ€™s how to enable or disable it for a specific project:</p><p><strong>Required Access</strong></p><ul><li>To enable or disable the Performance Advisor, you must have <strong>Project Owner</strong> access to the project.</li><li>Users with <strong>Organization Owner</strong> access must add themselves to the project as a Project Owner to manage the Performance Advisor settings.</li></ul><p><strong>Procedure to Enable or Disable Performance Advisor</strong></p><ol><li><strong>Select Organization</strong>: If itâ€™s not already displayed, select the organization that contains your desired project from the <strong>Organizations</strong> menu in the navigation bar.</li><li><strong>Select Project</strong>: If itâ€™s not already displayed, select your desired project from the <strong>Projects</strong> menu in the navigation bar.</li><li><strong>Access Project Settings</strong>: Next to the Projects menu, expand the <strong>Options</strong> menu, then click <strong>Project Settings</strong>.<ul><li>This action will take you to the <strong>Project Settings</strong> page, where you can manage various settings related to the project, including the Performance Advisor.</li></ul></li></ol><p><strong>Domain 7: Database Upgrades and Maintenance (13%)</strong></p><p><strong>Upgrade Major MongoDB Version for a Cluster</strong></p><p>This page provides a comprehensive guide on how to upgrade the major version of your MongoDB Atlas cluster. It includes considerations, required access, and detailed steps for performing the upgrade.</p><p><strong>Considerations</strong></p><ul><li><strong>Cluster Health</strong>: Ensure your cluster is in a healthy state before initiating the upgrade.</li><li><strong>Snapshot Completion</strong>: If you take an on-demand snapshot before the upgrade, wait for it to complete.</li><li><strong>One Major Version at a Time</strong>: You can only upgrade one major version at a time; skipping versions is not allowed.</li><li><strong>Backward Compatibility</strong>: Review the Release Notes for any features that may not be backward-compatible.</li><li><strong>Feature Compatibility Version (FCV)</strong>: After upgrading, you cannot downgrade unless you pinned the FCV before the upgrade.</li><li><strong>Live Migration</strong>: Ensure FCVs on source and destination clusters match for live migrations.</li><li><strong>Aggregation Variable Changes</strong>: Be aware of changes to the $$SEARCH_META aggregation variable starting with MongoDB 6.0.</li></ul><p><strong>Required Access</strong></p><p>To upgrade your major MongoDB version, you must have the Project Owner role or higher for the project.</p><p><strong>Upgrade Your Major MongoDB Version</strong></p><ol><li><strong>Select Organization</strong>: Choose the organization containing your project from the Organizations menu.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Clusters</strong>: Click on <strong>Clusters</strong> in the sidebar to view your clusters.</li></ol><p><strong>Create a Staging Cluster</strong></p><ul><li>If you do not have a staging environment, create a new cluster that matches your production cluster's configuration. You do not need to enable backups for the staging cluster.</li></ul><p><strong>Data Migration to Staging Cluster</strong></p><ul><li>If backups are enabled, restore the most recent snapshot to the staging cluster. If not, use Atlas Live Import to mirror data.</li></ul><p><strong>Update Application Connection</strong></p><ul><li>Update your application to connect to the staging cluster and ensure it operates as expected.</li></ul><p><strong>Change Cluster Version</strong></p><ol><li><strong>Edit Config</strong>: Click on <strong>Edit Config</strong> and select your staging cluster.</li><li><strong>Change Version</strong>: Change the cluster version to the desired major MongoDB version.</li><li><strong>Confirm Changes</strong>: Click <strong>Confirm &amp; Deploy</strong> to initiate the upgrade.</li></ol><p><strong>Testing and Validation</strong></p><ul><li>Perform necessary performance and operational testing on the staging cluster. Ensure your application can handle primary failover scenarios.</li></ul><p><strong>Upgrade Production Cluster</strong></p><ul><li>Once satisfied with the staging cluster's performance, repeat the upgrade procedure for your production cluster.</li></ul><p><strong>Feature Compatibility Version (FCV) Management</strong></p><ul><li>You can pin and unpin the FCV for your cluster, which allows you to revert to a previous version if necessary. Note that FCV pinning is only available on Dedicated clusters and expires after four weeks.</li></ul><p><strong>Downgrade Your Cluster</strong></p><ul><li>You can only downgrade if you pinned the FCV before upgrading. The downgrade can only be performed to the major version that matches the pinned FCV.</li></ul><table><tr><td><p><strong>Consideration</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p>Cluster Health</p></td><td><p>Your cluster must be in a healthy state before upgrading.</p></td></tr><tr><td><p>Snapshot Completion</p></td><td><p>Wait for any on-demand snapshot to complete before upgrading.</p></td></tr><tr><td><p>One Major Version</p></td><td><p>You can only upgrade one major version at a time.</p></td></tr><tr><td><p>Backward Compatibility</p></td><td><p>Check the Release Notes for any backward-incompatible features.</p></td></tr><tr><td><p>FCV Management</p></td><td><p>Pin the FCV before upgrading to allow for downgrades.</p></td></tr></table><p><strong>Configure Maintenance Window</strong></p><p>This page provides guidance on how to configure a maintenance window for your MongoDB Atlas cluster. It explains the importance of maintenance windows, the required access, and the procedures for setting and managing them.</p><p><strong>Maintenance Window Considerations</strong></p><ul><li><strong>Purpose</strong>: A maintenance window allows you to specify the hour of the day when Atlas should perform maintenance on your cluster. This setting is optional and typically not required, as Atlas performs maintenance automatically in a rolling manner to ensure continuous availability.</li><li><strong>Urgent Maintenance</strong>: Atlas will perform urgent maintenance activities, such as security patches, immediately without regard to scheduled maintenance windows.</li><li><strong>Non-Urgent Updates</strong>: Some updates that do not require a mongod restart may also occur outside of scheduled maintenance windows.</li></ul><p><strong>Required Access</strong></p><p>To manage maintenance windows, you must have either the Organization Owner or Project Owner role for the project.</p><p><strong>Procedure to Configure Maintenance Window</strong></p><ol><li><strong>Select Organization</strong>: Choose the organization that contains your project from the Organizations menu.</li><li><strong>Select Project</strong>: Choose your desired project from the Projects menu.</li><li><strong>Access Project Settings</strong>: Expand the Options menu next to the Projects menu and click on Project Settings.</li></ol><p><strong>Using the Atlas CLI</strong></p><ul><li>To return details for the maintenance window, use: </li></ul><p>bash</p><p>ï‚·  atlas maintenanceWindows describe [options]</p><p>ï‚·  To update the maintenance window, use: </p><p>bash</p><ul><li>atlas maintenanceWindows update [options]</li></ul><p><strong>Configuring Maintenance Window in Atlas UI</strong></p><ol><li>Toggle the <strong>Set Preferred Cluster Maintenance Start Time</strong> setting to On.</li><li>Click to set the Maintenance Start Time, which will display in your Profile's time zone.</li><li>Set the desired day and time for maintenance.</li><li>Optionally, click to automatically defer any scheduled maintenance for one week.</li><li>Click <strong>Save</strong> to apply changes or <strong>Cancel</strong> to discard them.</li></ol><p><strong>Clearing the Maintenance Window</strong></p><ul><li>To clear the configured maintenance window using the Atlas CLI: </li></ul><p>bash</p><ul><li>atlas maintenanceWindows clear [options]</li><li>In the Atlas UI, toggle the <strong>Set Preferred Cluster Maintenance Start Time</strong> setting to Off.</li></ul><p><strong>Responding to Required Maintenance</strong></p><ul><li>Atlas will display a banner in your project's cluster list showing the scheduled maintenance date and time.</li><li>Users with the Project Owner role will receive an email notification 48 to 72 hours before the scheduled maintenance.</li></ul><p><strong>Defer Maintenance</strong></p><ul><li>To defer the maintenance window using the Atlas CLI: </li></ul><p>bash</p><ul><li>atlas maintenanceWindows defer [options]</li></ul><p><strong>Options During Maintenance</strong></p><p>When maintenance is required, you can choose one of the following options in the Atlas UI:</p><ol><li><strong>Do nothing</strong>: Maintenance occurs during the scheduled window.</li><li><strong>Begin Maintenance Now</strong>: Starts the scheduled maintenance immediately.</li><li><strong>Defer Maintenance for One Week</strong>: Reschedules the maintenance for one week later.</li></ol><p><strong>Maintenance Version Upgrades</strong></p><p>If a MongoDB version upgrade is scheduled during the maintenance window, the cluster's card will display the target MongoDB maintenance version.</p>